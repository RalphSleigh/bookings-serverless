{"version":3,"file":"bundle.app.js","mappings":"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;AACA,SAAS;AACT;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,KAAK;AACL;;;;;;;;;;;AC5CA;;;;;;UCAA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;UAEA;UACA;;;;;WC5BA;WACA;WACA;WACA;WACA,+BAA+B,wCAAwC;WACvE;WACA;WACA;WACA;WACA,iBAAiB,qBAAqB;WACtC;WACA;WACA,kBAAkB,qBAAqB;WACvC;WACA;WACA,KAAK;WACL;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;;;;;WC3BA;WACA;WACA;WACA;WACA;WACA,iCAAiC,WAAW;WAC5C;WACA;;;;;WCPA;WACA;WACA;WACA;WACA,yCAAyC,wCAAwC;WACjF;WACA;WACA;;;;;WCPA;WACA;WACA;WACA;WACA,GAAG;WACH;WACA;WACA,CAAC;;;;;WCPD;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,EAAE;WACF;WACA;;;;;WCVA;;;;;WCAA;WACA;WACA;WACA,uDAAuD,iBAAiB;WACxE;WACA,gDAAgD,aAAa;WAC7D;;;;;WCNA;WACA;WACA;WACA;WACA;;;;;WCJA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;;;;;WCfA;;WAEA;WACA;WACA;WACA;WACA;WACA;;WAEA;;WAEA;;WAEA;;WAEA;;WAEA;;WAEA;;WAEA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,MAAM,qBAAqB;WAC3B;WACA;WACA;WACA;WACA;WACA;WACA;WACA;;WAEA;WACA;WACA;;;;;UEhDA;UACA;UACA;UACA;UACA","sources":["webpack:///./src/front/lib/react-selectize/index.css","webpack:///./node_modules/moment/locale/ sync en-gb","webpack:///./src/front/lib/react-selectize/index.css?e1cc","webpack:///./src/front/age/dob.tsx","webpack:///./src/front/age/groups.tsx","webpack:///./src/front/age/index.tsx","webpack:///./src/front/app/index.tsx","webpack:///./src/front/attendance/free.tsx","webpack:///./src/front/attendance/index.ts","webpack:///./src/front/attendance/presets.tsx","webpack:///./src/front/attendance/whole.tsx","webpack:///./src/front/bookings/actions.ts","webpack:///./src/front/bookings/components/applyPage.tsx","webpack:///./src/front/bookings/components/applyThanksPage.tsx","webpack:///./src/front/bookings/components/cancelPage.tsx","webpack:///./src/front/bookings/components/editPage.tsx","webpack:///./src/front/bookings/components/form/additionalContacts.tsx","webpack:///./src/front/bookings/components/form/bookingForm.tsx","webpack:///./src/front/bookings/components/form/bookingUserDetails.tsx","webpack:///./src/front/bookings/components/form/feeForm.tsx","webpack:///./src/front/bookings/components/form/foodForm.tsx","webpack:///./src/front/bookings/components/form/participantsForm.tsx","webpack:///./src/front/bookings/components/form/paymentForm.tsx","webpack:///./src/front/bookings/components/form/permissionForm.tsx","webpack:///./src/front/bookings/components/loader.tsx","webpack:///./src/front/bookings/components/myBookingPage.tsx","webpack:///./src/front/bookings/components/participantQuickList.tsx","webpack:///./src/front/bookings/components/thanksPage.tsx","webpack:///./src/front/bookings/index.ts","webpack:///./src/front/bookings/permission.ts","webpack:///./src/front/bookings/reducer.ts","webpack:///./src/front/events/actions.ts","webpack:///./src/front/events/components/createPage.tsx","webpack:///./src/front/events/components/editPage.tsx","webpack:///./src/front/events/components/eventForm.tsx","webpack:///./src/front/events/components/listPage.tsx","webpack:///./src/front/events/components/organisationForm.tsx","webpack:///./src/front/events/index.ts","webpack:///./src/front/events/permission.ts","webpack:///./src/front/events/reducer.ts","webpack:///./src/front/fetch.ts","webpack:///./src/front/index.tsx","webpack:///./src/front/manage/actions.ts","webpack:///./src/front/manage/components/applications.tsx","webpack:///./src/front/manage/components/birthdays.tsx","webpack:///./src/front/manage/components/bookings.tsx","webpack:///./src/front/manage/components/containerPage.tsx","webpack:///./src/front/manage/components/emails.tsx","webpack:///./src/front/manage/components/filter.tsx","webpack:///./src/front/manage/components/graphs.tsx","webpack:///./src/front/manage/components/kp.tsx","webpack:///./src/front/manage/components/membership.tsx","webpack:///./src/front/manage/components/money.tsx","webpack:///./src/front/manage/components/participants.tsx","webpack:///./src/front/manage/components/roles.tsx","webpack:///./src/front/manage/components/villages.tsx","webpack:///./src/front/manage/index.ts","webpack:///./src/front/manage/permission.ts","webpack:///./src/front/messages/actions.ts","webpack:///./src/front/messages/components/messages.tsx","webpack:///./src/front/messages/index.ts","webpack:///./src/front/messages/reducer.ts","webpack:///./src/front/routes.tsx","webpack:///./src/front/user/actions.ts","webpack:///./src/front/user/components/loginStatus.tsx","webpack:///./src/front/user/components/userPage.tsx","webpack:///./src/front/user/index.ts","webpack:///./src/front/user/reducer.ts","webpack:///./src/shared/fee/big.tsx","webpack:///./src/shared/fee/cg-preset.tsx","webpack:///./src/shared/fee/ealing-cg.tsx","webpack:///./src/shared/fee/ealing.tsx","webpack:///./src/shared/fee/feeFactory.ts","webpack:///./src/shared/fee/flat.tsx","webpack:///./src/shared/fee/free.tsx","webpack:///./src/shared/fee/payment-lines.ts","webpack:///./src/shared/fee/vcamp-free.tsx","webpack:///./src/shared/paymentReference.ts","webpack:///./src/shared/permissions.ts","webpack:///./src/shared/woodcraft.js","webpack:///external var \"{}\"","webpack:///webpack/bootstrap","webpack:///webpack/runtime/chunk loaded","webpack:///webpack/runtime/compat get default export","webpack:///webpack/runtime/define property getters","webpack:///webpack/runtime/global","webpack:///webpack/runtime/harmony module decorator","webpack:///webpack/runtime/hasOwnProperty shorthand","webpack:///webpack/runtime/make namespace object","webpack:///webpack/runtime/node module decorator","webpack:///webpack/runtime/publicPath","webpack:///webpack/runtime/jsonp chunk loading","webpack:///webpack/before-startup","webpack:///webpack/startup","webpack:///webpack/after-startup"],"sourcesContent":["exports = module.exports = require(\"../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".react-selectize {\\n  color: #000;\\n}\\n\\n.react-selectize.root-node {\\n  position: relative;\\n}\\n\\n.react-selectize.root-node.disabled {\\n  pointer-events: none;\\n}\\n\\n.react-selectize.root-node .react-selectize-control {\\n  cursor: pointer;\\n  display: flex;\\n  align-items: flex-start;\\n  position: relative;\\n  padding: 2px;\\n}\\n\\n.react-selectize.root-node .react-selectize-control .react-selectize-placeholder {\\n  display: block;\\n  line-height: 30px;\\n  overflow: hidden;\\n  text-overflow: ellipsis;\\n  vertical-align: middle;\\n  white-space: nowrap;\\n  position: absolute;\\n  max-width: calc(100% - 56px);\\n}\\n\\n.react-selectize.root-node .react-selectize-control .react-selectize-search-field-and-selected-values {\\n  display: flex;\\n  min-height: 30px;\\n  flex-grow: 1;\\n  flex-wrap: wrap;\\n}\\n\\n.react-selectize.root-node .react-selectize-control .react-selectize-search-field-and-selected-values .resizable-input {\\n  background: none;\\n  border: none;\\n  outline: none;\\n  font-size: 1em;\\n  margin: 2px;\\n  padding: 4px 0px;\\n  vertical-align: middle;\\n  width: 0px;\\n}\\n\\n.react-selectize.root-node .react-selectize-control .react-selectize-search-field-and-selected-values .value-wrapper {\\n  display: flex;\\n  align-items: center;\\n}\\n\\n.react-selectize.root-node .react-selectize-control .react-selectize-reset-button-container,\\n.react-selectize.root-node .react-selectize-control .react-selectize-toggle-button-container {\\n  flex-grow: 0;\\n  flex-shrink: 0;\\n  cursor: pointer;\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  height: 30px;\\n}\\n\\n.react-selectize.root-node .react-selectize-control .react-selectize-reset-button-container {\\n  width: 16px;\\n}\\n\\n.react-selectize.root-node .react-selectize-control .react-selectize-toggle-button-container {\\n  width: 32px;\\n}\\n\\n.react-selectize.root-node .react-selectize-control .react-selectize-reset-button-container:hover .react-selectize-reset-button path {\\n  stroke: #c0392b;\\n}\\n\\n.react-selectize.root-node .react-selectize-control .react-selectize-reset-button path {\\n  transition: stroke 0.5s 0s ease;\\n  stroke: #999;\\n  stroke-linecap: square;\\n  stroke-linejoin: mitter;\\n}\\n\\n.react-selectize.root-node .react-selectize-control .react-selectize-toggle-button path {\\n  fill: #999;\\n}\\n\\n.react-selectize.dropdown-menu-wrapper {\\n  position: absolute;\\n}\\n\\n.react-selectize.dropdown-menu-wrapper.tethered {\\n  min-width: 300px;\\n}\\n\\n.react-selectize.dropdown-menu-wrapper:not(.tethered) {\\n  width: 100%;\\n}\\n\\n.react-selectize.rs-dropdown-menu {\\n  box-sizing: border-box;\\n  overflow: auto;\\n  position: absolute;\\n  max-height: 200px;\\n  z-index: 10;\\n}\\n\\n.react-selectize.rs-dropdown-menu.tethered {\\n  min-width: 300px;\\n}\\n\\n.react-selectize.rs-dropdown-menu:not(.tethered) {\\n  width: 100%;\\n}\\n\\n.react-selectize.rs-dropdown-menu .groups.as-columns {\\n  display: flex;\\n}\\n\\n.react-selectize.rs-dropdown-menu .groups.as-columns > div {\\n  flex: 1;\\n}\\n\\n.react-selectize.rs-dropdown-menu .option-wrapper {\\n  cursor: pointer;\\n  outline: none;\\n}\\n\\n.multi-select.react-selectize.root-node .simple-value {\\n  display: inline-block;\\n  margin: 2px;\\n  vertical-align: middle;\\n}\\n\\n.multi-select.react-selectize.root-node .simple-value span {\\n  display: inline-block;\\n  padding: 2px 5px 4px;\\n  vertical-align: center;\\n}\\n\\n.simple-select.react-selectize.root-node .simple-value {\\n  margin: 2px;\\n}\\n\\n.simple-select.react-selectize.root-node .simple-value span {\\n  display: inline-block;\\n  vertical-align: center;\\n}\\n\\n.react-selectize.default {\\n  font-family: Helvetica Neue, Helvetica, Arial, sans-serif;\\n}\\n\\n.react-selectize.default.root-node .react-selectize-control {\\n  background-color: #fff;\\n  border: 1px solid;\\n  border-color: #d9d9d9 #ccc #b3b3b3;\\n  border-radius: 4px;\\n  font-size: 1em;\\n}\\n\\n.react-selectize.default.root-node .react-selectize-control .react-selectize-placeholder {\\n  color: #aaa;\\n  text-indent: 8px;\\n}\\n\\n.react-selectize.default.root-node .react-selectize-control .react-selectize-search-field-and-selected-values {\\n  padding-left: 5px;\\n}\\n\\n.react-selectize.default.root-node.open.flipped .react-selectize-control {\\n  border-bottom-left-radius: 4px;\\n  border-bottom-right-radius: 4px;\\n  border-top-left-radius: 0px;\\n  border-top-right-radius: 0px;\\n}\\n\\n.react-selectize.default.root-node.open:not(.flipped) .react-selectize-control {\\n  border-bottom-left-radius: 0px;\\n  border-bottom-right-radius: 0px;\\n  border-top-left-radius: 4px;\\n  border-top-right-radius: 4px;\\n}\\n\\n.react-selectize.dropdown-menu-wrapper.default {\\n  overflow: hidden;\\n}\\n\\n.react-selectize.dropdown-menu-wrapper.default .rs-dropdown-menu.custom-enter-active,\\n.react-selectize.dropdown-menu-wrapper.default .rs-dropdown-menu.custom-leave-active {\\n  transition: transform 0.2s 0s ease;\\n}\\n\\n.react-selectize.dropdown-menu-wrapper.default .rs-dropdown-menu.flipped.custom-enter {\\n  transform: translateY(100%);\\n}\\n\\n.react-selectize.dropdown-menu-wrapper.default .rs-dropdown-menu.flipped.custom-enter-active {\\n  transform: translateY(0%);\\n}\\n\\n.react-selectize.dropdown-menu-wrapper.default .rs-dropdown-menu.flipped.custom-leave {\\n  transform: translateY(0%);\\n}\\n\\n.react-selectize.dropdown-menu-wrapper.default .rs-dropdown-menu.flipped.custom-leave-active {\\n  transform: translateY(100%);\\n}\\n\\n.react-selectize.dropdown-menu-wrapper.default .rs-dropdown-menu:not(.flipped).custom-enter {\\n  transform: translateY(-100%);\\n}\\n\\n.react-selectize.dropdown-menu-wrapper.default .rs-dropdown-menu:not(.flipped).custom-enter-active {\\n  transform: translateY(0%);\\n}\\n\\n.react-selectize.dropdown-menu-wrapper.default .rs-dropdown-menu:not(.flipped).custom-leave {\\n  transform: translateY(0%);\\n}\\n\\n.react-selectize.dropdown-menu-wrapper.default .rs-dropdown-menu:not(.flipped).custom-leave-active {\\n  transform: translateY(-100%);\\n}\\n\\n.react-selectize.rs-dropdown-menu.default {\\n  background: #fff;\\n  border: 1px solid #ccc;\\n  margin-top: -1px;\\n}\\n\\n.react-selectize.rs-dropdown-menu.default.flipped {\\n  border-top-left-radius: 4px;\\n  border-top-right-radius: 4px;\\n}\\n\\n.react-selectize.rs-dropdown-menu.default:not(.flipped) {\\n  border-color: #b3b3b3 #ccc #d9d9d9;\\n  border-bottom-left-radius: 4px;\\n  border-bottom-right-radius: 4px;\\n}\\n\\n.react-selectize.rs-dropdown-menu.default .no-results-found {\\n  color: #aaa !important;\\n  font-style: oblique;\\n  padding: 8px 10px;\\n}\\n\\n.react-selectize.rs-dropdown-menu.default .simple-group-title {\\n  background-color: #fafafa;\\n  padding: 8px 8px;\\n}\\n\\n.react-selectize.rs-dropdown-menu.default .option-wrapper.highlight {\\n  background: #f2f9fc;\\n  color: #333;\\n}\\n\\n.react-selectize.rs-dropdown-menu.default .option-wrapper .simple-option {\\n  color: #666;\\n  cursor: pointer;\\n  padding: 8px 10px;\\n}\\n\\n.react-selectize.rs-dropdown-menu.default .option-wrapper .simple-option.not-selectable {\\n  background-color: #f8f8f8;\\n  color: #999;\\n  cursor: default;\\n  font-style: oblique;\\n  text-shadow: 0px 1px 0px #fff;\\n}\\n\\n.multi-select.react-selectize.default.root-node .simple-value {\\n  background: #f2f9fc;\\n  border: 1px solid #c9e6f2;\\n  border-radius: 2px;\\n  color: #08c;\\n}\\n\\n.simple-select.react-selectize.default.root-node.open .react-selectize-control {\\n  background-color: #fff;\\n}\\n\\n.simple-select.react-selectize.default.root-node:not(.open) .react-selectize-control {\\n  background-color: #f9f9f9;\\n  background-image: linear-gradient(to bottom, #fefefe, #f2f2f2);\\n}\\n\\n.react-selectize.bootstrap3 {\\n  font-family: Helvetica Neue, Helvetica, Arial, sans-serif;\\n}\\n\\n.react-selectize.bootstrap3.root-node.open .react-selectize-control {\\n  background-color: #fff;\\n  border: 1px solid #66afe9;\\n  box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075), 0 0 8px rgba(102, 175, 233, 0.6);\\n}\\n\\n.react-selectize.bootstrap3.root-node .react-selectize-control {\\n  border: 1px solid;\\n  border-color: #d9d9d9 #ccc #b3b3b3;\\n  border-radius: 4px;\\n  font-size: 1em;\\n}\\n\\n.react-selectize.bootstrap3.root-node .react-selectize-control .react-selectize-placeholder {\\n  color: #aaa;\\n  text-indent: 8px;\\n}\\n\\n.react-selectize.bootstrap3.root-node .react-selectize-control .react-selectize-search-field-and-selected-values {\\n  padding-left: 5px;\\n}\\n\\n.react-selectize.bootstrap3.dropdown-menu-wrapper.flipped {\\n  margin-bottom: 5px;\\n}\\n\\n.react-selectize.bootstrap3.dropdown-menu-wrapper:not(.flipped) {\\n  margin-top: 5px;\\n}\\n\\n.react-selectize.bootstrap3.dropdown-menu-wrapper .rs-dropdown-menu.custom-enter-active,\\n.react-selectize.bootstrap3.dropdown-menu-wrapper .rs-dropdown-menu.custom-leave-active {\\n  transition: opacity 0.2s 0s ease;\\n}\\n\\n.react-selectize.bootstrap3.dropdown-menu-wrapper .rs-dropdown-menu.custom-enter {\\n  opacity: 0;\\n  -ms-filter: \\\"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)\\\";\\n  filter: alpha(opacity=0);\\n}\\n\\n.react-selectize.bootstrap3.dropdown-menu-wrapper .rs-dropdown-menu.custom-enter-active {\\n  opacity: 1;\\n  -ms-filter: none;\\n  filter: none;\\n}\\n\\n.react-selectize.bootstrap3.dropdown-menu-wrapper .rs-dropdown-menu.custom-leave {\\n  opacity: 1;\\n  -ms-filter: none;\\n  filter: none;\\n}\\n\\n.react-selectize.bootstrap3.dropdown-menu-wrapper .rs-dropdown-menu.custom-leave-active {\\n  opacity: 0;\\n  -ms-filter: \\\"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)\\\";\\n  filter: alpha(opacity=0);\\n}\\n\\n.react-selectize.bootstrap3.rs-dropdown-menu {\\n  background: #fff;\\n  border: 1px solid #ccc;\\n  border-radius: 4px;\\n  box-shadow: 0 6px 12px rgba(0, 0, 0, 0.175);\\n}\\n\\n.react-selectize.bootstrap3.rs-dropdown-menu.flipped {\\n  margin-bottom: 5px;\\n}\\n\\n.react-selectize.bootstrap3.rs-dropdown-menu:not(.flipped) {\\n  margin-top: 5px;\\n}\\n\\n.react-selectize.bootstrap3.rs-dropdown-menu .no-results-found {\\n  color: #aaa !important;\\n  font-style: oblique;\\n  padding: 8px 10px;\\n}\\n\\n.react-selectize.bootstrap3.rs-dropdown-menu .groups:not(.as-columns) > div:not(:first-child) {\\n  border-top: 1px solid #e5e5e5;\\n  margin: 12px 0px 0px 0px;\\n}\\n\\n.react-selectize.bootstrap3.rs-dropdown-menu .simple-group-title {\\n  background-color: #fff;\\n  color: #999;\\n  padding: 8px 8px;\\n  text-shadow: 0px 1px 0px rgba(0, 0, 0, 0.05);\\n}\\n\\n.react-selectize.bootstrap3.rs-dropdown-menu .option-wrapper.highlight {\\n  background: #428bca;\\n}\\n\\n.react-selectize.bootstrap3.rs-dropdown-menu .option-wrapper.highlight .simple-option {\\n  color: #fff;\\n}\\n\\n.react-selectize.bootstrap3.rs-dropdown-menu .option-wrapper .simple-option {\\n  color: #333;\\n  cursor: pointer;\\n  padding: 8px 10px;\\n}\\n\\n.react-selectize.bootstrap3.rs-dropdown-menu .option-wrapper .simple-option.not-selectable {\\n  background-color: #f8f8f8;\\n  color: #999;\\n  cursor: default;\\n  font-style: oblique;\\n  text-shadow: 0px 1px 0px #fff;\\n}\\n\\n.multi-select.react-selectize.bootstrap3.root-node .simple-value {\\n  background: #efefef;\\n  border-radius: 4px;\\n  color: #333;\\n}\\n\\n.react-selectize.material {\\n  font-family: Roboto, sans-serif;\\n}\\n\\n.react-selectize.material.root-node.open .react-selectize-control:after {\\n  transform: scaleX(1);\\n}\\n\\n.react-selectize.material.root-node .react-selectize-control {\\n  border-bottom: 1px solid rgba(0, 0, 0, 0.3);\\n}\\n\\n.react-selectize.material.root-node .react-selectize-control:after {\\n  background-color: #00bcd4;\\n  content: \\\"\\\";\\n  transform: scaleX(0);\\n  transition: transform 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n  position: absolute;\\n  left: 0px;\\n  bottom: -1px;\\n  width: 100%;\\n  height: 2px;\\n}\\n\\n.react-selectize.material.root-node .react-selectize-control .react-selectize-placeholder {\\n  color: rgba(0, 0, 0, 0.3);\\n  text-indent: 4px;\\n}\\n\\n.react-selectize.material.dropdown-menu-wrapper.flipped {\\n  margin-bottom: 8px;\\n}\\n\\n.react-selectize.material.dropdown-menu-wrapper.flipped .rs-dropdown-menu {\\n  transform-origin: 100% 100%;\\n}\\n\\n.react-selectize.material.dropdown-menu-wrapper:not(.flipped) {\\n  margin-top: 8px;\\n}\\n\\n.react-selectize.material.dropdown-menu-wrapper:not(.flipped) .rs-dropdown-menu {\\n  transform-origin: 0% 0%;\\n}\\n\\n.react-selectize.material.dropdown-menu-wrapper .rs-dropdown-menu.custom-enter-active,\\n.react-selectize.material.dropdown-menu-wrapper .rs-dropdown-menu.custom-leave-active {\\n  transition: transform 250ms cubic-bezier(0.23, 1, 0.32, 1) 0ms, opacity 250ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n}\\n\\n.react-selectize.material.dropdown-menu-wrapper .rs-dropdown-menu.custom-enter {\\n  opacity: 0;\\n  -ms-filter: \\\"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)\\\";\\n  filter: alpha(opacity=0);\\n  transform: scale(0, 0);\\n}\\n\\n.react-selectize.material.dropdown-menu-wrapper .rs-dropdown-menu.custom-enter-active {\\n  opacity: 1;\\n  -ms-filter: none;\\n  filter: none;\\n  transform: scale(1, 1);\\n}\\n\\n.react-selectize.material.dropdown-menu-wrapper .rs-dropdown-menu.custom-leave {\\n  opacity: 1;\\n  -ms-filter: none;\\n  filter: none;\\n  transform: scale(1, 1);\\n}\\n\\n.react-selectize.material.dropdown-menu-wrapper .rs-dropdown-menu.custom-leave-active {\\n  opacity: 0;\\n  -ms-filter: \\\"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)\\\";\\n  filter: alpha(opacity=0);\\n}\\n\\n.react-selectize.material.rs-dropdown-menu {\\n  background-color: #fff;\\n  border-radius: 2px;\\n  box-shadow: rgba(0, 0, 0, 0.118) 0px 1px 6px, rgba(0, 0, 0, 0.118) 0px 1px 4px;\\n  max-height: 250px;\\n  padding: 8px 0px;\\n}\\n\\n.react-selectize.material.rs-dropdown-menu.flipped {\\n  margin-bottom: 8px;\\n}\\n\\n.react-selectize.material.rs-dropdown-menu:not(.flipped) {\\n  margin-top: 8px;\\n}\\n\\n.react-selectize.material.rs-dropdown-menu .no-results-found {\\n  font-style: oblique;\\n  font-size: 16px;\\n  height: 32px;\\n  padding: 0px 16px;\\n  display: flex;\\n  align-items: center;\\n}\\n\\n.react-selectize.material.rs-dropdown-menu .groups:not(.as-columns) > div:not(:last-child) {\\n  border-bottom: 1px solid #e5e5e5;\\n}\\n\\n.react-selectize.material.rs-dropdown-menu .simple-group-title {\\n  color: #8f8f8f;\\n  display: flex;\\n  align-items: center;\\n  font-size: 14px;\\n  height: 48px;\\n  padding: 0px 10px;\\n}\\n\\n.react-selectize.material.rs-dropdown-menu .option-wrapper.highlight {\\n  background-color: rgba(0, 0, 0, 0.098);\\n}\\n\\n.react-selectize.material.rs-dropdown-menu .option-wrapper .simple-option {\\n  color: rgba(0, 0, 0, 0.875);\\n  cursor: pointer;\\n  display: flex;\\n  flex-direction: column;\\n  align-items: flex-start;\\n  justify-content: center;\\n  font-size: 16px;\\n  height: 48px;\\n  padding: 0px 16px;\\n}\\n\\n.react-selectize.material.rs-dropdown-menu .option-wrapper .simple-option.not-selectable {\\n  background-color: #f8f8f8;\\n  color: #999;\\n  cursor: default;\\n  font-style: oblique;\\n  text-shadow: 0px 1px 0px #fff;\\n}\\n\\n.multi-select.react-selectize.material.root-node .simple-value span {\\n  padding: 0px;\\n}\\n\\n.multi-select.react-selectize.material.root-node .simple-value span:after {\\n  content: \\\",\\\";\\n}\\n\\n.simple-select.react-selectize.material.root-node .simple-value {\\n  margin: 4px 3px 3px 2px;\\n}\", \"\"]);\n\n// exports\n","var map = {\n\t\"./en-gb\": \"./node_modules/moment/locale/en-gb.js\",\n\t\"./en-gb.js\": \"./node_modules/moment/locale/en-gb.js\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"./node_modules/moment/locale sync recursive en-gb\";","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/css-loader/index.js!../../../../node_modules/resolve-url-loader/index.js!./index.css\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// Prepare cssTransformation\nvar transform;\n\nvar options = {\"hmr\":true}\noptions.transform = transform\n// add the styles to the DOM\nvar update = require(\"!../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../../node_modules/css-loader/index.js!../../../../node_modules/resolve-url-loader/index.js!./index.css\", function() {\n\t\t\tvar newContent = require(\"!!../../../../node_modules/css-loader/index.js!../../../../node_modules/resolve-url-loader/index.js!./index.css\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}","import * as React from 'react'\r\n\r\nimport { DateTimePicker } from 'react-widgets/lib'\r\n\r\nimport {\r\n    Col,\r\n    Label\r\n} from 'reactstrap';\r\nimport { woodcraft as W } from '../../shared/woodcraft.js'\r\nimport Moment from \"moment/moment\";\r\n\r\n/*\r\nindvidual age widgets\r\n */\r\n\r\nexport default {\r\n    BookingFormWidget: props => {\r\n        return <React.Fragment>\r\n            <Label sm={2}>Date of Birth:</Label>\r\n            <Col sm={3}>\r\n                <DateTimePicker\r\n                    value={props.age ? new Date(props.age) : null}\r\n                    placeholder={'DD/MM/YYYY'}\r\n                    onChange={props.updateAge}\r\n                    editFormat={'DD/MM/YYYY'}\r\n                    format={'DD/MM/YYYY'}\r\n                    time={false}\r\n                    inputProps={{className: 'form-control ' + props.valid, placeholder: 'DD/MM/YYYY'}}\r\n                />\r\n            </Col>\r\n        </React.Fragment>\r\n    },\r\n\r\n    displayAgeParticipant: p => {\r\n        return p.ageGroup + (p.ageAtStart < 21 ? ` (${p.ageAtStart})` : '');\r\n    },\r\n\r\n    displayAgeMoment: (age, event) => {\r\n        const startDate = Moment(event.startDate); //todo store this as a Moment.\r\n        const ageAtStart = startDate.diff(Moment(age), 'years');//@ts-ignore\r\n        const ageGroup = W.find(w => w.filter(ageAtStart)).singular;\r\n        return ageGroup + (ageAtStart < 21 ? ` (${ageAtStart})` : '');\r\n    },\r\n\r\n    displayAgeCSV: p => {\r\n        return p.age\r\n    },\r\n\r\n    participantCardField: p => {\r\n        return <p><b>DOB: </b>{Moment(p.dob).format(\"DD/MM/YYYY\")} - {p.age}</p>\r\n    }\r\n};","import * as React from 'react'\r\n\r\nimport DateTimePicker from 'react-widgets/lib/DateTimePicker'\r\n\r\nimport {\r\n    Col,\r\n    Label,\r\n    Input\r\n} from 'reactstrap';\r\nimport { woodcraft as W } from '../../shared/woodcraft.js'\r\nimport Moment from \"moment/moment\";\r\n\r\nconst moment = require(\"moment\");\r\n\r\n/*\r\nindvidual age widgets\r\n */\r\n\r\nexport default {\r\n    BookingFormWidget: props => {\r\n\r\n        const options = W.map((w, i) => <option key={i} value={w.singular}>{w.singular}</option>);\r\n        let ageGroup = '';\r\n\r\n        if (props.age) {\r\n            const ageAtStart = Moment(props.event.startDate).diff(Moment(props.age), 'years');//@ts-ignore\r\n            ageGroup = W.find(w => w.filter(ageAtStart)).singular;\r\n        }\r\n\r\n        const onChange = e => {\r\n\r\n            if (e.target.value === '') return props.updateAge(null);\r\n            const ageGroup = W.find(w => w.singular === e.target.value);//@ts-ignore\r\n            props.updateAge(ageGroup.getAge(props.event));\r\n        };\r\n\r\n        return <React.Fragment>\r\n            <Label sm={2}>Age:</Label>\r\n            <Col sm={3}>\r\n                <Input\r\n                    type=\"select\"\r\n                    value={ageGroup}\r\n                    onChange={onChange}\r\n                    className={props.valid}>\r\n                    <option value={''}>Please Select</option>\r\n                    {options}\r\n                </Input>\r\n            </Col>\r\n        </React.Fragment>\r\n    },\r\n\r\n    displayAgeParticipant: p => {\r\n        return p.ageGroup;\r\n    },\r\n\r\n    displayAgeMoment: (age, event) => {\r\n        const startDate = Moment(event.startDate); //todo store this as a Moment.\r\n        const ageAtStart = startDate.diff(Moment(age), 'years');//@ts-ignore\r\n        const ageGroup = W.find(w => w.filter(ageAtStart)).singular;\r\n        return ageGroup;\r\n    },\r\n\r\n    displayAgeCSV: p => {\r\n        return p.age\r\n    },\r\n\r\n    participantCardField: p => {\r\n        return <p><b>Age: </b>{p.age}</p>\r\n    }\r\n};","/*\r\n\r\nOffer different ways of collecting/displaying age.\r\nRegardless of the method chosen, we store it as a date (which may not be an exact date of birth).\r\n\r\n */\r\n\r\nimport dob from './dob';\r\nimport grouping from './groups';\r\n\r\nexport default event => {\r\n    try {\r\n        switch (event.customQuestions.ageWidgets) {\r\n            case 'dob':\r\n                return dob;\r\n            case 'groupings':\r\n                return grouping\r\n        }\r\n        return dob;\r\n    }\r\n    catch (e) {\r\n        return dob;\r\n    }\r\n\r\n};","import * as React from 'react'\r\nimport {Link} from 'react-router-dom'\r\nimport {connect} from 'react-redux'\r\n\r\nimport * as messages from '../messages'\r\nimport * as user from '../user'\r\nimport * as events from '../events'\r\nimport * as bookings from '../bookings'\r\n\r\nimport {withRouter} from 'react-router-dom';\r\nimport {matchPath}  from 'react-router'\r\n\r\nimport {\r\n    Container,\r\n    Row,\r\n    Col\r\n} from 'reactstrap';\r\n\r\n\r\nclass App extends React.Component<any, any> {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n\r\n    componentWillMount() {\r\n        console.log(\"App componentWillMount fetching props\")\r\n        this.props.getUser();\r\n        this.props.getEvents();\r\n        this.props.getUserBookings();\r\n    }\r\n\r\n    componentWillReceiveProps(nextProps) { //refresh bookings/events if we log in/out\r\n        console.log(\"App componentWillReceivePropss\")\r\n\r\n        if(nextProps.User !== null && nextProps.Events === null){\r\n            console.log(\"events refresh123\")\r\n            this.props.getEvents();\r\n        }\r\n        if(nextProps.User !== null && nextProps.Bookings === null) {\r\n            console.log(\"bookings refresh\")\r\n            this.props.getUserBookings();\r\n\r\n        }\r\n        if (this.props.User !== null && this.props.User !== nextProps.User) {\r\n            console.log(\"Refreshing bookings/evens\")\r\n            this.props.getUserBookings();\r\n            this.props.getEvents(); //need to drop the detailed event models if present\r\n        }\r\n    }\r\n\r\n    render() {\r\n\r\n        //prevent render until we have the basic data available, this makes child components much simpler.\r\n        if (this.props.User === null || this.props.Events === null || this.props.Bookings === null) {\r\n            \r\n            console.log(\"NOT rendering, users:\")\r\n            console.log(this.props.User)\r\n            console.log(\"NOT rendering: events:\")\r\n            console.log(this.props.Events)\r\n            console.log(\"NOT rendering: bookings\")\r\n            console.log(this.props.Bookings)\r\n            \r\n            return (\r\n            <div className=\"lds-default\">\r\n                <div></div>\r\n                <div></div>\r\n                <div></div>\r\n                <div></div>\r\n                <div></div>\r\n                <div></div>\r\n                <div></div>\r\n                <div></div>\r\n                <div></div>\r\n                <div></div>\r\n                <div></div>\r\n                <div></div>\r\n            </div>);\r\n        }\r\n\r\n        console.log(\"rendering\")\r\n\r\n        const envMarker = this.props.Env === 'dev' ? <div className=\"envMarker\"><p>TEST</p></div> : null;\r\n            //@ts-ignore\r\n        const inManage = !!matchPath(location.pathname, {\r\n            path:   \"/event/:eventId/manage\",\r\n            exact:  false,\r\n            strict: false\r\n        });\r\n\r\n        return (\r\n            <React.Fragment>\r\n                {envMarker}\r\n                <Container fluid={inManage}>\r\n                    <Row className=\"align-items-center\">\r\n                        <Col>\r\n                            <h2 className=\"align-middle\">{window.location.hostname}</h2>\r\n                        </Col>\r\n                        <Col sm=\"auto\">\r\n                            <img className=\"float-right\" src=\"/logo.png\" style={{height: \"75px\"}}/>\r\n                        </Col>\r\n                    </Row>\r\n                    <Row>\r\n                        <Col>\r\n                            <Link to=\"/\">Home</Link>\r\n                        </Col>\r\n                        <Col sm=\"auto\">\r\n                            <user.loginStatus/>\r\n                        </Col>\r\n                    </Row>\r\n                    <Row>\r\n                        <messages.messages/>\r\n                    </Row>\r\n                    {this.props.children}\r\n                    <Row>\r\n                        <Col>\r\n                            <footer><p className=\"small text-center\">&copy; 2018 <a\r\n                                href=\"https://www.woodcraft.org.uk/\">Woodcraft\r\n                                Folk</a>, Source on <a href=\"https://github.com/RalphSleigh/bookings\">Github</a>.</p>\r\n                            </footer>\r\n                        </Col>\r\n                    </Row>\r\n                </Container>\r\n            </React.Fragment>\r\n        );\r\n    }\r\n}\r\n\r\n//store.dispatch(user.actions.getUser());\r\n\r\nconst mapStateToProps = (state) => {\r\n    let User = state.getIn([\"User\", \"user\"]);\r\n    let Events = state.getIn([\"Events\", \"events\"]);\r\n    let Bookings = state.getIn([\"Bookings\", \"bookings\"]);\r\n    let Env = state.get(\"App\");\r\n    return {User, Events, Bookings, Env};\r\n};\r\n\r\nconst mapDispatchToProps = {\r\n    getUser: user.actions.getUser,\r\n    getEvents: events.actions.getEvents,\r\n    getUserBookings: bookings.actions.getUserBookings\r\n};\r\n\r\nvar VisibleApp = connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(App);\r\n\r\nexport default withRouter(VisibleApp);\r\n\r\n\r\n\r\n\r\n","import * as React     from 'react'\r\n\r\nexport const name = \"free\";\r\nexport const selection = \"Free Choice\";\r\n\r\nimport {\r\n    Button,\r\n    ButtonGroup,\r\n    Row,\r\n    Col,\r\n    FormGroup,\r\n    Label,\r\n    Input,\r\n    Card,\r\n    CardBody\r\n} from 'reactstrap';\r\n\r\nimport Moment          from \"moment/moment\";\r\n\r\nexport class Config extends React.Component<any, any> {\r\n\r\n    render() {\r\n        return null\r\n    }\r\n}\r\n\r\nexport class ParticipantWidget extends React.Component<any, any> {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.updateDays = this.updateDays.bind(this);\r\n    }\r\n\r\n    updateDays(mask) {\r\n        return e => {\r\n            const value = this.props.days ^ mask;\r\n            this.props.updateDirect(value);\r\n            e.preventDefault()\r\n        }\r\n    }\r\n\r\n    render() {\r\n\r\n        const startDate = Moment.utc(this.props.event.startDate).startOf('day');\r\n        const endDate = Moment.utc(this.props.event.endDate).startOf('day').add(1, 'days');\r\n        const dayButtons: any = [];\r\n        let mask = 0;\r\n\r\n        for (let m = startDate; m.isBefore(endDate); m.add(1, 'days')) {\r\n            const active = (this.props.days & Math.pow(2, mask)) !== 0;\r\n            dayButtons.push(<Button active={active}\r\n                                    outline={!active}\r\n                                    size=\"sm\"\r\n                                    key={mask}\r\n                                    color=\"success\"\r\n                                    onClick={this.updateDays(Math.pow(2, mask))}>{m.format(\"ddd Do\")}</Button>);\r\n            //B, value: Math.pow(2, mask)});\r\n            mask++;\r\n        }\r\n\r\n        return (<React.Fragment>\r\n            <Label sm={2}>\r\n                Attendance:<br/>\r\n            </Label>\r\n            <Col sm={9}>\r\n                <small>Deselect days if you are not staying for the whole event</small>\r\n                <ButtonGroup>\r\n                    {dayButtons}\r\n                </ButtonGroup>\r\n            </Col>\r\n        </React.Fragment>);\r\n    }\r\n}\r\n","//holds components for sorting out the attendance options\r\n\r\nimport * as whole   from './whole'\r\nimport * as presets from './presets'\r\nimport * as free    from './free'\r\n\r\nexport default {whole, presets, free}","import * as React from 'react'\r\nimport cloneDeep from 'lodash/cloneDeep'\r\n\r\nexport const name = \"presets\";\r\nexport const selection = \"Predefined options\";\r\n\r\nimport {\r\n    Button,\r\n    Row,\r\n    Col,\r\n    FormGroup,\r\n    Label,\r\n    Input,\r\n    Card,\r\n    CardBody\r\n} from 'reactstrap';\r\n\r\nimport  { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport { faTimes } from '@fortawesome/free-solid-svg-icons'\r\n\r\nexport class Config extends React.Component<any, any> {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.update = this.update.bind(this);\r\n        this.add = this.add.bind(this);\r\n        this.delete = this.delete.bind(this);\r\n        this.updateMask = this.updateMask.bind(this);\r\n    }\r\n\r\n    update(id) {\r\n        return key => e => {\r\n            const out = cloneDeep(this.props.data);\r\n            out.find(o => o.id === id)[key] = e.target.value;\r\n            this.props.update(out);\r\n            e.preventDefault()\r\n        }\r\n    }\r\n\r\n    updateMask(id) {\r\n        return e => {\r\n            const out = cloneDeep(this.props.data);\r\n            out.find(o => o.id === id).mask = parseInt(e.target.value);\r\n            this.props.update(out);\r\n            e.preventDefault()\r\n        }\r\n    }\r\n\r\n    add(e) {\r\n        const out = cloneDeep(this.props.data) || [];\r\n        out.push({id: Math.round((Math.random() * 100000))});//TODO: Holy f*** fix this\r\n        this.props.update(out);\r\n        e.preventDefault()\r\n    }\r\n\r\n    delete(id) {\r\n        return e => {\r\n            const out = cloneDeep(this.props.data) || [];\r\n            this.props.update(out.filter(o => o.id !== id));\r\n            e.preventDefault()\r\n        }\r\n    }\r\n\r\n    render() {\r\n        //<AttendanceConfig data={this.state.event.partialDatesData} update={this.updateData('partialDatesData')} />\r\n        const options = this.props.data || [];\r\n\r\n        const optionRows = options.map(o => <RowC key={o.id} name={o.name} mask={o.mask} update={this.update(o.id)}\r\n                                                  delete={this.delete(o.id)} updateMask={this.updateMask(o.id)}/>);\r\n\r\n        return (\r\n            <React.Fragment>\r\n                <Row>\r\n                    <Col sm={7}>\r\n                        <h4>Description</h4>\r\n                    </Col>\r\n                    <Col sm={5}>\r\n                        <h4>Day Mask</h4>\r\n                    </Col>\r\n                </Row>\r\n                {optionRows}\r\n                <Row>\r\n                    <Col>\r\n                        <Button type=\"submit\" color=\"success\" onClick={this.add}>Add</Button>\r\n                    </Col>\r\n                </Row>\r\n            </React.Fragment>\r\n        );\r\n    }\r\n}\r\n\r\nexport class ParticipantWidget extends React.Component<any, any> {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n    }\r\n\r\n    render() {\r\n\r\n        const options = this.props.event.partialDatesData.map(o => <option key={o.id} value={o.mask}>{o.name}</option>);\r\n\r\n        return (<React.Fragment>\r\n            <Label sm={2}>\r\n                Attendance:\r\n            </Label>\r\n            <Col sm={3}>\r\n                <Input type=\"select\" value={this.props.days} onChange={this.props.update}>\r\n                    {options}\r\n                </Input>\r\n            </Col>\r\n        </React.Fragment>);\r\n    }\r\n}\r\n\r\nconst RowC = props =>\r\n    <FormGroup row>\r\n        <Col sm={7}>\r\n            <Input type=\"text\" value={props.name || ''}\r\n                   onChange={props.update('name')}\r\n                   placeholder=\"Option name\"/>\r\n        </Col>\r\n        <Col sm={4}>\r\n            <Input type=\"number\" value={props.mask || 0}\r\n                   onChange={props.updateMask}\r\n                   placeholder=\"0\"/>\r\n        </Col>\r\n        <Col sm={1}>\r\n            <Button type=\"submit\" onClick={props.delete} color=\"warning\">\r\n                <span style={{color: 'white'}}><FontAwesomeIcon icon={faTimes}/></span>\r\n            </Button>\r\n        </Col>\r\n    </FormGroup>;","import * as React from 'react'\r\n\r\nexport const name = \"whole\";\r\nexport const selection = \"Whole event only\";\r\n\r\nimport {\r\n    Col\r\n} from 'reactstrap';\r\n\r\nexport class Config extends React.Component<any, any> {\r\n\r\n\trender() {\r\n\t\treturn null\r\n\t}\r\n\r\n}\r\n\r\nexport class ParticipantWidget extends React.Component<any, any> {\r\n\r\n    render() {\r\n        return <Col sm={11}/>;\r\n    }\r\n}","//import Immutable from 'immutable'\r\nimport fetch from '../fetch'\r\nimport {push} from 'react-router-redux'\r\nimport {updateUser} from '../user/actions'\r\n\r\nimport { storageFactory } from \"storage-factory\";//@ts-ignore\r\nconst local = storageFactory(() => localStorage);\r\n\r\n//import m from '../messages'\r\n\r\n\r\n/*\r\nexport const saveEvent = event => {\r\n\treturn (dispatch) => {\r\n\t\tfetch('/api/event/edit',\"POST\",event)\r\n\t\t.then(j => {\r\n\t\t\tdispatch(updateEvent(j));\r\n\t\t\tdispatch(m.actions.setSuccess(\"Event Updated\"));\r\n\t\t\tbrowserHistory.push('/');\r\n\t\t}).catch(r => console.log(r));\r\n\t}\r\n\r\n}\r\n*/\r\n\r\nexport const UPDATE_QUICK_LIST = 'BOOKING_UPDATE_QUICK_LIST';\r\n\r\nexport const updateQuickList = participants => {\r\n    return {\r\n        type: UPDATE_QUICK_LIST,\r\n        participants: participants\r\n    }\r\n};\r\n\r\n//export const CREATE_BOOKING = 'BOOKING_CREATE_BOOKING';\r\n\r\nexport const createBooking = booking => {\r\n    return dispatch => {\r\n        fetch('/api/booking/' + booking.eventId + '/create', \"POST\", booking)\r\n            .then(j => {\r\n                dispatch(updateBookings(j));\r\n                dispatch(updateCurrentBooking(null));\r\n                dispatch(push('/event/' + booking.eventId + '/book/thanks'));\r\n            })\r\n    }\r\n};\r\n\r\nexport const saveBooking = (booking, own) => {\r\n    return dispatch => {\r\n        fetch('/api/booking/edit', \"POST\", booking)\r\n            .then(j => {\r\n                dispatch(updateBookings(j));\r\n                dispatch(updateCurrentBooking(null));\r\n                dispatch(own ? push('/event/' + booking.eventId + '/book/thanks') : push('/event/' + booking.eventId + '/manage/bookings'));\r\n            });\r\n    }\r\n};\r\n\r\nexport const cancelBooking = id => {\r\n    return dispatch => {\r\n        fetch('/api/booking/delete', \"POST\", {id: id})\r\n            .then(j => {\r\n                dispatch(push('/cancel'));\r\n                dispatch(deleteBooking(id));\r\n            });\r\n    }\r\n};\r\n//export const UPDATE_BOOKING = 'BOOKING_UPDATE_BOOKING';\r\n\r\nexport const getBooking = (id) => {\r\n    return dispatch => {\r\n        fetch('/api/booking/' + id, \"GET\")\r\n            .then(j => {\r\n                dispatch(updateBookings(j));\r\n            }).catch(fetch.fail);\r\n    }\r\n};\r\n\r\n\r\nexport const getUserBookings = () => {\r\n    return dispatch => {\r\n        fetch('/api/booking/user', \"GET\")\r\n            .then(j => {\r\n                dispatch(updateBookings(j));\r\n            })\r\n    }\r\n\r\n};\r\n\r\nexport const getEventBookings = (eventId) => {\r\n    return dispatch => {\r\n        fetch('/api/booking/event/' + eventId, \"GET\")\r\n            .then(j => {\r\n                dispatch(updateBookings(j));\r\n            })\r\n    }\r\n\r\n};\r\n\r\nexport const UPDATE_BOOKINGS = 'BOOKING_UPDATE_BOOKINGS';\r\nexport const updateBookings = data => {\r\n    return {\r\n        type: UPDATE_BOOKINGS,\r\n        bookings: data.bookings\r\n    }\r\n};\r\n\r\nexport const DELETE_BOOKING = \"BOOKING_DELETE_BOOKING\";\r\nconst deleteBooking = id => {\r\n    return {\r\n        type: DELETE_BOOKING,\r\n        id: id\r\n    }\r\n};\r\n\r\nexport const redirectFromThanks = eventId => dispatch => {\r\n    dispatch(push('/event/' + eventId + '/book'));\r\n};\r\n\r\nexport const UPDATE_CURRENT_BOOKING = \"BOOKING_UPDATE_CURRENT_BOOKING\"\r\n\r\nexport const updateCurrentBooking = booking => {\r\n    if (booking && !booking.id) local.setItem('currentBooking', JSON.stringify(booking));\r\n    return {\r\n        type: UPDATE_CURRENT_BOOKING,\r\n        booking: booking\r\n    }\r\n};\r\n\r\nexport const applyToBook = application => {\r\n    return dispatch => {\r\n        fetch('/api/event/' + application.eventId + '/apply', \"POST\", application)\r\n            .then(j => {\r\n                dispatch(updateUser(j));\r\n                dispatch(push('/event/' + application.eventId + '/apply/thanks'));\r\n            })\r\n    }\r\n};","import * as React from 'react'\r\nimport {connect} from 'react-redux'\r\n\r\nimport {applyEventCheck} from '../permission'\r\nimport {applyToBook} from '../actions'\r\nimport update from 'immutability-helper';\r\n\r\nimport {\r\n    Button,\r\n    Row,\r\n    Col,\r\n    FormGroup,\r\n    Label,\r\n    Input,\r\n    Form\r\n} from 'reactstrap';\r\n\r\n\r\n//Apply to be able to book an event\r\n\r\nclass ApplyPage extends React.Component<any, any> {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {message: ''};\r\n\r\n        this.apply = this.apply.bind(this);\r\n        this.updateMessage = this.updateMessage.bind(this)\r\n    }\r\n\r\n    apply(e) {\r\n        this.props.applyToBook({message: this.state.message, eventId: this.props.Event.get('id')});\r\n        e.preventDefault();\r\n    }\r\n\r\n    updateMessage(e) {\r\n        this.setState(update(this.state, {message: {$set: e.target.value}}));\r\n        e.preventDefault();\r\n    }\r\n\r\n    render() {\r\n\r\n        const event = this.props.Event.toJS();\r\n        const user = this.props.User.toJS();\r\n\r\n        return (<React.Fragment>\r\n            <Row>\r\n                <Col>\r\n                    <h3>Apply to book for <b>{event.name}</b></h3>\r\n                    <Form>\r\n                        <FormGroup>\r\n                            <Label>Hi {user.userName}, Please fill in your name, which IFM-SEI organisation or\r\n                                Woodcraft Folk district are you from and approximately how many people are you planning to bring below: </Label>\r\n                            <Input rows={10} type=\"textarea\" value={this.state.message || `Name:\r\n\r\nWhich Woodcraft District/IFM organisation are you booking:\r\n\r\nApproximately how many people are you planning to bring:`}\r\n                                   onChange={this.updateMessage}/>\r\n                        </FormGroup>\r\n                        <Button color=\"primary\"\r\n                                onClick={this.apply}\r\n                                disabled={this.state.message === ''}\r\n                        >Submit</Button>\r\n                    </Form>\r\n                </Col>\r\n            </Row>\r\n        </React.Fragment>);\r\n    }\r\n}\r\n\r\n\r\nconst mapStateToProps = (state, props) => {\r\n    const Event = state.getIn([\"Events\", \"events\", parseInt(props.match.params.eventId)]);\r\n    const User = state.getIn([\"User\", \"user\"]);\r\n    return {Event, User};\r\n};\r\n\r\nconst mapDispatchToProps = {\r\n    applyToBook: applyToBook,\r\n};\r\n\r\nconst VisibleApplyPage = connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(applyEventCheck(ApplyPage));\r\n\r\nexport default applyEventCheck(VisibleApplyPage);\r\n\r\n","import * as React from 'react'\r\nimport {connect} from 'react-redux'\r\nimport {Link} from 'react-router-dom'\r\nimport {browserHistory} from 'react-router'\r\nimport {\r\n    Button,\r\n    Row,\r\n    Col,\r\n    FormGroup,\r\n    Label,\r\n    Input,\r\n    Form\r\n} from 'reactstrap';\r\n\r\n\r\n//confirmation page for bookings\r\n\r\n\r\nclass ApplyThanksPage extends React.Component<any, any> {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n    }\r\n\r\n\r\n    render() {\r\n\r\n        const event = this.props.Event.toJS();\r\n        const user = this.props.User.toJS();\r\n\r\n        return (<Row>\r\n            <Col>\r\n                <h3>Thanks for your interest in {event.name}</h3>\r\n                <p>You will be e-mailed on {user.email} when one of our team has approved you to book</p>\r\n            </Col>\r\n        </Row>);\r\n\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state, props) => {\r\n    let User = state.getIn([\"User\", \"user\"]);\r\n    let Event = state.getIn([\"Events\", \"events\", parseInt(props.match.params.eventId)]);\r\n    return {User, Event}\r\n};\r\n\r\n//const getEvent = event.actions.getEvent\r\nconst mapDispatchToProps = {};\r\n\r\nconst VisibleThanksPage = connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(ApplyThanksPage);\r\n\r\nexport default VisibleThanksPage;","import * as React from 'react';\r\n\r\nimport {\r\n    Row,\r\n    Col,\r\n    Table\r\n} from 'reactstrap';\r\n\r\n\r\n//confirmation page for booking cancallation\r\n\r\n\r\nclass CancelPage extends React.Component<any, any> {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t}\r\n\r\n\trender() {\r\n        return (\r\n            <Row>\r\n                <Col>\r\n                    <h3>Your booking has been cancelled</h3>\r\n                    <p>You may book again if you reconsider</p>\r\n                </Col>\r\n            </Row>\r\n        );\r\n\t}\r\n}\r\n\r\nexport default CancelPage;","import * as React from 'react'\r\nimport {connect} from 'react-redux'\r\n\r\nimport BookingForm from './form/bookingForm'\r\nimport ParticipantQuickList from './participantQuickList'\r\nimport {saveBooking, cancelBooking, updateCurrentBooking} from '../actions'\r\nimport {editBookingCheck} from '../permission'\r\nimport {bookIntoOrganisation} from \"../../../shared/permissions\";\r\n\r\nimport {\r\n    Row,\r\n    Col,\r\n} from 'reactstrap';\r\n\r\nclass EditPage extends React.Component<any, any> {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n    }\r\n\r\n    render() {\r\n\r\n        const event = this.props.Event.toJS();\r\n        const booking = this.props.Booking.toJS();\r\n        const user = this.props.User.toJS();\r\n\r\n        booking.externalExtra = booking.externalExtra || {};\r\n\r\n        const organisations = event.organisations.filter(o => bookIntoOrganisation(user, event, booking, o));\r\n\r\n\r\n        return (<Row>\r\n            <Col xs={12} sm={12} md={10}>\r\n                <h3>Booking for {event.name}</h3>\r\n                <BookingForm user={user}\r\n                             booking={booking}\r\n                             event={event}\r\n                             organisations={organisations}\r\n                             submit={this.props.saveBooking}\r\n                             cancel={this.props.cancelBooking}\r\n                             updateCurrentBooking={this.props.updateCurrentBooking}\r\n                             env={this.props.Env}/>\r\n            </Col>\r\n            <ParticipantQuickList booking={booking} event={event}/>\r\n        </Row>);\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state, props) => {\r\n    const User = state.getIn([\"User\", \"user\"]);\r\n    let Booking = state.getIn([\"Bookings\", \"bookings\", parseInt(props.match.params.bookingId)]);\r\n    const Event = state.getIn([\"Events\", \"events\", Booking.get(\"eventId\")]);\r\n    const CurrentBooking = state.getIn([\"Bookings\", \"currentBooking\"]);\r\n\r\n    Booking = (CurrentBooking ? CurrentBooking.get(\"id\") : null) === Booking.get(\"id\") ? CurrentBooking : Booking;\r\n\r\n    const Env = state.get(\"App\");\r\n\r\n    return {User, Booking, Event, Env}\r\n};\r\n\r\nconst mapDispatchToProps = {saveBooking, cancelBooking, updateCurrentBooking};\r\n\r\nconst VisibleEditPage = connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(EditPage);\r\n\r\nexport default editBookingCheck(VisibleEditPage);","import * as React from 'react'\r\n\r\nimport {\r\n    Button,\r\n    Row,\r\n    Col,\r\n    FormGroup,\r\n    Label,\r\n    Input,\r\n    Card,\r\n    CardBody,\r\n    CardTitle,\r\n    CardImg,\r\n    CardImgOverlay\r\n}             from 'reactstrap';\r\nimport update from \"immutability-helper/index\";\r\n\r\nexport default class AdditionalForm extends React.Component<any, any> {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.update = this.update.bind(this);\r\n    }\r\n\r\n    updateChecked(e) {\r\n        this.props.update('foodOptOut', e.target.checked);\r\n    }\r\n\r\n    update(i) {\r\n        return item => e => {\r\n\r\n            const existing = this.props.booking.externalExtra.additionalContacts || [{name:'', email:'', phone:''}];\r\n\r\n            if(i !== (existing.length - 1))existing.pop();\r\n\r\n            this.props.update('additionalContacts', update(existing,\r\n                {[i]:\r\n                        {[item]:\r\n                            {$set: e.target.value}\r\n                        }\r\n                }));\r\n            e.preventDefault()\r\n        }\r\n    }\r\n\r\n    render() {\r\n\r\n        const contacts = this.props.booking.externalExtra.additionalContacts || [{name:'', email:'', phone:''}];\r\n\r\n        if(contacts[contacts.length - 1].name !== '' || contacts[contacts.length - 1].email !== '' || contacts[contacts.length - 1].phone !== '')contacts.push({name:'', email:'', phone:''});\r\n\r\n        const rows = contacts.map((r, i) => <ContactRow name={r.name} email={r.email} phone={r.phone} key={i} update={this.update(i)} />);\r\n\r\n        return (<React.Fragment>\r\n            <Row>\r\n                <Col>\r\n                    <p>Here you can supply contact details for additional people we can contact about your booking, this optional but may be useful.</p>\r\n                </Col>\r\n            </Row>\r\n            {rows}\r\n        </React.Fragment>);\r\n\r\n    }\r\n}\r\n\r\nconst ContactRow  = props => {\r\n  return <FormGroup row id={props.i}>\r\n        <Col sm={4}>\r\n            <Input\r\n                type=\"text\"\r\n                placeholder=\"Name\"\r\n                value={props.name || ''}\r\n                onChange={props.update(\"name\")}\r\n            />\r\n        </Col>\r\n        <Col sm={4}>\r\n            <Input\r\n                type=\"text\"\r\n                placeholder=\"e-mail\"\r\n                value={props.email || ''}\r\n                onChange={props.update(\"email\")}\r\n            />\r\n        </Col>\r\n        <Col sm={4}>\r\n            <Input\r\n                type=\"text\"\r\n                placeholder=\"Phone\"\r\n                value={props.phone || ''}\r\n                onChange={props.update(\"phone\")}\r\n            />\r\n        </Col>\r\n    </FormGroup>\r\n};","import * as React              from 'react'\r\nimport BookingUserDetails from './bookingUserDetails'\r\nimport ParticipantForm    from './participantsForm'\r\nimport PermissionForm     from './permissionForm'\r\nimport FeeForm            from './feeForm'\r\nimport PaymentForm        from './paymentForm'\r\nimport FoodForm           from './foodForm'\r\nimport AdditionalForm     from './additionalContacts'\r\nimport cloneDeep          from 'lodash/cloneDeep'\r\nimport update             from 'immutability-helper';\r\nimport Moment             from 'moment'\r\nimport uuid               from 'uuid/v4';\r\n\r\nimport  { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport { faLock, faLockOpen } from '@fortawesome/free-solid-svg-icons'\r\n\r\nimport {\r\n    Button,\r\n    Row,\r\n    Col,\r\n    Card,\r\n    CardTitle,\r\n    CardBody,\r\n    Form,\r\n    FormGroup,\r\n} from 'reactstrap'\r\n\r\n//this is a massive component that handles the state of the booking form.\r\n\r\nexport default class BookingForm extends React.Component<any, any> {\r\n    private readonly guest: boolean;\r\n    private foodCounter: any;\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.guest = props.user && props.user.id === 1;\r\n\r\n        this.state = {\r\n            permission:  false,\r\n            new:         !this.props.booking.id,\r\n            deleteLock:  true,\r\n            validation:  this.props.booking.id ? 4 : 0,\r\n            deleteInProgress: false\r\n        };\r\n\r\n        this.updateItem = this.updateItem.bind(this);\r\n        this.updateParticipantDetails = this.updateParticipantDetails.bind(this);\r\n        this.updateExternalExtra = this.updateExternalExtra.bind(this);\r\n        this.addParticipant = this.addParticipant.bind(this);\r\n        this.deleteParticipant = this.deleteParticipant.bind(this);\r\n        this.clickDeleteLock = this.clickDeleteLock.bind(this);\r\n        this.clickDelete = this.clickDelete.bind(this);\r\n        this.submit = this.submit.bind(this);\r\n        this.updateValidation = this.updateValidation.bind(this);\r\n    }\r\n\r\n    componentWillMount() {\r\n    }\r\n\r\n    componentDidMount() {\r\n        window.scrollTo(0, 0);\r\n    }\r\n\r\n    updateItem(item, value) {\r\n        //magic\r\n        this.props.updateCurrentBooking(update(this.props.booking, {[item]: {$set: value}}))\r\n    }\r\n\r\n    updateParticipantDetails(id, item, value) {\r\n        let participants = cloneDeep(this.props.booking.participants);\r\n\r\n        const participant = participants.find(p => p.id === id);\r\n        delete participant.focus;\r\n        participant[item] = value;\r\n        this.props.updateCurrentBooking(update(this.props.booking, {participants: {$set: participants}}));\r\n    }\r\n\r\n    updateExternalExtra(item, value) {\r\n        this.props.updateCurrentBooking(update(this.props.booking, {externalExtra: {[item]: {$set: value}}}));\r\n    }\r\n\r\n    addParticipant() {\r\n\r\n        this.props.updateCurrentBooking(update(this.props.booking, {participants: {$push: [blankParticipant(this.props.event)]}}));\r\n\r\n    }\r\n\r\n    deleteParticipant(id) {\r\n        let participants = this.props.booking.participants;\r\n        participants = participants.filter(p => p.id !== id);\r\n        this.props.updateCurrentBooking(update(this.props.booking, {participants: {$set: participants}}));\r\n    }\r\n\r\n    submit(e) {\r\n        const state = cloneDeep(this.props.booking);\r\n        state.participants = state.participants.map(p => {\r\n            if (typeof p.id === \"string\") delete p.id;\r\n            return p;\r\n        }); //remove temp ids from new participants\r\n\r\n        this.props.submit(state, this.state.new ? true : (this.props.booking.userId === this.props.user.id));\r\n        e.preventDefault();\r\n    }\r\n\r\n    clickDeleteLock(e) {\r\n        this.setState({deleteLock: !this.state.deleteLock});\r\n        e.preventDefault();\r\n    }\r\n\r\n    clickDelete(e) {\r\n        //@ts-ignore\r\n        if(confirm('Are you sure you wish to delete this booking?')) {\r\n            this.props.cancel(this.props.booking.id);\r\n            this.setState({deleteInProgress: true});\r\n            e.preventDefault();\r\n        }\r\n    }\r\n\r\n    //for a new booking we only trigger inline validations when the user has interacted with a subsequent section of the form.\r\n    updateValidation(level) {\r\n        return () => {\r\n            if (level > this.state.validation) {\r\n                this.setState(update(this.state, {validation: {$set: level}}));\r\n                console.log(\"Validating level \" + level);\r\n            }\r\n        };\r\n    }\r\n\r\n    //validate the booking state and return an array of errors for display, validation is also carried out in indvidual bits of the form,, hopefully they agree.\r\n    validateBooking() {\r\n        const results: [string?] = [];\r\n\r\n        if (empty(this.props.booking.userName)) results.push(\"Please fill in your name\");\r\n        if (empty(this.props.booking.userEmail)) results.push(\"Please fill in your e-mail address\");\r\n        if (empty(this.props.booking.userContact)) results.push(\"Please fill in your contact phone number\");\r\n        if (this.props.event.bigCampMode && empty(this.props.booking.district)) results.push(\"Please fill in your group/district\");\r\n\r\n        if (this.props.booking.participants) this.props.booking.participants.forEach((p, k) => {\r\n            p.externalExtra = p.externalExtra || {};\r\n            if (empty(p.name)) {\r\n                results.push(\"Participant #\" + (k + 1) + \" does not have a name\");\r\n                return;\r\n            }\r\n            if (empty(p.age)) results.push(\"Please fill in the age for \" + p.name);\r\n            if (empty(p.diet)) results.push(\"Please select a diet for \" + p.name);\r\n            if (Moment(this.props.event.startDate).diff(Moment(p.age), 'years') > 15 && this.props.event.customQuestions.adultEmail && empty(p.externalExtra.adultEmail)) results.push(\"Please fill an e-mail address for \" + p.name);\r\n            if(this.props.event.customQuestions.photoConsent && empty(p.externalExtra.photoConsent)) results.push(\"Please answer the photo consent for \" + p.name)\r\n        });\r\n\r\n        const lonePerson = this.props.booking.participants.filter(p => {\r\n                return Moment(this.props.event.startDate).diff(Moment(p.age), 'years') > 15\r\n            }\r\n        ).length < 2;\r\n\r\n        if (this.props.event.feeModel !== \"free\" && (!this.props.booking.paymentType || this.props.booking.paymentType === \"\")) results.push(\"Please choose a payment option\");\r\n\r\n        if ((!this.props.event.bigCampMode || lonePerson) && empty(this.props.booking.emergencyName)) results.push(\"Please provide an emergency contact name\");\r\n        if ((!this.props.event.bigCampMode || lonePerson) && empty(this.props.booking.emergencyPhone)) results.push(\"Please provide an emergency contact phone number\");\r\n\r\n        if (!this.props.booking.permission) results.push(\"Please tick the permission and data protection statement checkbox\");\r\n\r\n        if(needToAgreeDateChange(this.props.event, this.props.booking, this.props.user))results.push(\"Please accept the date change notice\")\r\n        return results;\r\n    }\r\n\r\n    render() {\r\n\r\n        const validationMessages = this.validateBooking();\r\n\r\n        const deleteButtons = this.state.new ? null : [<Button key=\"deletelock\"\r\n                                                               className=\"float-right ml-1\"\r\n                                                               disabled={this.state.deleteLock || this.state.deleteInProgress}\r\n                                                               onClick={this.clickDelete}\r\n                                                               color=\"danger\">Cancel\r\n            Booking</Button>,\r\n            <Button key=\"delete\"\r\n                    color=\"danger\"\r\n                    onClick={this.clickDeleteLock}\r\n                    className=\"float-right\">\r\n                <span style={{color: 'white'}}><FontAwesomeIcon\r\n                    icon={this.state.deleteLock ? faLockOpen : faLock}/></span></Button>];\r\n\r\n        const userDetails = {\r\n            userName: this.props.booking.userName,\r\n            userEmail: this.props.booking.userEmail,\r\n            userContact: this.props.booking.userContact,\r\n            district: this.props.booking.district,\r\n            organisationId: this.props.booking.organisationId,\r\n            bookingId: this.props.booking.id\r\n        };\r\n\r\n        const permissionDetails = {\r\n            emergencyName: this.props.booking.emergencyName,\r\n            emergencyPhone: this.props.booking.emergencyPhone,\r\n            note: this.props.booking.note,\r\n            permission: this.props.booking.permission,\r\n            campWith: this.props.booking.campWith\r\n        };\r\n\r\n        return (<Form autoComplete=\"off\">\r\n            <Row>\r\n                <Col>\r\n                    <h3 onClick={this.foodCounter}>Your Details</h3>\r\n                    <p>We will use these if we need to get in touch</p>\r\n                </Col>\r\n            </Row>\r\n            <BookingUserDetails\r\n                user={this.props.user}\r\n                event={this.props.event}\r\n                organisations={this.props.organisations}\r\n                update={this.updateItem}\r\n                guest={this.guest}\r\n                validating={this.state.validation > 0} {...userDetails}/>\r\n            {this.props.event.bigCampMode ? <AdditionalForm\r\n                booking={this.props.booking}\r\n                update={this.updateExternalExtra}/> : null}\r\n            {this.props.event.customQuestions.foodOptOut ? <FoodForm\r\n                booking={this.props.booking}\r\n                update={this.updateExternalExtra}/> : null}\r\n            <Row>\r\n                <Col>\r\n                    <h3>Participants</h3>\r\n                    <p>Please fill out for every person attending (including yourself if applicable)</p>\r\n                </Col>\r\n            </Row>\r\n            <ParticipantForm participants={this.props.booking.participants}\r\n                             event={this.props.event}\r\n                             update={this.updateParticipantDetails}\r\n                             add={this.addParticipant}\r\n                             delete={this.deleteParticipant}\r\n                             validating={this.state.validation > 1}\r\n                             updateValidation={this.updateValidation(1)}\r\n                             env={this.props.env}\r\n            />\r\n            <Row className=\"mb-3\">\r\n                <Col>\r\n                    <h3>Money</h3>\r\n                </Col>\r\n            </Row>\r\n            <FeeForm event={this.props.event} participants={this.props.booking.participants}\r\n                     booking={this.props.booking}/>\r\n            {this.props.event.feeModel === \"free\" ? null :\r\n                <PaymentForm update={this.updateItem}\r\n                             event={this.props.event}\r\n                             booking={this.props.booking}\r\n                             chosen={this.props.booking.paymentType}\r\n                             validating={this.state.validation > 2}\r\n                             updateValidation={this.updateValidation(2)}/>}\r\n            <Row className=\"mb-3\">\r\n                <Col>\r\n                    <h3>Responsibility</h3>\r\n                </Col>\r\n            </Row>\r\n            <PermissionForm event={this.props.event}\r\n                            booking={this.props.booking}\r\n                            user={this.props.user}\r\n                            update={this.updateItem}\r\n                            validating={this.state.validation > 3}\r\n                            {...permissionDetails}\r\n                            updateValidation={this.updateValidation(4)}/>\r\n            <Row>\r\n                <Col>\r\n                    <h3>Submit</h3>\r\n                    <p>When you have finished click here to submit your booking. You can always come back and edit it\r\n                        before the deadline.</p>\r\n                </Col>\r\n            </Row>\r\n            <Row>\r\n                <Col>\r\n                    {needToAgreeDateChange(this.props.event, this.props.booking, this.props.user) ? <DateChangePanel\r\n                        updateExternalExtra={this.updateExternalExtra}/> : null}\r\n                    <br />\r\n                    <ValidationList errors={validationMessages}/>\r\n                </Col>\r\n            </Row>\r\n            <FormGroup row>\r\n                <Col>\r\n                    <Button disabled={validationMessages.length !== 0}\r\n                            color=\"success\"\r\n                            onClick={this.submit}>Submit Booking\r\n                    </Button>\r\n                    {this.state.new ? null : deleteButtons}\r\n                </Col>\r\n            </FormGroup>\r\n        </Form>)\r\n    }\r\n}\r\n\r\nconst ValidationList = (props) => {\r\n    if (props.errors.length === 0) return null;\r\n\r\n    const items = props.errors.map(e => <li key={e}>{e}</li>);\r\n\r\n    return (<Card className=\"mb-3\" body outline color=\"warning\">\r\n        <CardTitle>Still to do:</CardTitle>\r\n        <ul>{items}</ul>\r\n    </Card>);\r\n\r\n};\r\n\r\nfunction empty(value) {\r\n    return !value || value === \"\"\r\n}\r\n\r\n//bad bad bad should be based on model.\r\nlet tempkey = 1000;\r\n\r\nfunction blankParticipant(event) {\r\n    return {\r\n        id:            uuid(),\r\n        name:          '',\r\n        age:           '',\r\n        diet:          '',\r\n        dietExtra:     '',\r\n        medical:       '',\r\n        days:          event.partialDates !== 'presets' ? 2 ** (Moment(event.endDate).diff(Moment(event.startDate), 'days') + 1) - 1 : event.partialDatesData[0].mask,\r\n        externalExtra: {},\r\n        internalExtra: {},\r\n        focus:         true\r\n    }\r\n}\r\n\r\nconst needToAgreeDateChange = (event, booking, user) =>{\r\n    if(!event.customQuestions.invalidDate) return false\r\n    if(user.id !== booking.userId) return false\r\n    if(Moment().isBefore(event.customQuestions.invalidDate)) return false\r\n    return !booking.externalExtra.agreedDateChange\r\n}\r\n\r\nconst DateChangePanel = (props) => {\r\n\r\n    return <Card body outline color=\"danger\" className=\"mb-3\">\r\n            <CardTitle>\r\n                Common Ground Date Change Scary Warning Box\r\n            </CardTitle>\r\n            <CardBody>\r\n\r\n                <p>I agree this booking is now for Common Ground in 2022 and totally promise to get it up to date at some point.</p>\r\n            <Button color=\"primary\" onClick={() =>{\r\n                props.updateExternalExtra('agreedDateChange', true);\r\n            }}>Accept</Button>\r\n            </CardBody>\r\n    </Card>\r\n\r\n}\r\n\r\n\r\n\r\n","import * as React from 'react'\r\n\r\nimport {\r\n    Col,\r\n    FormGroup,\r\n    Label,\r\n    Input\r\n} from 'reactstrap';\r\n\r\nexport default class BookingUserDetails extends React.Component<any, any> {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.update = this.update.bind(this);\r\n        this.valid = this.valid.bind(this);\r\n        this.updateOrg = this.updateOrg.bind(this);\r\n    }\r\n\r\n    update(item) {\r\n        return (e) => {\r\n            this.props.update(item, e.target.value);\r\n            e.preventDefault();\r\n        }\r\n    }\r\n\r\n    updateOrg(e) {\r\n        this.props.update('organisationId', parseInt(e.target.value));\r\n        e.preventDefault();\r\n    }\r\n\r\n    valid(item) {\r\n        if (this.props.validating && (!item || item === \"\")) return false;\r\n        return null;\r\n    }\r\n\r\n    render() {\r\n\r\n        const district = this.props.event.bigCampMode ?\r\n            <FormGroup row>\r\n                <Label sm={2}>Group/District:</Label>\r\n                <Col sm={10}>\r\n                    <Input type=\"text\"\r\n                           placeholder=\"Group/District\"\r\n                           value={this.props.district || ''}\r\n                           onChange={this.update(\"district\")}\r\n                           valid={this.valid(this.props.district)}\r\n                    />\r\n                </Col>\r\n            </FormGroup> : null;\r\n\r\n        let organisations: any = null;\r\n\r\n        if (this.props.event.organisationsEnabled) {\r\n            if (this.props.organisations.length === 1) {\r\n                organisations =\r\n                    <FormGroup row>\r\n                        <Label sm={2}>Organisation:</Label>\r\n                        <Col sm={10}>\r\n                            <Input type=\"text\"\r\n                                   value={this.props.organisations[0].name}\r\n                                   disabled/>\r\n                        </Col>\r\n                    </FormGroup>\r\n            } else {\r\n                const options = this.props.organisations.map(o => <option key={o.id} value={o.id}>{o.name}</option>)\r\n                organisations = <FormGroup row>\r\n                    <Label sm={2}>Organisation:</Label>\r\n                    <Col sm={10}>\r\n                        <Input type=\"select\" value={this.props.organisationId} onChange={this.updateOrg}>\r\n                            {options}\r\n                        </Input>\r\n                    </Col>\r\n                </FormGroup>\r\n            }\r\n        }\r\n\r\n        return (<React.Fragment>\r\n            <FormGroup row>\r\n                <Label sm={2}>Your Name:</Label>\r\n                <Col sm={10}>\r\n                    <Input\r\n                        type=\"text\"\r\n                        placeholder=\"Name\"\r\n                        value={this.props.userName || ''}\r\n                        onChange={this.update(\"userName\")}\r\n                        valid={this.valid(this.props.userName)}\r\n                    />\r\n                </Col>\r\n            </FormGroup>\r\n            <FormGroup row>\r\n                <Label sm={2}>Your e-mail:</Label>\r\n                <Col sm={10}>\r\n                    <Input type=\"text\"\r\n                           placeholder=\"e-mail\"\r\n                           value={this.props.userEmail || ''}\r\n                           onChange={this.update(\"userEmail\")}\r\n                           valid={this.valid(this.props.userEmail)}\r\n                    /></Col>\r\n            </FormGroup>\r\n            <FormGroup row>\r\n                <Label sm={2}>Phone Number:</Label>\r\n                <Col sm={10}>\r\n                    <Input type=\"text\"\r\n                           placeholder=\"Phone\"\r\n                           value={this.props.userContact || ''}\r\n                           onChange={this.update(\"userContact\")}\r\n                           valid={this.valid(this.props.userContact)}\r\n                    />\r\n                </Col>\r\n            </FormGroup>\r\n            {district}\r\n            {organisations}\r\n        </React.Fragment>)\r\n    }\r\n};","import * as React from 'react'\r\n\r\nimport feeFactory from '../../../../shared/fee/feeFactory'\r\n\r\n\r\nexport default class FeeForm extends React.Component<any, any> {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.updatePermission = this.updatePermission.bind(this);\r\n\t}\r\n\r\n\tupdatePermission(e) {\r\n\t\tthis.props.update();\r\n\t}\r\n\r\n\trender() {\r\n\r\n        const BookingFeeForm = feeFactory(this.props.event).BookingForm;\r\n\r\n        return (\r\n            <BookingFeeForm event={this.props.event} feeData={this.props.event.feeData}\r\n                            participants={this.props.participants} booking={this.props.booking}/>\r\n\t\t)\r\n\t}\r\n}","import * as React from 'react'\r\n\r\nimport {\r\n    Button,\r\n    Row,\r\n    Col,\r\n    FormGroup,\r\n    Label,\r\n    Input,\r\n    Card,\r\n    CardBody,\r\n    CardTitle,\r\n    CardImg,\r\n    CardImgOverlay\r\n}             from 'reactstrap';\r\nimport update from \"immutability-helper/index\";\r\n\r\nexport default class FoodForm extends React.Component<any, any> {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.updateChecked = this.updateChecked.bind(this);\r\n    }\r\n\r\n    updateChecked(e) {\r\n        this.props.update('foodOptOut', e.target.checked);\r\n    }\r\n\r\n    render() {\r\n        return (<React.Fragment>\r\n            <FormGroup row>\r\n                <Label sm={2}>Central Food Optout:</Label>\r\n                <Col sm={10}>\r\n                    <FormGroup check>\r\n                        <Label check>\r\n                            <Input type=\"checkbox\" checked={!!this.props.booking.externalExtra.foodOptOut}\r\n                                   onChange={this.updateChecked}/>{' '}\r\n                        </Label>\r\n                    </FormGroup>\r\n\r\n                </Col>\r\n            </FormGroup>\r\n            <Row>\r\n                <Col sm={2}>\r\n                </Col>\r\n                <Col>\r\n                    {!!this.props.booking.externalExtra.foodOptOut ? foodWarning() : null}\r\n                </Col>\r\n            </Row>\r\n        </React.Fragment>);\r\n\r\n    }\r\n}\r\n\r\nconst foodWarning = () => {\r\n\r\n    return <div>\r\n        <h4>Opting out of central food provision</h4><p>\r\n        Our aims as Central KP for Common Ground are to create a menu as directed by the young people in\r\n        the movement through consultation, source the food in an environmental and ethical way, and\r\n        distribute it across the campsite as efficiently as possible.</p><p>\r\n        We recognise that even when a period of consultation has taken place, not everyone will agree with\r\n        the end result.</p><p>\r\n        Finding a compromise and giving individuals freedom to choose is in keeping with the Woodcraft\r\n        way and above all we do not want food to become a barrier preventing any group from attending\r\n        Common Ground.</p><p>\r\n        Therefore, we propose to give groups the option to opt out of the central food provision, their ticket\r\n        price being reduced accordingly, under the following conditions:</p>\r\n        <ol>\r\n            <li>\r\n                There will be no access to central storage, cold or ambient, as this could cause confusion.\r\n            </li>\r\n            <li>\r\n                Food must be delivered at a specified time to a pre-decided point near the site entrance.\r\n            </li>\r\n            <li>\r\n                Someone must meet the delivery and transport it to the village without the use of a car, to\r\n                minimise the number of vehicles onsite.\r\n            </li>\r\n            <li>\r\n                Keep open communication with central KPs before and during the camp.\r\n            </li>\r\n            <li>\r\n                Districts opting out would need to ensure that their food budget came in under the central\r\n                one or subsidise any other groups (Woodcraft districts or International delegations) camping\r\n                with them, so as not to increase the cost for them.\r\n            </li>\r\n        </ol>\r\n        <p>\r\n            While this option is open to any group, we feel that groups should consider the following before\r\n            choosing to opt out.</p>\r\n        <ul>\r\n            <li> Environmental factors – a supermarket delivery is unlikely to result in locally sourced food\r\n                and will certainly result in more vehicles coming and going.\r\n            </li>\r\n            <li>Consultation – groups that camp with you may have wanted to be part of the central menu,\r\n                they may have helped with the process of putting it together, and may feel dictated to.\r\n            </li>\r\n        </ul>\r\n        <p>\r\n            Whether you intend to opt out or not we would encourage everyone to take part in the consultation\r\n            process to make Common Ground the best camp it can be for everyone who attends.</p>\r\n    </div>;\r\n};","import * as React from 'react'\r\nimport Moment from 'moment'\r\n\r\nimport attendance from '../../../attendance'\r\nimport {ParticipantWidget} from \"../../../attendance/presets\";\r\n\r\nimport update from 'immutability-helper';\r\n\r\nimport DateTimePicker from 'react-widgets/lib/DateTimePicker'\r\nimport momentLocalizer from 'react-widgets-moment'\r\nimport 'react-widgets/dist/css/react-widgets.css'\r\n\r\nimport ageFactory from '../../../age'\r\n\r\nmomentLocalizer();\r\n\r\n\r\nimport {\r\n    Button,\r\n    Row,\r\n    Col,\r\n    FormGroup,\r\n    Label,\r\n    Input,\r\n    Card,\r\n    CardBody,\r\n    CardTitle,\r\n    CardImg,\r\n    CardImgOverlay\r\n} from 'reactstrap';\r\n\r\nimport  { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport { faTimes } from '@fortawesome/free-solid-svg-icons'\r\n\r\nexport default class ParticipantsForm extends React.Component<any, any> {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.add = this.add.bind(this);\r\n        this.valid = this.valid.bind(this);\r\n    }\r\n\r\n    add(e) {\r\n        this.props.add();\r\n        e.preventDefault();\r\n    }\r\n\r\n    //I hope you like curry\r\n    update(k) {\r\n        return item => e => {\r\n            this.props.updateValidation();\r\n            const value = item === \"days\" ? parseInt(e.target.value) : e.target.value;\r\n            this.props.update(k, item, value);\r\n            e.preventDefault();\r\n        }\r\n    }\r\n\r\n    updateDirect(k) {\r\n        return item => value => {\r\n            this.props.update(k, item, value);\r\n        }\r\n    }\r\n\r\n    updateExtra(k) {\r\n        return item => e => {\r\n            this.props.updateValidation();\r\n            const value = e.target.value;\r\n            const participant = this.props.participants.find(p => p.id === k);\r\n            const newExtra = update(participant.externalExtra || {}, {[item]: {$set: value}});\r\n            this.props.update(k, 'externalExtra', newExtra);\r\n            e.preventDefault();\r\n        }\r\n    }\r\n\r\n    updateExtraNoPrevent(k) {\r\n        return item => e => {\r\n            this.props.updateValidation();\r\n            const value = e.target.value;\r\n            const participant = this.props.participants.find(p => p.id === k);\r\n            const newExtra = update(participant.externalExtra || {}, {[item]: {$set: value}});\r\n            this.props.update(k, 'externalExtra', newExtra);\r\n        }\r\n    }\r\n\r\n    updateAge(k) {\r\n        return date => {\r\n            this.props.updateValidation();\r\n            this.props.update(k, \"age\", date);\r\n        }\r\n    }\r\n\r\n    delete(k) {\r\n        return (e) => {\r\n            //@ts-ignore\r\n            if (confirm(\"Are you sure you wish to remove this participant?\")) this.props.delete(k);\r\n            e.preventDefault();\r\n        }\r\n    }\r\n\r\n    valid(item) {\r\n        const valid = \"\";\r\n        const invalid = \"has-error\";\r\n\r\n        if (this.props.validating && (!item || item === \"\")) return invalid;\r\n        return valid;\r\n    }\r\n\r\n    render() {\r\n\r\n        const ageWidgets = ageFactory(this.props.event);\r\n\r\n        const participants = this.props.participants;\r\n\r\n        const AttendanceWidget = attendance[this.props.event.partialDates].ParticipantWidget;\r\n\r\n\r\n        let rows = participants.map((p, i) => <ParticipantRow key={p.id}\r\n                                                              index={i}\r\n                                                              {...p}\r\n                                                              update={this.update(p.id)}\r\n                                                              updateAge={this.updateAge(p.id)}\r\n                                                              updateExtra={this.updateExtra(p.id)}\r\n                                                              updateExtraNoPrevent={this.updateExtraNoPrevent(p.id)}\r\n                                                              updateDirect={this.updateDirect(p.id)}\r\n                                                              delete={this.delete(p.id)}\r\n                                                              valid={this.valid}\r\n                                                              event={this.props.event}\r\n                                                              AttendanceWidget={AttendanceWidget}\r\n                                                              env={this.props.env}\r\n                                                              ageWidgets={ageWidgets}/>);\r\n        return (<React.Fragment>\r\n                {rows}\r\n                <Row className=\"mb-3\">\r\n                    <Col>\r\n                        <Button color=\"info\" onClick={this.add}>More People!</Button>\r\n                    </Col>\r\n                </Row>\r\n            </React.Fragment>\r\n        )\r\n    }\r\n}\r\n\r\nclass ParticipantRow extends React.Component<any, any> {\r\n    private readonly nameInput: React.RefObject<HTMLInputElement>;\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.nameInput = React.createRef();\r\n    }\r\n\r\n    componentDidMount() {\r\n        if (this.props.focus) {//@ts-ignore\r\n            this.nameInput.current.focus();\r\n        }\r\n    }\r\n\r\n    render() {\r\n\r\n        const debugInfo = this.props.env === 'dev' ? <span\r\n            style={{color: 'red'}}>{'id: ' + this.props.id + ' updated: ' + Moment(this.props.updatedAt).format('YYYY-MM-DD')}</span> : null;\r\n\r\n        //{this.props.validating ? this.props.name === \"\" || this.props.age === \"\" || this.props.diet === \"\" ? invalid : valid : valid}\r\n\r\n        const attendance = <this.props.AttendanceWidget days={this.props.days} event={this.props.event}\r\n                                                        update={this.props.update(\"days\")}\r\n                                                        updateDirect={this.props.updateDirect(\"days\")}/>;\r\n\r\n        return (<Card id={`participant-${this.props.id}`} className=\"mb-3\">\r\n            <CardImg top src=\"/participant-header.jpg\" alt=\"Card image cap\"/>\r\n            <CardImgOverlay>\r\n                <CardTitle style={{\r\n                    marginTop:  \"-0.85em\",\r\n                    marginLeft: \"-0.60em\"\r\n                }}>#{this.props.index + 1} {debugInfo}</CardTitle>\r\n            </CardImgOverlay>\r\n            <CardBody>\r\n                <FormGroup row>\r\n                    <Label sm={2}>Name:</Label>\r\n                    <Col sm={10}>\r\n                        <Input type=\"text\"\r\n                               value={this.props.name || ''}\r\n                               onChange={this.props.update(\"name\")}\r\n                               vaild={this.props.valid(this.props.name)}\r\n                               placeholder=\"Name\"\r\n                               innerRef={this.nameInput}/>\r\n                    </Col>\r\n                </FormGroup>\r\n                <FormGroup row>\r\n                    <this.props.ageWidgets.BookingFormWidget\r\n                        age={this.props.age}\r\n                        updateAge={this.props.updateAge}\r\n                        valid={this.props.valid(this.props.age)}\r\n                        event={this.props.event}\r\n                    />\r\n                    <Label sm={1}>Diet:</Label>\r\n                    <Col sm={3}>\r\n\r\n                        <Input type=\"select\" value={this.props.diet || ''}\r\n                               onChange={this.props.update(\"diet\")}\r\n                               vaild={this.props.valid(this.props.diet)}>\r\n                            <option value=\"\">Please Select</option>\r\n                            <option value=\"omnivore\">Omnivore</option>\r\n                            <option value=\"vegetarian\">Vegetarian</option>\r\n                            <option value=\"vegan\">Vegan</option>\r\n                        </Input>\r\n                    </Col>\r\n                </FormGroup>\r\n                <FormGroup row>\r\n                    <Label sm={3}>Additional dietary requirement or food related allergies:</Label>\r\n                    <Col sm={9}>\r\n                        <Input type=\"textarea\"\r\n                               value={this.props.dietExtra || ''}\r\n                               onChange={this.props.update(\"dietExtra\")}\r\n                               placeholder=\"N/A\"\r\n                               rows=\"3\"/>\r\n                    </Col>\r\n                </FormGroup>\r\n                <FormGroup row>\r\n                    <Label sm={3}>Additional medical information &amp; medication taken:</Label>\r\n                    <Col sm={9}>\r\n                        <Input type=\"textarea\"\r\n                               value={this.props.medical || ''}\r\n                               onChange={this.props.update(\"medical\")}\r\n                               placeholder=\"N/A\"\r\n                               rows=\"3\"/>\r\n                    </Col>\r\n                </FormGroup>\r\n                <Over16Section event={this.props.event} age={this.props.age} values={this.props.externalExtra || {}}\r\n                               update={this.props.updateExtra}/>\r\n                <PhotoConsent event={this.props.event} update={this.props.updateExtraNoPrevent}  values={this.props.externalExtra || {}} id={this.props.id}/>\r\n                <FormGroup row>\r\n                    {attendance}\r\n                    <Col sm={1}>\r\n                        <Button onClick={this.props.delete} color=\"warning\">\r\n                            <span style={{color: 'white'}}><FontAwesomeIcon icon={faTimes}/></span>\r\n                        </Button>\r\n                    </Col>\r\n                </FormGroup>\r\n            </CardBody>\r\n        </Card>)\r\n    }\r\n}\r\n\r\nconst PhotoConsent = props => {\r\n  if(!props.event.customQuestions.photoConsent) return null;\r\n\r\n    return <FormGroup row>\r\n        <Label sm={10}>I have permission for photographs, video and other media of this person to feature or be referred to on Woodcraft Folk social media, website and other publicity materials.</Label>\r\n        <Col sm={2} className=\"pt-2\">\r\n            <FormGroup check inline key='yes'>\r\n                <Label check>\r\n                    <Input type=\"radio\"\r\n                           value='yes'\r\n                           name={props.id}\r\n                           onChange={props.update('photoConsent')}\r\n                           checked={props.values.photoConsent === 'yes'}/>\r\n                    Yes\r\n                </Label>\r\n            </FormGroup>\r\n            <FormGroup check inline key='no'>\r\n                <Label check>\r\n                    <Input type=\"radio\"\r\n                           value='no'\r\n                           name={props.id}\r\n                           onChange={props.update('photoConsent')}\r\n                           checked={props.values.photoConsent === 'no'}/>\r\n                    No\r\n                </Label>\r\n            </FormGroup>\r\n        </Col>\r\n    </FormGroup>\r\n\r\n};\r\n\r\nconst Over16Section = props => {\r\n\r\n    if (Moment(props.event.startDate).diff(Moment(props.age), 'years') > 15 && (props.event.customQuestions.adultEmail || props.event.customQuestions.adultFirstAid)) {\r\n        const emailForm = props.event.customQuestions.adultEmail ? <React.Fragment>\r\n            <Label sm={3}>Email address used for WCF membership:</Label>\r\n            <Col sm={4}>\r\n                <Input type=\"email\"\r\n                       value={props.values.adultEmail || ''}\r\n                       onChange={props.update(\"adultEmail\")}\r\n                       placeholder=\"e-mail address\"/>\r\n            </Col>\r\n        </React.Fragment> : null;\r\n\r\n        const firstAidForm = props.event.customQuestions.adultFirstAid ? <React.Fragment>\r\n            <Label sm={3}>Up to date first aid:</Label>\r\n            <Col sm={2}>\r\n                <Input type=\"select\" value={props.values.adultFirstAid || ''}\r\n                       onChange={props.update(\"adultFirstAid\")}>\r\n                    <option value='no'>No</option>\r\n                    <option value=\"yes\">Yes</option>\r\n                </Input>\r\n            </Col>\r\n        </React.Fragment> : null;\r\n\r\n        return (<FormGroup row>\r\n            {emailForm}\r\n            {firstAidForm}\r\n        </FormGroup>)\r\n\r\n    } else {\r\n        return null\r\n    }\r\n\r\n};","import * as React from 'react'\r\nimport ReactMarkdown from 'react-markdown'\r\n\r\nimport paymentReference from '../../../../shared/paymentReference'\r\n\r\nimport {\r\n    Button,\r\n    Row,\r\n    Col,\r\n    FormGroup,\r\n    Label,\r\n    Input,\r\n    Card,\r\n    CardBody,\r\n    CardTitle,\r\n    CardImg,\r\n    CardImgOverlay\r\n} from 'reactstrap';\r\n\r\nexport default class PaymentForm extends React.Component<any, any> {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.selectPaymentType = this.selectPaymentType.bind(this);\r\n    }\r\n\r\n    selectPaymentType(e) {\r\n        this.props.updateValidation();\r\n        this.props.update(\"paymentType\", e.target.value);\r\n    }\r\n\r\n    valid(item) {\r\n        if (this.props.validating && (!item || item === \"\")) return false;\r\n        return null;\r\n    }\r\n\r\n    render() {\r\n        const radios = this.props.event.paymentTypes.map(p =>\r\n            <FormGroup check inline key={p}>\r\n                <Label check>\r\n                    <Input type=\"radio\" value={p}\r\n                           onChange={this.selectPaymentType}\r\n                           checked={this.props.chosen === p}/>\r\n                    {p}\r\n                </Label>\r\n            </FormGroup>);\r\n\r\n        const paymentText = this.props.booking.id ? this.props.event.paymentInfo.replace(/(%%%%)/g, paymentReference(this.props.booking.id)) : this.props.event.customQuestions.annonPayment || this.props.event.paymentInfo;\r\n\r\n        return (<React.Fragment>\r\n            <FormGroup row>\r\n                <Label sm={2}>Payment Method:</Label>\r\n                <Col sm={10} className=\"pt-2\">\r\n                    {radios}\r\n                </Col>\r\n            </FormGroup>\r\n            <Row>\r\n                <Col>\r\n                    <ReactMarkdown  children={paymentText}/>\r\n                </Col>\r\n            </Row>\r\n        </React.Fragment>);\r\n\r\n    }\r\n}","import * as React from 'react'\r\n\r\nimport {\r\n    Row,\r\n    Col,\r\n    FormGroup,\r\n    Label,\r\n    Input\r\n} from 'reactstrap';\r\nimport Moment from \"moment\";\r\n\r\nexport default class PermissionForm extends React.Component<any, any> {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.updatePermission = this.updatePermission.bind(this);\r\n        this.updateEmergency = this.updateEmergency.bind(this);\r\n        this.updateNote = this.updateNote.bind(this);\r\n        this.updateCampWith = this.updateCampWith.bind(this);\r\n    }\r\n\r\n    updatePermission() {\r\n        this.props.updateValidation();\r\n        this.props.update('permission', !this.props.permission);\r\n    }\r\n\r\n    updateEmergency(item) {\r\n        return (e) => {\r\n            this.props.updateValidation();\r\n            this.props.update(item, e.target.value)\r\n            e.preventDefault();\r\n        }\r\n    }\r\n\r\n    updateCampWith(e) {\r\n        this.props.updateValidation();\r\n        this.props.update('campWith', e.target.value);\r\n        e.preventDefault();\r\n    }\r\n\r\n    updateNote(e) {\r\n        this.props.updateValidation();\r\n        this.props.update('note', e.target.value);\r\n        e.preventDefault();\r\n    }\r\n\r\n    valid(item) {\r\n        if (this.props.validating && (!item || item === \"\")) return false;\r\n        return null;\r\n    }\r\n\r\n    render() {\r\n\r\n        const valid = \"form-group\";\r\n        const invalid = \"form-group has-error\";\r\n\r\n        const customQuestions = this.props.event.customQuestions || {};\r\n\r\n        const lonePerson = this.props.booking.participants.filter(p => {\r\n                return Moment(this.props.event.startDate).diff(Moment(p.age), 'years') > 15\r\n            }\r\n        ).length < 2;\r\n\r\n\r\n        const emergency = !this.props.event.bigCampMode || lonePerson ?\r\n            <React.Fragment>\r\n                <Row>\r\n                    <Col>\r\n                        <h4>Emergency Contact</h4>\r\n                        {lonePerson ? <p>As you have only booked in one adult, please provide some emergency contact details of someone not attending the event</p> : <p>Please provide details of someone we can contact in case of an emergency during the event (a\r\n                            second\r\n                            person is better even if you are not attending yourself)</p>}\r\n                    </Col>\r\n                </Row>\r\n                <FormGroup row>\r\n                    <Label sm={2}>\r\n                        Name:\r\n                    </Label>\r\n                    <Col sm={10}>\r\n                        <Input type=\"text\"\r\n                               placeholder=\"Name\"\r\n                               value={this.props.emergencyName || ''}\r\n                               valid={this.valid(this.props.emergencyName)}\r\n                               onChange={this.updateEmergency(\"emergencyName\")}/>\r\n                    </Col>\r\n                </FormGroup>\r\n                <FormGroup row>\r\n                    <Label sm={2}>\r\n                        Phone:\r\n                    </Label>\r\n                    <Col sm={10}>\r\n                        <Input type=\"text\"\r\n                               placeholder=\"Phone number\"\r\n                               value={this.props.emergencyPhone || ''}\r\n                               valid={this.valid(this.props.emergencyPhone)}\r\n                               onChange={this.updateEmergency(\"emergencyPhone\")}/>\r\n                    </Col>\r\n                </FormGroup>\r\n            </React.Fragment> : null;\r\n\r\n\r\n        const campWith = this.props.event.bigCampMode ?\r\n\r\n            <FormGroup row>\r\n                <Label sm={12}>\r\n                    Are there are any other IFM-SEI organisations or Woodcraft Folk districts you would like to camp\r\n                    with? We will do our best to accommodate this, and if you don’t know, then don’t worry! We will\r\n                    match international groups with a lovely Woodcraft Folk group and vice versa:\r\n                </Label>\r\n                <Col sm={{size: 10, offset: 2}}>\r\n                    <Input type=\"textarea\"\r\n                           value={this.props.campWith || ''}\r\n                           onChange={this.updateEmergency(\"campWith\")}/>\r\n                </Col>\r\n            </FormGroup> : null;\r\n\r\n        return (<React.Fragment>\r\n            {emergency}\r\n            <Row>\r\n                <Col>\r\n                    <h4>Additional Information</h4>\r\n                </Col>\r\n            </Row>\r\n            <FormGroup row>\r\n                <Label sm={2}>\r\n                    {customQuestions.extraQuestion ? customQuestions.extraQuestion : 'Anything else we need to know?:'}\r\n                </Label>\r\n                <Col sm={10}>\r\n                    <Input type=\"textarea\"\r\n                           placeholder=\"\"\r\n                           value={this.props.note || customQuestions.extraTemplate || ''}\r\n                           onChange={this.updateNote}\r\n                           rows={6}/>\r\n                </Col>\r\n            </FormGroup>\r\n            {campWith}\r\n            <Row>\r\n                <Col>\r\n                    <h4>Permission</h4>\r\n                </Col>\r\n            </Row>\r\n            <FormGroup row>\r\n                <Col sm={{size: 10, offset: 2}}>\r\n                    <FormGroup check>\r\n                        <Label check>\r\n                            <Input type=\"checkbox\" checked={!!this.props.permission}\r\n                                   onChange={this.updatePermission}/>{' '}\r\n                            I give permission for the people named above to\r\n                            attend {this.props.event.name}.<br/><br/>\r\n                            I acknowledge it is my responsibility to ensure everyone over 16 attending has up-to-date\r\n                            Woodcraft Folk membership and completed a DBS check.\r\n                            <br/><br/>\r\n                            I agree this information will be stored electronically and shared only with individuals who need this information to\r\n                            engage your child safely in Woodcraft Folk activities. Based on the needs of your child we may also share any relevant\r\n                            information with medical or child protection professionals. For more information please visit\r\n                            <a href=\"https://woodcraft.org.uk/privacy\"> www.woodcraft.org.uk/privacy</a> or contact <a\r\n                            href=\"mailto:data@woodcraft.org.uk\">data@woodcraft.org.uk</a>\r\n                        </Label>\r\n                    </FormGroup>\r\n                </Col>\r\n            </FormGroup>\r\n        </React.Fragment>);\r\n    }\r\n}","import * as React from 'react'\r\nimport {connect} from 'react-redux'\r\n\r\nimport {Route, Switch} from 'react-router-dom';\r\nimport {viewBookingCheck, loggedInCheck} from '../permission'\r\nimport {getBooking} from '../actions'\r\nimport * as bookings from \"../index\";\r\n\r\n//load an individual booking so we can edit it, this will check we have permission to VIEW this booking.\r\n\r\nclass BookingLoader extends React.Component<any, any> {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n\r\n    componentWillMount() {\r\n        this.props.getBooking(this.props.match.params.bookingId);\r\n    }\r\n\r\n    render() {\r\n\r\n        if (this.props.Booking === undefined) return <div>Loading Data</div>;\r\n        return <Switch>\r\n            <Route exact path=\"/booking/:bookingId(\\d+)/edit\" component={viewBookingCheck(bookings.editPage)}/>)\r\n        </Switch>\r\n    }\r\n}\r\n\r\n\r\nconst mapStateToProps = (state, props) => {\r\n\r\n    const Booking = state.getIn([\"Bookings\", \"bookings\", parseInt(props.match.params.bookingId)]);\r\n    //const Bookings = state.getIn([\"Bookings\",\"bookings\"]).filter(b => b.get(\"eventId\") === Event.get(\"id\")).toList();\r\n    //const Participants = Bookings.reduce((r, b) => r.concat(b.get(\"participants\")), Immutable.List());//just easier to do this here than find a plain javascript object map function\r\n    return {Booking};\r\n};\r\n\r\nconst mapDispatchToProps = {\r\n    getBooking: getBooking,\r\n};\r\n\r\nconst VisibleBookingLoader = connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(loggedInCheck(BookingLoader));\r\n\r\nexport default VisibleBookingLoader;\r\n\r\n","import * as React from 'react'\r\nimport {connect} from 'react-redux'\r\n\r\nimport * as event from '../../events'\r\nimport BookingForm from './form/bookingForm'\r\nimport ParticipantQuickList from './participantQuickList'\r\nimport {\r\n    updateQuickList,\r\n    createBooking,\r\n    getUserBookings,\r\n    saveBooking,\r\n    cancelBooking,\r\n    updateCurrentBooking\r\n} from '../actions'\r\n\r\nimport {bookEventCheck}       from '../permission'\r\nimport {bookIntoOrganisation} from '../../../shared/permissions'\r\nimport Moment                 from \"moment/moment\";\r\nimport uuid                   from 'uuid/v4';\r\n\r\nimport {\r\n    Row,\r\n    Col,\r\n} from 'reactstrap';\r\n\r\nimport { storageFactory } from \"storage-factory\";\r\nconst local = storageFactory(() => localStorage);\r\n\r\n\r\n//this is the special case where we are doing the sessions own booking for the event. If we have previously booked then edit that instead of letting them create a new one.  \r\n\r\n//TODO: do we have permission?\r\n\r\nclass MyBookingPage extends React.Component<any, any> {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n\r\n    render() {\r\n\r\n        const event = this.props.Event.toJS();\r\n        const user = this.props.User.toJS();\r\n        const booking = this.props.Booking.toJS ? this.props.Booking.toJS() : this.props.Booking;\r\n        const organisations = event.organisations.filter(o => bookIntoOrganisation(user, event, booking, o));\r\n\r\n        booking.externalExtra = booking.externalExtra || {};\r\n\r\n        const form =\r\n            <BookingForm user={user}\r\n                         event={event}\r\n                         booking={booking}\r\n                         organisations={organisations}\r\n                         submit={booking.id ? (booking) => this.props.saveBooking(booking, true) : this.props.createBooking}\r\n                         updateCurrentBooking={this.props.updateCurrentBooking} cancel={this.props.cancelBooking}\r\n                         env={this.props.env}/>;\r\n\r\n        return (<Row>\r\n            <Col xs={12} sm={12} md={10}>\r\n                <h3>Booking for {event.name}</h3>\r\n                {form}\r\n            </Col>\r\n            <ParticipantQuickList booking={booking} event={event}/>\r\n        </Row>);\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state, props) => {\r\n    const eventId = parseInt(props.match.params.eventId)\r\n    let User = state.getIn([\"User\", \"user\"]);\r\n    let Event = state.getIn([\"Events\", \"events\", eventId]);\r\n\r\n    const event = Event.toJS();\r\n\r\n    //find the booking, sources:\r\n    //1) currentBooking if set and for this user/event,\r\n    //2) Pre-existing booking in the bookings map\r\n    //3) Booking in localstorage\r\n    //4) empty booking\r\n\r\n    const Bookings = state.get(\"Bookings\");\r\n\r\n    let currentBooking = Bookings.get(\"currentBooking\");\r\n\r\n    if (currentBooking && (currentBooking.get(\"eventId\") !== Event.get(\"id\") || currentBooking.get(\"userId\") !== User.get(\"id\"))) currentBooking = null;\r\n\r\n    const existingBooking = state.getIn([\"Bookings\", \"bookings\"]).find(b => b.get(\"userId\") === User.get(\"id\") && b.get(\"eventId\") === Event.get(\"id\"))\r\n    //@ts-ignore\r\n    const localData = local.getItem('currentBooking') ? JSON.parse(local.getItem('currentBooking')) : false;\r\n\r\n    const localBooking = (localData &&\r\n        (localData.eventId === Event.get(\"id\")) &&\r\n        (localData.userId === User.get(\"id\"))) ? localData : false;\r\n\r\n    const prevBooking = (Event, Bookings, User) => {\r\n\r\n        if(Event.get(\"bigCampMode\") === false) return null\r\n\r\n        let prevBooking = Bookings.get(\"bookings\")\r\n            .filter(b => b.get(\"userId\") === User.get(\"id\"))\r\n            .filter(b => Moment(b.get('createdAt')).year() === Moment().year())\r\n            .toList()\r\n            .sort((a, b) => a.get('participants').size < b.get('participants').size)\r\n            .get(0)\r\n\r\n        if (prevBooking) {\r\n            prevBooking = prevBooking.set(\"eventId\", Event.get(\"id\"))\r\n                .delete(\"id\")\r\n                .delete(\"note\")\r\n                .delete('createdAt')\r\n                .delete('updatedAt')\r\n                .set('participants', prevBooking.get(\"participants\").map(p => p.set(\"id\", uuid()).delete(\"bookingId\").set('days', event.partialDates !== 'partial' ? 2 ** (Moment(event.endDate).diff(Moment(event.startDate), 'days') + 1) - 1 : event.partialDatesData[0].mask,\r\n            ))\r\n                .delete('createdAt')\r\n                .delete('updatedAt'));\r\n\r\n            return prevBooking\r\n        } else {\r\n            return null\r\n        }\r\n    };\r\n\r\n    let Booking = currentBooking || existingBooking || localBooking || prevBooking(Event, Bookings, User) || emptyBooking(User, Event);\r\n\r\n    const Env = state.get(\"App\");\r\n\r\n    return {User, Event, Booking, Env}\r\n};\r\n\r\nconst emptyBooking = (User, Event) => {\r\n    const event = Event.toJS();\r\n    const booking = {\r\n        userId: User.get(\"id\"),\r\n        eventId: Event.get(\"id\"),\r\n        userName: User.get(\"id\") === 1 ? '' : User.get(\"userName\"),\r\n        userEmail: User.get(\"id\") === 1 ? '' : User.get(\"email\") ? User.get(\"email\") : '',\r\n        participants: [{\r\n            id:            uuid(),\r\n            name:          '',\r\n            age:           '',\r\n            diet:          '',\r\n            days:          event.partialDates !== 'partial' ? 2 ** (Moment(event.endDate).diff(Moment(event.startDate), 'days') + 1) - 1 : event.partialDatesData[0].mask,\r\n            externalExtra: {},\r\n            internalExtra: {}\r\n        }],\r\n        externalExtra: {},\r\n        internalExtra: {},\r\n        organisationId: undefined\r\n    };\r\n\r\n    if (Event.get(\"organisationsEnabled\")){\r\n        const bookRole = User.get('roles').toJS().find(r => r.name === 'book' && r.eventId === Event.get(\"id\"));\r\n        const orgId = (bookRole && bookRole.organisationId) ? bookRole.organisationId : Event.getIn(['organisations', 0, 'id']);\r\n        booking.organisationId = orgId;\r\n    }\r\n\r\n    return booking;\r\n};\r\n\r\nconst getEvent = event.actions.getEvent;\r\nconst mapDispatchToProps = {\r\n    getEvent,\r\n    updateQuickList,\r\n    createBooking,\r\n    getUserBookings,\r\n    saveBooking,\r\n    cancelBooking,\r\n    updateCurrentBooking\r\n};\r\n\r\nconst VisibleMyBookingPage = connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(MyBookingPage);\r\n\r\nexport default bookEventCheck(VisibleMyBookingPage);","import * as React from 'react'\r\nimport { woodcraft as W } from '../../../shared/woodcraft.js'\r\nimport {\r\n    Row,\r\n    Col,\r\n} from 'reactstrap';\r\nimport Moment from \"moment\";\r\n\r\n\r\nW.reverse();\r\n\r\nexport default class ParticipantsList extends React.Component<any, any> {\r\n\r\n    render() {\r\n\r\n        const list = this.props.booking.participants.filter(p => p.name !== '' && p.age !== '' && p.diet !== '');\r\n        const groups = W.map(w => {\r\n            const people = list.filter((p) => p.age === '' ? false : w.filter(Moment(this.props.event.startDate).diff(Moment(p.age), 'years')))\r\n                .sort(nameSort)\r\n                .map((p, k) =>\r\n                <p\r\n                    key={k}><a href={`#participant-${p.id}`}>{p.name}</a></p>);\r\n            if (people.length === 0) return null;\r\n            return (<div className=\"participantQuickList\" key={w.name}>\r\n                <h5>{w.name}: {people.length}</h5>\r\n                {people}\r\n            </div>);\r\n        });\r\n\r\n\r\n        return (<Col md={2}>\r\n            <div className=\"sticky-top\">\r\n                <h4>Participants: {list.length}</h4>\r\n                {groups}\r\n            </div>\r\n        </Col>);\r\n\r\n    }\r\n}\r\n\r\nconst nameSort = (a, b) => {\r\n    var splitA = a.name.split(\" \");\r\n    var splitB = b.name.split(\" \");\r\n    var lastA = splitA[splitA.length - 1];\r\n    var lastB = splitB[splitB.length - 1];\r\n\r\n    if (lastA < lastB) return -1;\r\n    if (lastA > lastB) return 1;\r\n    return 0;\r\n};","import * as React            from 'react'\r\nimport {connect}        from 'react-redux'\r\nimport {Link}           from 'react-router-dom'\r\nimport {browserHistory} from 'react-router'\r\nimport Moment           from 'moment'\r\n\r\n//import event from '../../events'\r\nimport {redirectFromThanks} from '../actions'\r\nimport {\r\n    Row,\r\n    Col,\r\n    Table\r\n}                           from 'reactstrap';\r\nimport ReactMarkdown        from 'react-markdown'\r\nimport ageFactory           from \"../../age\";\r\nimport feeFactory           from '../../../shared/fee/feeFactory'\r\nimport { woodcraft as W } from '../../../shared/woodcraft.js'\r\nimport paymentReference from \"../../../shared/paymentReference\";\r\n\r\n\r\n//confirmation page for bookings\r\n\r\nclass ThanksPage extends React.Component<any, any> {\r\n    private readonly event: any\r\n    private user: any\r\n    private booking: any\r\n    private ageWidgets: any\r\n    private fees: any\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.event = this.props.Event.toJS();\r\n        this.user = this.props.User.toJS();\r\n        this.booking = this.props.Booking.toJS();\r\n\r\n        this.ageWidgets = ageFactory(this.event);\r\n        this.fees = feeFactory(this.event);\r\n\r\n    }\r\n\r\n    render() {\r\n\r\n        const event = this.props.Event.toJS();\r\n        const user = this.props.User.toJS();\r\n\r\n        const ageWidgets = ageFactory(event);\r\n\r\n        const booking = this.props.Booking.toJS();\r\n        const startDate = Moment(event.startDate);\r\n\r\n        booking.participants.forEach(p => {\r\n            p.ageAtStart = startDate.diff(Moment(p.age), 'years');//@ts-ignore\r\n            p.ageGroup = W.find(w => w.filter(p.ageAtStart)).singular;\r\n            p.displayAge = ageWidgets.displayAgeParticipant(p);\r\n        });\r\n\r\n        const participants = booking.participants.map(p => <ParticipantRow key={p.id} {...p} />);\r\n\r\n        const paymentText = event.paymentInfo.replace(/(%%%%)/g, paymentReference(booking.id));\r\n\r\n        return (<React.Fragment>\r\n            <Row>\r\n            <Col>\r\n                <h3>Thanks for booking for {event.name}</h3>\r\n                <p>You can come back and <Link to={\"/event/\" + event.id + \"/book\"}>edit</Link> your booking at any time\r\n                    before the deadline</p>\r\n                <h4>Participants booked</h4>\r\n                <Table striped>\r\n                    <thead>\r\n                    <tr>\r\n                        <th>Name</th>\r\n                        <th>Age</th>\r\n                        <th>Diet</th>\r\n                    </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                    {participants}\r\n                    </tbody>\r\n                </Table>\r\n            </Col>\r\n            </Row>\r\n            <Row>\r\n            <Col sm={12}>\r\n                <h4>Money</h4>\r\n                <ReactMarkdown  children={event.feeData.desc}/>\r\n            </Col>\r\n            </Row>\r\n            <this.fees.ThanksRow\r\n                event={this.event}\r\n                booking={booking}/>\r\n            <Row>\r\n                <ReactMarkdown  children={paymentText}/>\r\n            </Row>\r\n            <Row>\r\n                <Col>\r\n                    <p>If you have any questions, or need to get in touch for any reason please contact <a href={`mailto:${event.customQuestions.emailReply}`}>{event.customQuestions.emailReply}</a></p>\r\n                </Col>\r\n            </Row>\r\n        </React.Fragment>);\r\n    }\r\n}\r\n\r\nconst ParticipantRow = props => <tr>\r\n    <td>{props.name}</td>\r\n    <td>{props.displayAge}</td>\r\n    <td>{props.diet}</td>\r\n</tr>;\r\n\r\nclass ThanksPageWrapper extends React.Component<any, any> {\r\n    private hasBooking: any;\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.hasBooking = this.props.Booking\r\n    }\r\n\r\n    render() {\r\n        if (this.props.Booking) return <ThanksPage {...this.props}/>;\r\n        else {\r\n            //this is some unholy hack to get the thanks page to redirect back to the booking form if the user does not have a booking and will never actually come up in the real world.\r\n            setImmediate(this.props.redirectFromThanks, this.props.Event.get('id'));\r\n            return null;\r\n        }\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state, props) => {\r\n    let User = state.getIn([\"User\", \"user\"]);\r\n    let Event = state.getIn([\"Events\", \"events\", parseInt(props.match.params.eventId)]);\r\n    let Booking = state.getIn([\"Bookings\", \"bookings\"]).find(b => b.get(\"userId\") === User.get(\"id\") && b.get(\"eventId\") === Event.get(\"id\"));\r\n    return {User, Event, Booking}\r\n};\r\n\r\n//const getEvent = event.actions.getEvent\r\nconst mapDispatchToProps = {redirectFromThanks};\r\n\r\nconst VisibleThanksPage = connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(ThanksPageWrapper);\r\n\r\nexport default VisibleThanksPage;","import * as actions from './actions'\r\nimport reducer from './reducer'\r\n\r\nimport myBookingPage from './components/myBookingPage'\r\nimport applyPage from './components/applyPage'\r\nimport applyThanksPage from './components/applyThanksPage'\r\nimport editPage from './components/editPage'\r\nimport thanksPage from './components/thanksPage'\r\nimport cancelPage from './components/cancelPage'\r\nimport loader from './components/loader'\r\n\r\nexport {actions, reducer, myBookingPage, editPage, thanksPage, cancelPage, loader, applyPage, applyThanksPage};","import {connectedRouterRedirect,} from 'redux-auth-wrapper/history4/redirect'\r\nimport {withRouter} from 'react-router'\r\n\r\nimport * as P from '../../shared/permissions'\r\n\r\nexport const loggedInCheck = connectedRouterRedirect({\r\n    authenticatedSelector: (state, props) => {\r\n        const user = state.getIn([\"User\", \"user\"]).toJS();\r\n        return user.id !== 1;\r\n        },\r\n    redirectPath: \"/user\",\r\n    wrapperDisplayName: \"View Booking check\"\r\n});\r\n\r\nexport const viewBookingCheck = connectedRouterRedirect({\r\n    authenticatedSelector: (state, props) => {\r\n        //if (props.booking === undefined) return true;\r\n        const user = state.getIn([\"User\", \"user\"]).toJS();\r\n        const Booking = state.getIn([\"Bookings\", \"bookings\", parseInt(props.match.params.bookingId)]);\r\n        if(!Booking) return false;\r\n        const booking = Booking.toJS();\r\n        booking.event = state.getIn([\"Events\", \"events\", booking.eventId]).toJS();\r\n        return P.viewBooking(user, booking);\r\n    },\r\n    redirectPath: \"/user\",\r\n    wrapperDisplayName: \"View Booking check\"\r\n});\r\n\r\nexport const applyEventCheck = connectedRouterRedirect({\r\n    authenticatedSelector: (state, props) => {\r\n        const Event = state.getIn([\"Events\", \"events\", parseInt(props.match.params.eventId)]);\r\n        const User = state.getIn([\"User\", \"user\"]);\r\n        return P.applyToBookEvent(User.toJS(), Event.toJS());\r\n    },\r\n    redirectPath: (state, props) => {\r\n        if (state.getIn([\"User\", \"user\", \"applications\"]).find(a => a.get(\"eventId\") === props.match.params.eventId))\r\n            return '/event/' + props.match.params.eventId + '/apply/thanks';\r\n        else return '/';\r\n    },\r\n    wrapperDisplayName: \"Apply To Book check\"\r\n});\r\n\r\nexport const bookEventCheck = connectedRouterRedirect({\r\n    authenticatedSelector: (state, props) => {\r\n\r\n        const User = state.getIn([\"User\", \"user\"]);\r\n        const Event = state.getIn([\"Events\", \"events\", parseInt(props.match.params.eventId)]);\r\n\r\n        const user = User.toJS();\r\n        const event = Event.toJS();\r\n        return P.bookEvent(user, event);\r\n    },\r\n    redirectPath: \"/user\",\r\n    wrapperDisplayName: \"Create Event Check\"\r\n});\r\n\r\nexport const editBookingCheck = connectedRouterRedirect({\r\n    authenticatedSelector: (state, props) => {\r\n        //called from /booking/1/edit\r\n        const User = state.getIn([\"User\", \"user\"]);\r\n        const Booking = state.getIn([\"Bookings\", \"bookings\", parseInt(props.match.params.bookingId)]);\r\n        const Event = state.getIn([\"Events\", \"events\", Booking.get(\"eventId\")]);\r\n\r\n        const user = User.toJS();\r\n        const event = Event.toJS();\r\n        const booking = Booking.toJS();\r\n\r\n        return P.editBooking(user, event, booking);\r\n    },\r\n    redirectPath: \"/user\",\r\n    wrapperDisplayName: \"Create Event Check\"\r\n});","import * as Immutable from 'immutable'\r\nimport * as a from './actions'\r\nimport * as user from '../user'\r\nimport * as manageActions from '../manage/actions'\r\n\r\nconst initialBookingsState = Immutable.fromJS({currentBooking: null, bookings: null});\r\n\r\nexport default function Bookings(state = initialBookingsState, action) {\r\n\r\n    switch (action.type) {\r\n        //case a.GET_EVENTS: return Immutable.fromJS(action.data);\r\n        case a.UPDATE_BOOKINGS:\r\n            return state.set(\"bookings\", action.bookings.reduce((a, c) => {\r\n                return a.setIn([c.id, 'participants'], null).setIn([c.id, 'payments'], null).mergeDeepIn([c.id], Immutable.fromJS(c))\r\n            }, state.get(\"bookings\") || Immutable.Map()));\r\n        case a.DELETE_BOOKING:\r\n            return state.deleteIn([\"bookings\", action.id]);\r\n        case user.actions.UPDATE_USER:\r\n            return state.set(\"bookings\", null); //invalidates app render if the user changes until we can fetch more user bookings.\r\n        case a.UPDATE_CURRENT_BOOKING:\r\n            return state.set(\"currentBooking\", Immutable.fromJS(action.booking));\r\n        case manageActions.LOCAL_ASSIGN_VILLAGE:\r\n            return state.setIn([\"bookings\", action.bookingId, \"villageId\"], action.villageId)\r\n    }\r\n    return state;\r\n}\r\n\r\n","import fetch from '../fetch'\r\nimport { push } from 'react-router-redux'\r\nimport * as m from '../messages'\r\n\r\n//Actions\r\n\r\nexport const UPDATE_EVENTS = 'EVENT_UPDATE_EVENTS';\r\nexport const GET_EVENTS = 'EVENT_GET_EVENTS';\r\nexport const REMOVE_EVENT = 'EVENT_REMOVE_EVENT'\r\n\r\nexport const updateEvents = e => {\r\n\treturn {\r\n        type: UPDATE_EVENTS,\r\n        events: e.events\r\n    };\r\n};\r\n\r\nexport const removeEvent = id => {\r\n    return {\r\n        type: REMOVE_EVENT,\r\n        id: id\r\n    }\r\n};\r\n\r\nexport const getEvents = () => {\r\n\treturn (dispatch) => {\r\n\t\tconsole.log(\"FETCHING EVENTS\")\r\n\t\tfetch('/api/events', \"GET\")\r\n\t\t\t.then(j =>\r\n                dispatch(updateEvents(j))\r\n\t\t\t).catch(r => {\r\n\t\t\t\tconsole.log(r);\r\n\t\t\t});\r\n\t}\r\n};\r\n\r\nexport const getEvent = (id) => {\r\n\treturn (dispatch) => {\r\n\t\tfetch('/api/event/' + id, \"GET\")\r\n\t\t\t.then(j => {\r\n                dispatch(updateEvents(j));\r\n\t\t\t}).catch(r => console.log(r));\r\n\t}\r\n};\r\n\r\nexport const getEventDetails = (id) => {\r\n    return (dispatch) => {\r\n        fetch('/api/event/' + id + '/details', \"GET\")\r\n            .then(j => {\r\n                dispatch(updateEvents(j));\r\n            }).catch(r => console.log(r));\r\n    }\r\n};\r\n\r\nexport const saveEvent = event => {\r\n\treturn (dispatch) => {\r\n\t\tfetch('/api/event/edit', \"POST\", event)\r\n\t\t\t.then(j => {\r\n                dispatch(updateEvents(j));\r\n\t\t\t\tdispatch(m.actions.setSuccess(\"Event Updated\"));\r\n\t\t\t\tdispatch(push('/'));\r\n\t\t\t}).catch(r => console.log(r));\r\n\t}\r\n\r\n};\r\n\r\nexport const createEvent = event => {\r\n\treturn dispatch => {\r\n\t\tfetch('/api/event/create', \"POST\", event)\r\n\t\t\t.then(j => {\r\n                dispatch(updateEvents(j));\r\n\t\t\t\tdispatch(m.actions.setSuccess(\"Event Created\"));\r\n\t\t\t\tdispatch(push('/'));\r\n\t\t\t}).catch(r => {\r\n\t\t\t\tconsole.log(r);\r\n\t\t\t});\r\n\t}\r\n};\r\n\r\nexport const deleteEvent = event => {\r\n\treturn dispatch => {\r\n\t\tfetch('/api/event/delete', \"POST\", event)\r\n\t\t\t.then(() => {\r\n                dispatch(removeEvent(event.id));\r\n\t\t\t\tdispatch(m.actions.setSuccess(\"Event Deleted\"));\r\n\t\t\t\tdispatch(push('/'));\r\n\t\t\t})\r\n\t}\r\n};","import * as React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { Link } from 'react-router-dom'\r\nimport Moment from 'moment'\r\n\r\n\r\nimport EventForm from './eventForm'\r\nimport { createEventCheck } from '../permission'\r\nimport { createEvent } from '../actions'\r\n\r\nimport {\r\n    Row,\r\n    Col\r\n} from 'reactstrap';\r\n\r\nclass CreatePage extends React.Component<any, any> {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.saveEvent = this.saveEvent.bind(this);\r\n\t}\r\n\r\n\tsaveEvent(e) {\r\n\t\tthis.props.createEvent(e);\r\n\t}\r\n\r\n\trender() {\r\n\t\t//const data = this.props.user.toObject();\r\n\r\n\t\tlet event = {\r\n\t\t\tid: null,\r\n\t\t\tname: '',\r\n\t\t\tdescription: '',\r\n\t\t\tstartDate: Moment().format(\"YYYY-MM-DD\"),\r\n\t\t\tendDate: Moment().format(\"YYYY-MM-DD\"),\r\n\t\t\tbookingDeadline: Moment().format(\"YYYY-MM-DD\"),\r\n\t\t\tallowGuestBookings: false,\r\n\t\t\tfeeModel: \"free\",\r\n\t\t\tfeeData: {},\r\n\t\t\tpaymentTypes: [\"Cash\", \"Cheque\", \"Bank Transfer\"],\r\n\t\t\tpaymentInfo: \"\"\r\n        };\r\n\r\n        return (<React.Fragment>\r\n            <Row>\r\n                <Col>\r\n                    <h3>New Event</h3>\r\n                </Col>\r\n            </Row>\r\n            <EventForm event={event} new={true} saveEvent={this.saveEvent}/>\r\n        </React.Fragment>);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n\t//var Events = state.getIn([\"Data\",\"Events\"]);\r\n\t// return {Events};\r\n\treturn {}\r\n}\r\n\r\nconst mapDispatchToProps = { createEvent };\r\n\r\nvar VisibleCreatePage = connect(\r\n\tmapStateToProps,\r\n\tmapDispatchToProps\r\n)(createEventCheck(CreatePage));\r\n\r\nexport default VisibleCreatePage;","import * as React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { Link } from 'react-router-dom'\r\nimport EventForm from './eventForm'\r\n\r\nimport { getEvent, saveEvent, deleteEvent } from '../actions'\r\nimport { editEventCheck } from '../permission'\r\n\r\nimport {\r\n    Row,\r\n    Col\r\n} from 'reactstrap';\r\n\r\nclass EditPage extends React.Component<any, any> {\r\n\r\n\trender() {\r\n\t\tif (this.props.Event === undefined) return null;\r\n\r\n\t\tlet event = this.props.Event.toJS();\r\n\t\t//const data = this.props.user.toObject();\r\n\r\n        return (<React.Fragment>\r\n            <Row>\r\n                <Col>\r\n                    <h3>Edit Event - {event.name}</h3>\r\n                </Col>\r\n            </Row>\r\n            <EventForm event={event} saveEvent={this.props.saveEvent} deleteEvent={this.props.deleteEvent}/>\r\n        </React.Fragment>);\r\n\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = (state, props) => {\r\n    var Event = state.getIn([\"Events\", \"events\", parseInt(props.match.params.eventId)]);\r\n\treturn { Event }\r\n}\r\n\r\nconst mapDispatchToProps = { getEvent, saveEvent, deleteEvent };\r\n\r\nvar VisibleEditPage = connect(\r\n\tmapStateToProps,\r\n\tmapDispatchToProps\r\n)(editEventCheck(EditPage));\r\n\r\nexport default VisibleEditPage;\r\n\r\n","import * as React           from 'react'\r\nimport Moment          from 'moment'\r\nimport Switch          from 'react-toggle'\r\nimport update          from 'immutability-helper';\r\nimport map             from 'lodash/map'\r\nimport attendance      from '../../attendance'\r\nimport OrgansationForm from './organisationForm'\r\nimport cloneDeep       from \"lodash/cloneDeep\";\r\nimport feeFactory      from '../../../shared/fee/feeFactory'\r\nimport {\r\n    Button,\r\n    Row,\r\n    Col,\r\n    Form,\r\n    FormGroup,\r\n    Label,\r\n    Input,\r\n    Card,\r\n    CardBody,\r\n    CardTitle,\r\n    CardImg,\r\n    CardImgOverlay\r\n}                      from 'reactstrap';\r\n\r\nimport  { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport  { faLockOpen } from '@fortawesome/free-solid-svg-icons'\r\nimport  { faLock } from '@fortawesome/free-solid-svg-icons'\r\n\r\n\r\nexport default class EditForm extends React.Component<any, any> {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {};\r\n        // @ts-ignore\r\n        this.state.event = this.props.event;\r\n        // @ts-ignore\r\n        this.state.delete = false;\r\n\r\n        this.state.event.bookingPolicy = this.state.event.bookingPolicy || 'guest';\r\n        this.state.event.partialDates = this.state.event.partialDates || 'whole';\r\n        this.state.event.organisations = this.state.event.organisations || [];\r\n        this.state.event.customQuestions = this.state.event.customQuestions || {};\r\n\r\n\r\n        this.update = this.update.bind(this);\r\n        this.updateData = this.updateData.bind(this);\r\n        this.updateChecked = this.updateChecked.bind(this);\r\n        this.updatePaymentOptions = this.updatePaymentOptions.bind(this);\r\n\r\n        this.clickDeleteLock = this.clickDeleteLock.bind(this);\r\n        this.clickDelete = this.clickDelete.bind(this);\r\n        this.clickSave = this.clickSave.bind(this);\r\n        this.updateExtra = this.updateExtra.bind(this);\r\n        this.updateCustomChecked = this.updateCustomChecked.bind(this);\r\n    }\r\n\r\n    update(item) {\r\n        return e => {\r\n            this.setState(update(this.state, {event: {[item]: {$set: e.target.value}}}));\r\n        }\r\n    }\r\n\r\n    updateData(item) {\r\n        return data => {\r\n            this.setState(update(this.state, {event: {[item]: {$set: data}}}));\r\n        }\r\n    }\r\n\r\n    updateExtra(item) {\r\n        return e => {\r\n            this.setState(update(this.state, {event: {customQuestions: {[item]: {$set: e.target.value}}}}));\r\n        }\r\n    }\r\n\r\n    updateChecked(item) {\r\n        return e => {\r\n            this.setState(update(this.state, {event: {[item]: {$set: e.target.checked}}}));\r\n        }\r\n    }\r\n\r\n    updateCustomChecked(item) {\r\n        return e => {\r\n            this.setState(update(this.state, {event: {customQuestions: {[item]: {$set: e.target.checked}}}}));\r\n        }\r\n    }\r\n\r\n    updatePaymentOptions(e) {\r\n        this.setState(update(this.state, {event: {paymentTypes: {$set: e.target.value.split(\"\\n\")}}}));\r\n    }\r\n\r\n    clickDeleteLock(e) {\r\n        this.setState({delete: !this.state.delete});\r\n        e.preventDefault();\r\n    }\r\n\r\n    clickDelete(e) {\r\n        this.props.deleteEvent({id: this.props.event.id});\r\n        e.preventDefault();\r\n    }\r\n\r\n    clickSave(e) {\r\n        const state = cloneDeep(this.state.event);\r\n        state.organisations = state.organisations.map(o => {\r\n            if (typeof o.id === \"string\") delete o.id;\r\n            return o;\r\n        }); //remove temp ids\r\n        this.props.saveEvent(state);\r\n        e.preventDefault();\r\n    }\r\n\r\n    render() {\r\n\r\n        const feeOptions = [<option key={1} value=\"free\">Free</option>,\r\n            <option key={2} value=\"flat\">Flat Fee</option>,\r\n            <option key={3} value=\"ealing\">Ealing Pricing Policy</option>,\r\n            <option key={4} value=\"big\">Big Camp Policy</option>,\r\n            <option key={5} value=\"vcamp\">VCamp Policy</option>,\r\n            <option key={6} value=\"commonground\">Common Ground Policy</option>];\r\n\r\n        const attendanceOptions = map(attendance, a => <option value={a.name}\r\n                                                               key={a.name + \"key\"}>{a.selection}</option>);\r\n\r\n        const FeeConfig = feeFactory(this.state.event).Config;\r\n\r\n        const AttendanceConfig = attendance[this.state.event.partialDates].Config;\r\n\r\n        let attendanceFields: any = null;\r\n\r\n        if (this.state.event.partialDates !== 'whole' && this.state.event.partialDates !== 'free') attendanceFields = (\r\n            <FormGroup row>\r\n                <Label sm={2}>Attendance Options:</Label>\r\n                <Col sm={10}>\r\n                    <AttendanceConfig data={this.state.event.partialDatesData}\r\n                                      update={this.updateData('partialDatesData')}/>\r\n                </Col>\r\n            </FormGroup>);\r\n\r\n        let paymentFields: any = null;\r\n        let feeOptionFields: any = null;\r\n\r\n        if (this.state.event.feeModel !== \"free\") {\r\n\r\n            feeOptionFields = (\r\n                <FormGroup row>\r\n                    <Label sm={2}>Fee Options:</Label>\r\n                    <Col sm={10}>\r\n                        <FeeConfig event={this.state.event} fee={this.state.event.feeData}\r\n                                   update={this.updateData('feeData')}/>\r\n                    </Col>\r\n                </FormGroup>);\r\n\r\n            const options = this.state.event.paymentTypes.join(\"\\n\");\r\n            paymentFields = (<React.Fragment>\r\n                {formField(\"textarea\", \"Payment Options:\", options, this.updatePaymentOptions)}\r\n                {formField(\"textarea\", \"Payment Instructions:\", this.state.event.paymentInfo, this.update(\"paymentInfo\"))}\r\n                {formField(\"textarea\", \"Payment Instructions (Annon):\",  this.state.event.customQuestions.annonPayment, this.updateExtra(\"annonPayment\"))}\r\n            </React.Fragment>);\r\n        }\r\n\r\n        let organisationForm = this.state.event.organisationsEnabled ?\r\n\r\n            <Row>\r\n                <Col sm={2}>\r\n                    <Label>Organisations:</Label>\r\n                </Col>\r\n                <Col sm={10}>\r\n                    <OrgansationForm orgs={this.state.event.organisations} update={this.updateData('organisations')}/>\r\n                </Col>\r\n            </Row> : null;\r\n\r\n        let deleteButtons = this.props.new ? null : [<Button key=\"deletelock\"\r\n                                                             type=\"submit\"\r\n                                                             disabled={!this.state.delete}\r\n                                                             onClick={this.clickDelete}\r\n                                                             className=\"float-right\"\r\n                                                             color=\"danger\">\r\n            Delete</Button>,\r\n            <Button key=\"delete\"\r\n                    className=\"float-right mr-1\"\r\n                    type=\"submit\"\r\n                    color=\"danger\"\r\n                    onClick={this.clickDeleteLock}>\r\n                <span style={{color: 'white'}}><FontAwesomeIcon icon={!this.state.delete ? faLockOpen : faLock}/></span>\r\n            </Button>];\r\n\r\n\r\n        return (<Row>\r\n            <Col>\r\n                <Form>\r\n                    {formField(\"text\", \"Name:\", this.state.event.name, this.update(\"name\"), \"Event Name\")}\r\n                    {formField(\"textarea\", \"Description:\", this.state.event.description, this.update(\"description\"))}\r\n                    {formField(\"date\", \"Start Date:\", Moment(this.state.event.startDate).format(\"YYYY-MM-DD\"), this.update(\"startDate\"))}\r\n                    {formField(\"date\", \"End Date:\", Moment(this.state.event.endDate).format(\"YYYY-MM-DD\"), this.update(\"endDate\"))}\r\n                    {formField(\"date\", \"Booking Deadline:\", Moment(this.state.event.bookingDeadline).format(\"YYYY-MM-DD\"), this.update(\"bookingDeadline\"))}\r\n                    <FormGroup>\r\n                        <Label>Booking Policy:</Label>\r\n                        <Input type=\"select\" value={this.state.event.bookingPolicy}\r\n                               onChange={this.update('bookingPolicy')}>\r\n                            <option value={'guest'} key={'guest'}>Guest</option>\r\n                            <option value={'registered'} key={'registered'}>Registered</option>\r\n                            <option value={'approved'} key={'approved'}>Approved</option>\r\n                        </Input>\r\n                    </FormGroup>\r\n                    <FormGroup row>\r\n                        <Label xs={2}>Big Camp Mode:</Label>\r\n                        <Col xs={10} className=\"mt-1\">\r\n                            <Switch checked={!!this.state.event.bigCampMode}\r\n                                    onChange={this.updateChecked('bigCampMode')}/>\r\n                        </Col>\r\n                    </FormGroup>\r\n                    <FormGroup row>\r\n                        <Label xs={2}>Enable Organisations:</Label>\r\n                        <Col xs={10} className=\"mt-1\">\r\n                            <Switch checked={!!this.state.event.organisationsEnabled}\r\n                                    onChange={this.updateChecked('organisationsEnabled')}/>\r\n                        </Col>\r\n                    </FormGroup>\r\n                    {organisationForm}\r\n                    <FormGroup>\r\n                        <Label>Attendance Policy:</Label>\r\n                        <Input type=\"select\" value={this.state.event.partialDates}\r\n                               onChange={this.update('partialDates')}>\r\n                            {attendanceOptions}\r\n                        </Input>\r\n                    </FormGroup>\r\n                    {attendanceFields}\r\n                    <FormGroup>\r\n                        <Label>DoB Widget</Label>\r\n                        <Input type=\"select\" value={this.state.event.customQuestions.ageWidgets}\r\n                               onChange={this.updateExtra('ageWidgets')}>\r\n                            <option value='dob'>Date of Birth</option>\r\n                            <option value='groupings'>Age group dropdown</option>\r\n                        </Input>\r\n                    </FormGroup>\r\n                    <FormGroup>\r\n                        <Label>Fee Structure:</Label>\r\n                        <Input type=\"select\" value={this.state.event.feeModel} onChange={this.update('feeModel')}>\r\n                            {feeOptions}\r\n                        </Input>\r\n                    </FormGroup>\r\n                    {feeOptionFields}\r\n                    {paymentFields}\r\n                    {formField(\"text\", \"Extra Info Box Question\", this.state.event.customQuestions.extraQuestion, this.updateExtra(\"extraQuestion\"))}\r\n                    {formField(\"textarea\", \"Extra Info Template:\", this.state.event.customQuestions.extraTemplate, this.updateExtra(\"extraTemplate\"))}\r\n                    {formField(\"text\", \"Email Reply-to:\", this.state.event.customQuestions.emailReply, this.updateExtra(\"emailReply\"))}\r\n                    {formField(\"text\", \"Managers Email Subject Tag:\", this.state.event.customQuestions.emailSubjectTag, this.updateExtra(\"emailSubjectTag\"))}\r\n                    {switchGroup(\"Over 16 e-mail address\", this.state.event.customQuestions.adultEmail, this.updateCustomChecked('adultEmail'))}\r\n                    {switchGroup(\"Over 16 First-Aid question\", this.state.event.customQuestions.adultFirstAid, this.updateCustomChecked('adultFirstAid'))}\r\n                    {switchGroup(\"Central Food Opt Out\", this.state.event.customQuestions.foodOptOut, this.updateCustomChecked('foodOptOut'))}\r\n                    {switchGroup(\"Photo consent question\", this.state.event.customQuestions.photoConsent, this.updateCustomChecked('photoConsent'))}\r\n                    <Row>\r\n                        <Col>\r\n                            <Button color=\"success\" onClick={this.clickSave}>Save</Button>\r\n                            {deleteButtons}\r\n                        </Col>\r\n                    </Row>\r\n                </Form>\r\n            </Col>\r\n        </Row>);\r\n    }\r\n}\r\n\r\nconst formField = (type, label, value, update, placeholder: string | null = null) => (<FormGroup>\r\n    <Label for={label}>{label}</Label>\r\n    <Input type={type} name={label} placeholder={placeholder} value={value || ''} onChange={update}/>\r\n</FormGroup>);\r\n\r\nconst switchGroup = (label, value, update) => (\r\n    <FormGroup row>\r\n        <Label xs={2}>{label}:</Label>\r\n        <Col xs={10} className=\"mt-1\">\r\n            <Switch checked={!!value}\r\n                    onChange={update}/>\r\n        </Col>\r\n    </FormGroup>\r\n)","import * as React from 'react'\r\nimport {connect} from 'react-redux'\r\nimport {Link, NavLink} from 'react-router-dom'\r\nimport {push} from 'react-router-redux'\r\nimport ReactMarkdown from 'react-markdown'\r\nimport Moment from 'moment'\r\n\r\nimport {getEvents} from '../actions'\r\nimport {\r\n    showEditLink,\r\n    showCreateLink,\r\n    showBookLink,\r\n    showManageLink,\r\n    showApplyToBookLink,\r\n    showBookingEditLink\r\n} from '../permission'\r\nimport {getUserBookings} from '../../bookings/actions' //deep import, bad cause circular..\r\nimport {applyToBookEvent, manageEvent, bookEvent} from '../../../shared/permissions'\r\n\r\nimport {\r\n    Button,\r\n    Row,\r\n    Col,\r\n    Card,\r\n    CardBody,\r\n    CardTitle,\r\n    CardSubtitle,\r\n    CardImg\r\n} from 'reactstrap';\r\n\r\nimport feeFactory           from '../../../shared/fee/feeFactory'\r\nimport paymentReference from \"../../../shared/paymentReference\";\r\n\r\n//Event listing\r\n\r\nclass EventList extends React.Component<any, any> {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.clickCreate = this.clickCreate.bind(this);\r\n    }\r\n\r\n    clickCreate(e) {\r\n        e.preventDefault();\r\n        // @ts-ignore\r\n        dispatch(push('/event/create'));\r\n    }\r\n\r\n    render() {\r\n        const user = this.props.User.toJS();\r\n        let events = this.props.Events.toSet()\r\n            .filter(e => new Date(e.get(\"startDate\")) > new Date())\r\n            .sort((a, b) => a.get(\"startDate\").localeCompare(b.get(\"startDate\")))\r\n            .map((e) =>\r\n                <Event User={user} {...e.toJS()} key={e.get(\"id\")}/>)\r\n            .toArray();\r\n\r\n        let previousEvents = this.props.Events.toSet().filter(e => manageEvent(user, e.toJS()) && new Date(e.get(\"startDate\")) < new Date())\r\n            .sort((a, b) => a.get(\"startDate\").localeCompare(b.get(\"startDate\")) * -1)\r\n            .map((e) =>\r\n                <Event User={user} {...e.toJS()} key={e.get(\"id\")}/>)\r\n            .toArray();\r\n\r\n\r\n        return (<React.Fragment>\r\n            <Row>\r\n                <Col>\r\n                    {events}\r\n                </Col>\r\n            </Row>\r\n            { previousEvents.length > 0 ? <React.Fragment>\r\n            <Row>\r\n                <Col>\r\n                    <h4>Previous Events</h4>\r\n                </Col>\r\n            </Row>\r\n            <Row>\r\n                <Col>\r\n                    {previousEvents}\r\n                </Col>\r\n            </Row>\r\n            </React.Fragment> : null }\r\n            <Row>\r\n                <Col>\r\n                    <CreateButton clickCreate={this.clickCreate}/>\r\n                </Col>\r\n            </Row>\r\n        </React.Fragment>);\r\n\r\n    }\r\n}\r\n\r\nconst CreateButton = showCreateLink((props) => <Button color=\"success\" onClick={props.clickCreate}>New\r\n    Event</Button>);\r\n\r\n\r\nconst Event = (props) => {\r\n\r\n\r\n    const EditLink = showEditLink(() => <NavLink event={props} to={\"/event/\" + props.id + \"/edit\"}>Edit</NavLink>);\r\n    const ManageLink = showManageLink(() => <NavLink to={\"/event/\" + props.id + \"/manage\"}>Manage</NavLink>);\r\n    const EditApplyButton = getEditApplyButton(props.User, props);\r\n\r\n    return (<Card className=\"mb-3\">\r\n        <CardImg top src=\"/event-header.jpg\" alt=\"Card image cap\"/>\r\n        <CardBody>\r\n            <EditApplyButton event={props} booking={props.booking}/>\r\n            <CardTitle>{props.name}</CardTitle>\r\n            <CardSubtitle>{Moment(props.startDate).format('Do')} - {Moment(props.endDate).format('Do MMMM YYYY')}</CardSubtitle>\r\n            <br />\r\n            {props.booking ? <MyBookingDisplay event={props} booking={props.booking} /> : null }\r\n            <ReactMarkdown  children={props.description}/>\r\n            <div className=\"float-right\">\r\n                <EditLink event={props}/>\r\n                {\" \"}\r\n                <ManageLink event={props}/>\r\n            </div>\r\n        </CardBody>\r\n    </Card>);\r\n};\r\n\r\nconst MyBookingDisplay = props => {\r\n\r\n    const fees = feeFactory(props.event);\r\n    const paymentText = props.event.paymentInfo.replace(/(%%%%)/g, paymentReference(props.booking.id));\r\n    return <React.Fragment>\r\n        <h5>My booking</h5>\r\n        <p>You have booked {props.booking.participants.length} participant{props.booking.participants.length > 1 ? 's' :''} into this event.</p>\r\n        <fees.ThanksRow\r\n            event={props.event}\r\n            booking={props.booking}/>\r\n        <ReactMarkdown  children={paymentText}/>\r\n    </React.Fragment>\r\n};\r\n\r\nconst getEditApplyButton = (user, event) => {\r\n    if (event.bookingPolicy !== 'guest' && user.id === 1)\r\n        return () => <Link to={\"/user\"}\r\n                           className=\"btn btn-primary float-right\">Log in to Book</Link>;\r\n\r\n    if (event.booking !== undefined) {\r\n        return showBookingEditLink(() => <Link to={\"/booking/\" + event.booking.id + \"/edit\"}\r\n                                               className=\"btn btn-primary float-right\">Edit\r\n            My Booking</Link>)\r\n    }\r\n    if (applyToBookEvent(user, event)) {\r\n        return showApplyToBookLink(() => <Link to={\"/event/\" + event.id + \"/apply\"}\r\n                                               className=\"btn btn-primary float-right\">Apply to book</Link>);\r\n    }\r\n    if (event.application !== undefined) {\r\n        return () => <button className=\"btn btn-primary float-right disabled\" disabled>Applied</button>;\r\n    }\r\n\r\n    if(bookEvent(user, event)) {\r\n        return showBookLink(() => <Link to={\"/event/\" + event.id + \"/book\"}\r\n                                        className=\"btn btn-primary float-right\">Book</Link>)\r\n    }\r\n\r\n    return () => <button className=\"btn btn-primary float-right disabled\" disabled>Booking Closed</button>;\r\n};\r\n\r\n\r\n//Connect to redux\r\n\r\nconst mapStateToProps = (state) => {\r\n\r\n    const User = state.getIn([\"User\", \"user\"]);\r\n    const userId = User.get(\"id\");\r\n    let Events = state.getIn([\"Events\", \"events\"]);\r\n    const Bookings = state.getIn([\"Bookings\", \"bookings\"]);\r\n    Events = Events.map(e => {\r\n        e = e.set(\"booking\", Bookings.find(b => b.get(\"eventId\") === e.get('id') && b.get(\"userId\") === userId));\r\n        return e.set(\"application\", User.get(\"applications\").find(a => a.get('eventId') === e.get('id')));\r\n    });\r\n    return {User, Events};\r\n}\r\n\r\n\r\nconst mapDispatchToProps = {\r\n    getEvents: getEvents,\r\n    getUserBookings: getUserBookings\r\n};\r\n\r\nvar VisibleEventList = connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(EventList);\r\n\r\nexport default VisibleEventList;","import * as React from 'react'\r\nimport update from 'immutability-helper';\r\nimport {\r\n    Button,\r\n    Row,\r\n    Col,\r\n    Form,\r\n    FormGroup,\r\n    Label,\r\n    Input,\r\n    Card,\r\n    CardBody,\r\n    CardTitle,\r\n    CardImg,\r\n    CardImgOverlay\r\n} from 'reactstrap';\r\n\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport { faTimes } from '@fortawesome/free-solid-svg-icons'\r\n\r\nlet orgkey = 0;\r\n\r\nexport default class OrganisationForm extends React.Component<any, any> {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.update = this.update.bind(this);\r\n        this.delete = this.delete.bind(this);\r\n        this.add = this.add.bind(this);\r\n\r\n        this.state = {};\r\n        // @ts-ignore\r\n        this.state.orgs = this.props.orgs || [{id: 'TEMP'}]\r\n    }\r\n\r\n    componentWillReceiveProps(nextProps) {\r\n        this.setState(update(this.state, {orgs: {$set: (nextProps.orgs || [{id: 'TEMP'}])}}))\r\n    }\r\n\r\n    update(id) {\r\n        return e => {\r\n            const org = this.state.orgs.find(o => o.id === id);\r\n            org.name = e.target.value;\r\n            this.props.update(this.state.orgs);\r\n            e.preventDefault()\r\n        }\r\n    }\r\n\r\n    delete(id) {\r\n        return e => {\r\n            const orgs = this.state.orgs.filter(o => o.id !== id);\r\n            this.props.update(orgs);\r\n            e.preventDefault()\r\n        }\r\n    }\r\n\r\n    add(e) {\r\n        this.state.orgs.push({id: \"temp\" + orgkey});\r\n        orgkey++;\r\n        this.props.update(this.state.orgs);\r\n        e.preventDefault()\r\n    }\r\n\r\n    render() {\r\n        const orgRows = this.state.orgs.map(o => <OrgRow key={o.id} org={o} update={this.update}\r\n                                                         delete={this.delete}/>);\r\n        return (\r\n            <React.Fragment>\r\n                {orgRows}\r\n                <Row>\r\n                    <Col>\r\n                        <Button type=\"submit\" color=\"success\" onClick={this.add}>Add</Button>\r\n                    </Col>\r\n                </Row>\r\n            </React.Fragment>\r\n        );\r\n    }\r\n}\r\n\r\nconst OrgRow = props =>\r\n    <FormGroup row>\r\n        <Col sm={10}>\r\n            <Input type=\"text\" value={props.org.name || ''}\r\n                   onChange={props.update(props.org.id)}\r\n                   placeholder=\"Organisation Name\"/>\r\n        </Col>\r\n        <Col>\r\n            {typeof props.org.id === 'string' ? 'Save to view' : props.org.id}\r\n        </Col>\r\n        <Col>\r\n            <Button type=\"submit\" onClick={props.delete(props.org.id)} color=\"warning\">\r\n                <span style={{color: 'white'}}><FontAwesomeIcon icon={faTimes}/></span>\r\n            </Button>\r\n        </Col>\r\n    </FormGroup>;\r\n","import * as actions from './actions'\r\nimport reducer from './reducer'\r\n\r\nimport listPage from './components/listPage'\r\nimport createPage from './components/createPage'\r\nimport editPage from './components/editPage'\r\n\r\nexport { actions, reducer, listPage, createPage, editPage };","import {connectedReduxRedirect, connectedRouterRedirect} from 'redux-auth-wrapper/history4/redirect'\r\nimport connectedAuthWrapper from 'redux-auth-wrapper/connectedAuthWrapper'\r\n\r\nimport * as P from '../../shared/permissions'\r\n\r\nexport const editEventCheck = connectedRouterRedirect({\r\n\tauthenticatedSelector: (state, props) => {\r\n\t\tif (props.event === undefined) return true;\r\n        return P.editEvent(state.getIn([\"User\", \"user\"]).toJS(), state.getIn([\"Events\", \"event\", parseInt(props.match.params.eventId)]).toJS());\r\n\t},\r\n\tredirectPath: \"/user\",\r\n\twrapperDisplayName: \"Edit Event Check\"\r\n});\r\n\r\nexport const createEventCheck = connectedRouterRedirect({\r\n\tauthenticatedSelector: (state, props) => {\r\n        return P.createEvent(state.getIn([\"User\", \"user\"]).toJS());\r\n\t},\r\n\tredirectPath: \"/user\",\r\n\twrapperDisplayName: \"Create Event Check\"\r\n});\r\n\r\nexport const showEditLink = connectedAuthWrapper({\r\n\tauthenticatedSelector: (state, props) => {\r\n        return P.editEvent(state.getIn([\"User\", \"user\"]).toJS(), props.event);\r\n\t},\r\n\twrapperDisplayName: \"showEventEditLink\"\r\n});\r\n\r\nexport const showCreateLink = connectedAuthWrapper({\r\n\tauthenticatedSelector: (state) => {\r\n        return P.createEvent(state.getIn([\"User\", \"user\"]).toJS());\r\n\t},\r\n\twrapperDisplayName: \"showEventCreateLink\"\r\n});\r\n\r\nexport const showBookLink = connectedAuthWrapper({\r\n\tauthenticatedSelector: (state, props) => {\r\n        return P.bookEvent(state.getIn([\"User\", \"user\"]).toJS(), props.event);\r\n\t},\r\n\twrapperDisplayName: \"showBookLink\"\r\n});\r\n\r\nexport const showBookingEditLink = connectedAuthWrapper({\r\n    authenticatedSelector: (state, props) => {\r\n        return P.editBooking(state.getIn([\"User\", \"user\"]).toJS(), props.event, props.booking);\r\n    },\r\n    wrapperDisplayName: \"showBookLink\"\r\n});\r\n\r\nexport const showApplyToBookLink = connectedAuthWrapper({\r\n    authenticatedSelector: (state, props) => {\r\n        return P.applyToBookEvent(state.getIn([\"User\", \"user\"]).toJS(), props.event);\r\n    },\r\n    wrapperDisplayName: \"showApplyToBookLink\"\r\n});\r\n\r\nexport const showManageLink = connectedAuthWrapper({\r\n\tauthenticatedSelector: (state, props) => {\r\n\t\tif (props.event === undefined) return true;\r\n        return P.manageEvent(state.getIn([\"User\", \"user\"]).toJS(), props.event);\r\n\t},\r\n\twrapperDisplayName: \"showManageLink\"\r\n});","import * as Immutable from 'immutable'\r\nimport * as a from './actions'\r\nimport * as user from '../user'\r\n\r\n\r\n//should Events be a map or list? both suck sometimes..\r\nconst initalEventState = Immutable.fromJS({events: {}});\r\n\r\n\r\n//return state.set(\"bookings\", action.bookings.reduce((a,c) => {a.set(c.id,Immutable.fromJS(c))}, state.get(\"bookings\") || Immutable.Map()));\r\nexport default function Events(state = initalEventState, action) {\r\n\r\n    switch (action.type) {\r\n        case a.UPDATE_EVENTS:\r\n            return state.set(\"events\", action.events.reduce((a, c) => {\r\n                console.log(\"updating events in UPDATE_EVENTS\");\r\n                return a.set(c.id, Immutable.fromJS(c))\r\n            }, state.get(\"events\") || Immutable.fromJS({})));\r\n        case a.REMOVE_EVENT:\r\n            return state.deleteIn([\"events\", action.id]);\r\n        case user.actions.UPDATE_USER:\r\n            console.log(\"WIPING EVENTS DUE TO USE UPDATE\")\r\n            return state.set(\"events\", null);\r\n    }\r\n    return state;\r\n}","//Long Story, could use some fixing,  we should actually do XSFR sometimes\r\n\r\nimport * as Cookies from 'js-cookie'\r\n\r\nexport default function rfetch(url, method, data?) {\r\n\r\n\tvar options = {\r\n\t\tmethod: method,\r\n\t\theaders: {\r\n\t\t\t\"Content-type\": \"application/json; charset=UTF-8\"\r\n\t\t},\r\n\t\tcredentials: \"same-origin\",\r\n\t};\r\n\r\n\tif (method === \"POST\") {\r\n\t\toptions.headers[\"X-XSRF-TOKEN\"] = Cookies.get(\"XSRF-TOKEN\");\r\n\t}\r\n\tif (typeof (data) !== \"undefined\") { // @ts-ignore\r\n\t\toptions.body = JSON.stringify(data);\r\n\t}\r\n\r\n\t// @ts-ignore\r\n\treturn fetch(url, options).then(handleErrors)\r\n}\r\n\r\nrfetch.fail = (error) => console.log('fail', error)\r\n\r\nfunction handleErrors(response) {\r\n\tif (response.status == 401) {\r\n\t\tresponse.json().then(j => {\r\n\t\t\t// @ts-ignore\r\n\t\t\tdispatch({ type: \"MESSAGE_SET_WARNING_MESSAGE\", message: \"401 Unauthorised on \" + response.url+ \" - \" + j.message });\r\n\t\t\tthrow Error(\"401 Unauthorised on \" + response.url);\r\n\t})\r\n\t} else if (!response.ok) {\r\n\t\t// @ts-ignore\r\n\t\tdispatch({ type: \"MESSAGE_SET_WARNING_MESSAGE\", message: \"Error \" + response.status + \"\" + response.url });\r\n\t\tthrow Error(\"Error \" + response.status + \"\" + response.url);\r\n\t} else return response.json()\r\n}","import 'bootstrap/dist/css/bootstrap.css';\r\nimport './lib/react-selectize/index.css';\r\n\r\nimport * as React from 'react';\r\nimport { render } from 'react-dom'\r\nimport { Provider } from 'react-redux'\r\n\r\nimport Routes from './routes'\r\n\r\nimport {createStore, applyMiddleware, compose} from 'redux'\r\nimport thunk from 'redux-thunk';\r\nimport * as Immutable from 'immutable'\r\nimport { combineReducers } from 'redux-immutable';\r\nimport {ConnectedRouter, routerReducer, routerMiddleware} from 'react-router-redux'\r\nimport * as History from 'history'\r\n\r\nimport fetch from './fetch'\r\n\r\nimport * as user from './user'\r\nimport * as messages from './messages'\r\nimport * as events from './events'\r\nimport * as bookings from './bookings'\r\n\r\nconst history = History.createBrowserHistory()\r\n\r\nconst middleware = routerMiddleware(history);\r\n\r\nclass ErrorBoundary extends React.Component<any, any> {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = { hasError: false };\r\n    }\r\n\r\n    static getDerivedStateFromError(error) {\r\n        // Update state so the next render will show the fallback UI.\r\n        return { hasError: true };\r\n    }\r\n\r\n    componentDidCatch(error, info) {\r\n        // You can also log the error to an error reporting service\r\n        try {\r\n            const jsonMessage = {\r\n                message: error.message,\r\n                file: '',\r\n                line: 0,\r\n                column: 0,\r\n                stack: info.componentStack,\r\n                location: window.location.href\r\n            };\r\n\r\n            const jsonString = JSON.stringify(jsonMessage);\r\n\r\n            const options = {\r\n                method: 'POST',\r\n                headers: {\r\n                    \"Content-type\": \"application/json; charset=UTF-8\"\r\n                },\r\n                credentials: \"same-origin\",\r\n                body: jsonString\r\n            };\r\n            // @ts-ignore\r\n            window.fetch('/api/error', options)\r\n        } catch (e) {\r\n            console.error(e)\r\n            // ah well we tried\r\n        }\r\n    }\r\n\r\n    render() {\r\n        if (this.state.hasError) {\r\n            return <p>Something went wrong, refreshing the page may help.</p>;\r\n        }\r\n\r\n        return this.props.children;\r\n    }\r\n}\r\n\r\nconst appReducer = (state = 'dev', action) => {\r\n    switch (action.type) {\r\n        case 'APP_UPDATE_ENV':\r\n            return action.env;\r\n    }\r\n    return state;\r\n};\r\n\r\n\r\nconst rootReducer = combineReducers({\r\n    App: appReducer,\r\n    User: user.reducer,\r\n    Messages: messages.reducer,\r\n    Events: events.reducer,\r\n    Bookings: bookings.reducer,\r\n    router: routerReducer\r\n});\r\n\r\n// @ts-ignore\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\nconst store = createStore(rootReducer, Immutable.Map(), composeEnhancers(applyMiddleware(thunk, middleware)));\r\nconst provider = <Provider store={store}><ConnectedRouter history={history}>{Routes}</ConnectedRouter></Provider>;\r\n\r\n//console.log( document.getElementById('root'));\r\n\r\n/*****************************\r\n * This following line is very very bad but we want to be able to dispatch from fetch...\r\n *****************************/\r\n\r\n// @ts-ignore\r\nwindow.dispatch = store.dispatch;\r\n\r\nrender(<ErrorBoundary>{provider}</ErrorBoundary>, document.getElementById('root'));\r\n\r\nlet hidden, visibilityChange;\r\nif (typeof document.hidden !== \"undefined\") { // Opera 12.10 and Firefox 18 and later support\r\n    hidden = \"hidden\";\r\n    visibilityChange = \"visibilitychange\";\r\n} else { // @ts-ignore\r\n    if (typeof document.msHidden !== \"undefined\") {\r\n        hidden = \"msHidden\";\r\n        visibilityChange = \"msvisibilitychange\";\r\n    } else { // @ts-ignore\r\n        if (typeof document.webkitHidden !== \"undefined\") {\r\n            hidden = \"webkitHidden\";\r\n            visibilityChange = \"webkitvisibilitychange\";\r\n        }\r\n    }\r\n}\r\n\r\nif (!(typeof document.addEventListener === \"undefined\" || hidden === undefined)) {\r\n    document.addEventListener(visibilityChange, () => {\r\n        console.log(`Visibility change ${document[hidden]} ${document.visibilityState}`);\r\n        if (!document[hidden]) {\r\n            // @ts-ignore\r\n            dispatch(user.actions.getUser())\r\n        }\r\n    }, false);\r\n}\r\n\r\n// @ts-ignore\r\nfetch('/api/env', \"GET\").then(j => dispatch({type: 'APP_UPDATE_ENV', env: j.env}));","import fetch            from '../fetch'\r\nimport {updateBookings} from '../bookings/actions'\r\nimport {updateEvents}   from '../events/actions'\r\n\r\nexport const TOGGLE_PAID = \"MANAGE_TOGGLE_PAID\";\r\n\r\nexport const togglePaid = (id) => {\r\n    return dispatch => {\r\n        fetch('/api/booking/paid', \"POST\", {id: id})\r\n        .then(j => {\r\n            dispatch(updateBookings(j));\r\n        })\r\n    }\r\n};\r\n\r\nexport const approve = (id, org, note) => {\r\n    return dispatch => {\r\n        fetch('/api/application/approve', \"POST\", {id: id, org: org, note: note})\r\n        .then(j => {\r\n            dispatch(updateEvents(j));\r\n        })\r\n    }\r\n};\r\n\r\nexport const decline = (id) => {\r\n    return dispatch => {\r\n        fetch('/api/application/decline', \"POST\", {id: id})\r\n        .then(j => {\r\n            dispatch(updateEvents(j));\r\n        })\r\n    }\r\n};\r\n\r\nexport const LOCAL_ASSIGN_VILLAGE = \"MANAGE_LOCAL_ASSIGN_VILLAGE\";\r\n\r\nconst localAssignVillage = (bookingId, villageId) => {\r\n    return {\r\n        type:      LOCAL_ASSIGN_VILLAGE,\r\n        bookingId: bookingId,\r\n        villageId: villageId\r\n    }\r\n};\r\n\r\nexport const addVillage = data => dispatch => {\r\n    fetch('/api/village/create', \"POST\", data)\r\n    .then(j => {\r\n        dispatch(updateEvents(j));\r\n    });\r\n};\r\n\r\nexport const deleteVillage = id => dispatch => {\r\n    fetch('/api/village/delete', \"POST\", {id: id})\r\n    .then(j => {\r\n        dispatch(updateEvents(j));\r\n        dispatch(updateBookings(j));\r\n    });\r\n};\r\n\r\nexport const renameVillage = (id, name) => dispatch => {\r\n    fetch('/api/village/rename', \"POST\", {id: id, name: name})\r\n        .then(j => {\r\n            dispatch(updateEvents(j));\r\n            dispatch(updateBookings(j));\r\n        });\r\n};\r\n\r\nexport const assignVillage = (bookingId, villageId) => dispatch => {\r\n    fetch('/api/village/assign', \"POST\", {bookingId: bookingId, villageId: villageId})\r\n    .then(j => {\r\n        dispatch(updateBookings(j));\r\n    });\r\n    dispatch(localAssignVillage(bookingId, villageId))\r\n};\r\n\r\nexport const addRole = role => dispatch => {\r\n    fetch('/api/role/create', \"POST\", role)\r\n    .then(j => dispatch(updateEvents(j)))\r\n};\r\n\r\nexport const deleteRole = id => dispatch => {\r\n    fetch('/api/role/delete', \"POST\", {id: id})\r\n    .then(j => dispatch(updateEvents(j)))\r\n};\r\n\r\nexport const addPayment = payment => dispatch => {\r\n    fetch('/api/payment/add', 'POST', payment)\r\n        .then(j => dispatch(updateBookings(j)))\r\n};\r\n\r\nexport const deletePayment = payment => dispatch => {\r\n    fetch('/api/payment/delete', 'POST', payment)\r\n        .then(j => dispatch(updateBookings(j)))\r\n}\r\n\r\nexport const syncMax = id => dispatch => {\r\n    fetch('/api/booking/syncMax', 'POST', {bookingId: id})\r\n        .then(j => dispatch(updateBookings(j)))\r\n}\r\n\r\nexport const approveMembership = id => dispatch => {\r\n    fetch('/api/membership/approve', 'POST', id)\r\n        .then(j => dispatch(updateBookings(j)))\r\n};\r\n\r\nexport const unapproveMembership = id => dispatch => {\r\n    fetch('/api/membership/unapprove', 'POST', id)\r\n        .then(j => dispatch(updateBookings(j)))\r\n};\r\n\r\nexport const approveDBS = id => dispatch => {\r\n    fetch('/api/dbs/approve', 'POST', id)\r\n        .then(j => dispatch(updateBookings(j)))\r\n};\r\n\r\nexport const unapproveDBS = id => dispatch => {\r\n    fetch('/api/dbs/unapprove', 'POST', id)\r\n        .then(j => dispatch(updateBookings(j)))\r\n};\r\n","import * as React from 'react'\r\nimport Moment from 'moment'\r\nimport update from 'immutability-helper';\r\n\r\nimport {\r\n    Row,\r\n    Col,\r\n    Button,\r\n    Card,\r\n    CardBody,\r\n    CardTitle,\r\n    FormGroup,\r\n    Input,\r\n    Label\r\n} from 'reactstrap';\r\n\r\n//import bookings from '../bookings'\r\n//import { manageEventCheck } from '../permission.ts'\r\n\r\nimport ReactMarkdown from \"react-markdown\"\r\n\r\nexport default class Applications extends React.Component<any, any> {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {organisations: {}, notes: {}};\r\n\r\n        const event = this.props.Event.toJS();\r\n\r\n        (event.applications || []).map(a => {\r\n            this.state.notes[a.id] = a.message;\r\n            console.log(a.messsage)\r\n        });\r\n\r\n        this.approve = this.approve.bind(this);\r\n        this.decline = this.decline.bind(this);\r\n        this.setOrganisation = this.setOrganisation.bind(this);\r\n        this.updateNote = this.updateNote.bind(this);\r\n    }\r\n\r\n    approve(id) {\r\n        return e => {\r\n            let org = this.state.organisations[id];\r\n            org = parseInt(org) ? parseInt(org) : null; //cast undefined/\"any\" to null, string from event to number\r\n            this.props.approve(id, org, this.state.notes[id]);\r\n            e.preventDefault()\r\n        }\r\n    }\r\n\r\n    decline(id) {\r\n        return e => {\r\n            this.props.decline(id);\r\n            e.preventDefault();\r\n\r\n        }\r\n    }\r\n\r\n    setOrganisation(id) {\r\n        return e => {\r\n            this.setState(update(this.state, {organisations: {[id]: {$set: e.target.value}}}));\r\n            e.preventDefault()\r\n        }\r\n    }\r\n\r\n    updateNote(id) {\r\n        return e => {\r\n            this.setState(update(this.state, {notes: {[id]: {$set: e.target.value}}}));\r\n            e.preventDefault()\r\n        }\r\n    }\r\n\r\n    render() {\r\n\r\n        const event = this.props.Event.toJS();\r\n\r\n        const apps = (event.applications || []).map(a => <ApplicationRow\r\n            key={a.id}\r\n            application={a}\r\n            event={event}\r\n            organisation={this.state.organisations[a.id]}\r\n            note={this.state.notes[a.id]}\r\n            approve={this.approve(a.id)}\r\n            decline={this.decline(a.id)}\r\n            setOrganisation={this.setOrganisation(a.id)}\r\n            updateNote={this.updateNote(a.id)}\r\n        />);\r\n\r\n        return (<div>\r\n            <h4>Approve or decline applications to book:</h4>\r\n            {apps}\r\n        </div>)\r\n    }\r\n}\r\n\r\nconst ApplicationRow = props => {\r\n\r\n    let approveText: any = null;\r\n\r\n    if (props.event.organisationsEnabled) {\r\n\r\n        const options = props.event.organisations.map(o => <option key={o.id} value={o.id}>{o.name}</option>);\r\n\r\n        approveText = <FormGroup>\r\n            <Label>Approve user to book into Organisation:</Label>\r\n            <Input type=\"select\" id=\"orgSelect\" value={props.organisation || 'any'}\r\n                   onChange={props.setOrganisation}>\r\n                {options}\r\n            </Input>\r\n        </FormGroup>\r\n\r\n    } else {\r\n        approveText = <p>Approve user to book into this event:</p>\r\n    }\r\n\r\n    return (<Card className=\"mb-1\">\r\n        <CardBody>\r\n            <CardTitle>\r\n                <b>{props.application.user.userName}</b> ({props.application.user.email})\r\n                - {Moment(props.application.createdAt).fromNow()}\r\n            </CardTitle>\r\n            <Row>\r\n                <Col sm={7}>\r\n                    <ReactMarkdown  children={props.application.message}/>\r\n                </Col>\r\n                <Col sm={5}>\r\n                    {approveText}\r\n                    <FormGroup>\r\n                        <Label>\r\n                            Note:\r\n                        </Label>\r\n\r\n                            <Input\r\n                                type=\"textarea\"\r\n                                rows={7}\r\n                                value={props.note || ''}\r\n                                onChange={props.updateNote}\r\n                            />\r\n\r\n                    </FormGroup>\r\n                    <FormGroup row>\r\n                        <Col>\r\n                            <Button type=\"submit\" color=\"success\" onClick={props.approve}>Approve\r\n                            </Button>\r\n                            <Button type=\"submit\" color=\"danger\" className=\"ml-2\" onClick={props.decline}>Decline\r\n                            </Button>\r\n                        </Col>\r\n                    </FormGroup>\r\n                </Col>\r\n            </Row>\r\n        </CardBody>\r\n    </Card>);\r\n\r\n    return (<div className=\"col-sm-12\">\r\n            <div className=\"panel panel-default\">\r\n                <div className=\"panel-heading\">\r\n                    <h3 className=\"panel-title\"><b>{props.application.user.userName}</b> ({props.application.user.email})\r\n                        - {Moment(props.application.createdAt).fromNow()}</h3>\r\n                </div>\r\n                <div className=\"panel-body\">\r\n                    <div className=\"row\">\r\n                        <div className=\"col-sm-7\"><p>{props.application.message}</p></div>\r\n                        <div className=\"col-sm-5\">\r\n                            {approveText}\r\n                            <div className=\"btn-toolbar float-right\">\r\n                                <button type=\"submit\" className=\"btn btn-success\" onClick={props.approve}>Approve\r\n                                </button>\r\n                                <button type=\"submit\" className=\"btn btn-danger\" onClick={props.decline}>Decline\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n};\r\n\r\n\r\n","import * as React      from 'react'\r\nimport csv        from 'csv-file-creator'\r\nimport ReactTable from 'react-table'\r\nimport Moment     from 'moment'\r\nimport update     from 'immutability-helper';\r\nimport map        from 'lodash/map'\r\n\r\n//import bookings from '../bookings'\r\n//import { manageEventCheck } from '../permission.ts'\r\n\r\nimport {\r\n    Row,\r\n    Col,\r\n    Button,\r\n    Card,\r\n    CardBody,\r\n    CardTitle,\r\n    CardSubtitle,\r\n} from 'reactstrap';\r\n\r\nimport ageFactory from \"../../age\";\r\n\r\nexport default class Birthdays extends React.Component<any, any> {\r\n    private ageWidgets: { BookingFormWidget: (props) => JSX.Element; displayAgeParticipant: (p) => string; participantCardField: (p) => JSX.Element; displayAgeCSV: (p) => string; displayAgeMoment: (age, event) => string } | { BookingFormWidget: (props) => JSX.Element; displayAgeParticipant: (p) => any; participantCardField: (p) => JSX.Element; displayAgeCSV: (p) => string; displayAgeMoment: (age, event) => any };\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.ageWidgets = ageFactory(this.props.Event.toJS());\r\n    }\r\n\r\n    shouldComponentUpdate(nextProps, nextState) {\r\n        //rerendering the tables suck, lets not do it.\r\n        //if (this.state !== nextState) return true;\r\n        //return !this.props.Bookings.equals(nextProps.Bookings);\r\n        return true;\r\n    }\r\n\r\n    componentWillReceiveProps() {\r\n    }\r\n\r\n    render() {\r\n\r\n        const event = this.props.Event.toJS();\r\n        const bookings = this.props.bookings;\r\n        const participants = this.props.participants;\r\n\r\n        const startDate = Moment.utc(event.startDate).startOf('day');\r\n        const endDate = Moment.utc(event.endDate).startOf('day').add(1, 'days');\r\n        const days = [];\r\n\r\n\r\n        for (let m = startDate; m.isBefore(endDate); m.add(1, 'days')) {\r\n\r\n            let rows = []\r\n            participants.forEach(p => {\r\n\r\n                const bday = Moment(p.age);\r\n                if (m.date() === bday.date() && m.month() === bday.month()) {\r\n\r\n                    const age = Moment(m).add(1, 'days').diff(bday, 'years');//@ts-ignore\r\n                    if (age < 22) rows.push(<p key={p.id}>{p.name} ({age})</p>);//@ts-ignore\r\n                    else rows.push(<p key={p.id}>{p.name}</p>);\r\n                }\r\n\r\n\r\n            });\r\n\r\n            // @ts-ignore\r\n            days.push(<React.Fragment key={m}>\r\n                <h5>{m.format('dddd Do')}</h5>\r\n                {rows}\r\n            </React.Fragment>)\r\n        }\r\n\r\n        return (<React.Fragment>\r\n            <Row>\r\n                <Col>\r\n                    {days}\r\n                </Col>\r\n            </Row>\r\n        </React.Fragment>);\r\n    }\r\n}\r\n\r\n\r\n","import * as React      from 'react'\r\nimport {Link}     from 'react-router-dom'\r\nimport ReactTable from 'react-table'\r\nimport Moment     from 'moment'\r\nimport 'moment/locale/en-gb'\r\nimport csv        from 'csv-file-creator'\r\nimport update     from \"immutability-helper\"\r\n//import Switch from 'react-toggle'\r\n\r\n//import bookings from '../bookings'\r\nimport {showBookingEditLink} from '../permission'\r\n\r\nimport {\r\n    Row,\r\n    Col,\r\n    Button,\r\n    Card,\r\n    CardBody,\r\n    CardTitle,\r\n    Table\r\n}                 from 'reactstrap';\r\nimport ageFactory from \"../../age\";\r\nimport feeFactory from \"../../../shared/fee/feeFactory\";\r\n\r\nMoment.locale('en-gb');\r\n\r\n\r\nexport default class Bookings extends React.Component<any, any> {\r\n    private ageWidgets: { BookingFormWidget: (props) => JSX.Element; displayAgeParticipant: (p) => string; participantCardField: (p) => JSX.Element; displayAgeCSV: (p) => string; displayAgeMoment: (age, event) => string } | { BookingFormWidget: (props) => JSX.Element; displayAgeParticipant: (p) => any; participantCardField: (p) => JSX.Element; displayAgeCSV: (p) => string; displayAgeMoment: (age, event) => any };\r\n    private getFeesOwed: any;\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.ageWidgets = ageFactory(this.props.Event.toJS());\r\n        this.state = {expanded: null};\r\n\r\n        this.markPaid = this.markPaid.bind(this);\r\n        this.exportCSV = this.exportCSV.bind(this);\r\n        this.updateExpanded = this.updateExpanded.bind(this);\r\n    }\r\n\r\n    shouldComponentUpdate(nextProps, nextState) {\r\n        //rerendering the tables suck, lets not do it.\r\n        //if (this.state !== nextState) return true;\r\n        //return !this.props.Bookings.equals(nextProps.Bookings);\r\n        return true;\r\n    }\r\n\r\n    componentWillReceiveProps() {\r\n        this.setState(update(this.state, {expanded: {$set: null}}));\r\n    }\r\n\r\n    updateExpanded(id) {\r\n        return e => {\r\n            if (id === this.state.expanded) this.setState(update(this.state, {expanded: {$set: null}}));\r\n            else this.setState(update(this.state, {expanded: {$set: id}}));\r\n        }\r\n    }\r\n\r\n    exportCSV() {\r\n\r\n        const event = this.props.Event.toJS();\r\n\r\n        this.getFeesOwed = feeFactory(event).getFeesOwed;\r\n\r\n        const exportedData = this.props.bookings.map(b => {\r\n\r\n            let owed = this.getFeesOwed(event, b.participants, b).reduce((a, c) => parseFloat(c.total) + a, 0);\r\n            const paid = b.payments ? b.payments.filter(p => p.type === 'payment').reduce((a, c) => a + parseFloat(c.amount), 0) : 0;\r\n\r\n            owed = b.payments ? b.payments.filter(p => p.type === 'adjustment').reduce((a, c) => a + parseFloat(c.amount), owed) : owed;\r\n\r\n            return [b.id,\r\n            b.userName,\r\n            b.district,\r\n            b.userEmail,\r\n            b.userContact,\r\n            b.participants.length,\r\n            b.paymentType,\r\n            b.emergencyName,\r\n            b.emergencyPhone,\r\n            b.note,\r\n                '£' + owed,\r\n                '£' + paid,\r\n                '£' + (owed - paid),\r\n            b.createdAt,\r\n                b.updatedAt]\r\n        });\r\n        const fileName = this.props.Event.get('name') + \"-Bookings-\" + Moment().format('YYYY-MM-DD') + \".csv\";\r\n        csv(fileName, [['id', 'Name', 'District', 'e-mail', 'Phone', 'Participants', 'Payment type', 'Emergency name', 'Emergency Contact', 'Note', 'Money Owed', 'Money Paid', 'Outstanding Balance', 'Created', 'Updated'], ...exportedData]);\r\n    }\r\n\r\n    markPaid(id) {\r\n        return () => {\r\n            this.props.togglePaid(id);\r\n        }\r\n    }\r\n\r\n    render() {\r\n\r\n        const event = this.props.Event.toJS();\r\n        const bookings = this.props.bookings;\r\n        const user = this.props.User.toJS();\r\n        //const participants = this.props.Participants.toJS();\r\n\r\n        /*const brows = bookings.map(b => <tr key={b.id}><td>{b.userName}</td>\r\n                                            <td>{b.userEmail}</td>\r\n                                            <td>{b.userContact}</td>\r\n                                            <td>{b.participants.length}</td>\r\n                                            <td>{b.paymentType}</td>\r\n                                            <td>{b.updatedAt}</td>\r\n                                        </tr>)\r\n    */\r\n        const data = bookings.map(b => {\r\n            let result = {\r\n                district:    b.district,\r\n                userName:    b.userName,\r\n                userEmail:   b.userEmail,\r\n                userContact: b.userContact,\r\n                paymentType: b.paymentType,\r\n                paid:        b.paid,\r\n                id:          b.id,\r\n                b:           b,\r\n                E:           this.props.Event,\r\n                participants: undefined,\r\n                updatedAt: undefined\r\n\r\n            };\r\n\r\n            result.participants = b.participants.length;//@ts-ignore\r\n            result.updatedAt = Moment(b.updatedAt).format('L');\r\n\r\n\r\n            return result\r\n        });\r\n\r\n        const BookingEditLink = showBookingEditLink(props => {\r\n            return <Link to={\"/booking/\" + props.booking.id + \"/edit\"}>Edit</Link>\r\n        });\r\n\r\n\r\n        const columns = [];\r\n        //@ts-ignore\r\n        if (event.bigCampMode) columns.push({accessor: \"district\", Header: \"District\", sortable: true});\r\n//@ts-ignore\r\n        columns.push(...[{accessor: \"userName\", Header: \"Name\", sortable: true},\r\n            {\r\n                accessor: \"userEmail\", Header: \"e-mail\", sortable: true,\r\n                Cell:     row => <a href={`mailto:${row.original.userEmail}`}\r\n                                    target=\"_blank\">{row.original.userEmail}</a>\r\n            },\r\n            {\r\n                accessor: \"userContact\", Header: \"Contact\", sortable: true, minWidth: 70,\r\n                Cell:     row => <a href={`tel:${row.original.userContact}`}\r\n                                    target=\"_blank\">{row.original.userContact}</a>\r\n            },\r\n            {accessor: \"participants\", Header: \"Booked\", sortable: true, minWidth: 50},\r\n            {accessor: \"paymentType\", Header: \"Payment Method\", sortable: true, minWidth: 50},\r\n            {id:            'updatedAt',\r\n                accessor:   row => row,\r\n                Cell:       row => row.original.updatedAt,\r\n                sortMethod: updatedSort,\r\n                Header:     \"Updated\",\r\n                sortable:   true,\r\n                minWidth:   40\r\n            },\r\n            {\r\n                id:       \"edit\",\r\n                accessor: \"id\",\r\n                Header:   \"Edit\",\r\n                Cell:     row => <BookingEditLink event={row.original.E.toJS()} booking={row.original.b}/>,\r\n                minWidth: 18\r\n            }\r\n        ]);\r\n        //const sortables=[{column:\"userName\", sortFunction:nameSort},\"userEmail\",\"userContact\",\"participants\",\"paymentType\",\"updatedAt\"];\r\n        const expanded = {[this.state.expanded]: true};\r\n\r\n        return (<React.Fragment>\r\n            <Row>\r\n                <Col>\r\n                    <Button className=\"float-right\" onClick={this.exportCSV}>Export CSV</Button>\r\n                    <h4>Total Bookings: {bookings.length}</h4>\r\n                </Col>\r\n            </Row>\r\n            <Row>\r\n                <Col>\r\n                    <ReactTable\r\n                        expanded={expanded}\r\n                        getTrProps={(state, rowInfo, column) => {\r\n                            if (rowInfo) return {onClick: this.updateExpanded(rowInfo.viewIndex)};\r\n                            return {}\r\n                        }}\r\n                        onSortedChange={this.updateExpanded(null)}\r\n                        onPageChange={this.updateExpanded(null)}\r\n                        SubComponent={this.subRow}\r\n                        data={data}\r\n                        columns={columns}\r\n                        showPagination={true}\r\n                        showPageSizeOptions={false}/>\r\n                </Col>\r\n            </Row>\r\n        </React.Fragment>);\r\n    }\r\n\r\n    subRow = row => {\r\n\r\n        const event = row.original.E.toJS();\r\n\r\n        const village = event.villages.find(v => row.original.b.villageId === v.id);\r\n        const organisation = event.organisations.find(o => row.original.b.organisationId === o.id);\r\n\r\n        const participants = row.original.b.participants\r\n            .sort((a, b) => nameSort(a.name, b.name))\r\n            .map(p => <tr key={p.id}>\r\n            <td>{p.name}</td>\r\n            <td>{p.displayAge}</td>\r\n        </tr>);\r\n\r\n        return (\r\n            <Card>\r\n                <CardBody>\r\n                    <CardTitle>\r\n                        {row.original.b.district ? row.original.b.district + \" - \" : null}\r\n                        {row.original.b.userName}\r\n                    </CardTitle>\r\n\r\n                    <Row>\r\n                        <Col sm={4}>\r\n                            <p><b>Booking Contact E-mail:</b> <a\r\n                                href={\"mailto:\" + row.original.b.userEmail}>{row.original.b.userEmail}</a></p>\r\n                            <p><b>Booking Contact Phone:</b> {row.original.b.userContact}</p>\r\n                            {village ? <p><b>Village:</b> {village.name}</p> : null}\r\n                            {organisation ? <p><b>Organisation:</b> {organisation.name}</p> : null}\r\n                            <p><b>Participants:</b> {row.original.participants}</p>\r\n                            <p><b>Anything Else:</b></p><p>{row.original.b.note}</p>\r\n                            {event.bigCampMode ? <p><b>Camp With: </b>{row.original.b.campWith}</p> : null}\r\n                        </Col>\r\n                        <Col sm={8}>\r\n                            <Table>\r\n                                <thead>\r\n                                <tr>\r\n                                    <th>Name</th>\r\n                                    <th>Age</th>\r\n                                </tr>\r\n                                </thead>\r\n                                <tbody>\r\n                                {participants}\r\n                                </tbody>\r\n                            </Table>\r\n                        </Col>\r\n                    </Row>\r\n                </CardBody>\r\n            </Card>\r\n        );\r\n    }\r\n}\r\n\r\nconst updatedSort = (a, b) => {\r\n    return a.b.updatedAt > b.b.updatedAt ? 1 : -1;\r\n};\r\n\r\n\r\nconst nameSort = (a, b) => {\r\n    var splitA = a.split(\" \");\r\n    var splitB = b.split(\" \");\r\n    var lastA = splitA[splitA.length - 1];\r\n    var lastB = splitB[splitB.length - 1];\r\n\r\n    if (lastA < lastB) return -1;\r\n    if (lastA > lastB) return 1;\r\n    return 0;\r\n};\r\n\r\n","import * as React from 'react'\r\nimport {connect} from 'react-redux'\r\nimport {Link} from 'react-router-dom'\r\nimport * as Immutable from 'immutable'\r\nimport {Route, Switch} from 'react-router-dom';\r\n\r\nimport * as bookings from '../../bookings'\r\nimport * as events from '../../events'\r\nimport {manageEventCheck, manageWholeEventWrapper, manageMoneyWrapper, manageRolesWrapper} from '../permission'\r\nimport {\r\n    togglePaid,\r\n    approve,\r\n    decline,\r\n    assignVillage,\r\n    addVillage,\r\n    deleteVillage,\r\n    renameVillage,\r\n    addRole,\r\n    deleteRole,\r\n    addPayment,\r\n    deletePayment,\r\n    syncMax,\r\n    approveMembership,\r\n    unapproveMembership,\r\n    approveDBS,\r\n    unapproveDBS\r\n} from '../actions'\r\nimport {getUserList} from \"../../user/actions\";\r\n\r\nimport Filter           from './filter'\r\nimport BookingsPage     from './bookings'\r\nimport ParticipantsPage from './participants'\r\nimport KpPage           from './kp'\r\nimport ApplicationPage  from './applications'\r\nimport VillagePage      from './villages'\r\nimport RolesPage        from './roles'\r\nimport MoneyPage        from './money'\r\nimport EmailsPage       from './emails'\r\nimport BirthdaysPage    from './birthdays'\r\nimport GraphsPage       from './graphs'\r\nimport MembershipsPage  from './membership'\r\n\r\nimport { woodcraft as W } from '../../../shared/woodcraft'\r\n\r\nimport {\r\n    Row,\r\n    Col,\r\n    Nav,\r\n    NavItem,\r\n    NavLink\r\n}                 from 'reactstrap';\r\n\r\nimport classnames from 'classnames';\r\nimport ageFactory from \"../../age\";\r\nimport Moment     from \"moment/moment\";\r\nimport Memberships from \"./membership\";\r\n\r\n\r\n//this component sits at the root of our management pages and ensures all the booking information for the event is loaded. This will include other peoples bookings so  we need to check we have permission to view them.\r\n\r\n\r\nclass ManageContainerPage extends React.Component<any, any> {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n\r\n    componentWillMount() {\r\n        this.props.getEventDetails(this.props.match.params.eventId);\r\n        this.props.getEventBookings(this.props.match.params.eventId);\r\n\r\n        this.prepData(this.props.Bookings, this.props.Event)\r\n    }\r\n\r\n    componentWillReceiveProps(nextProps) {\r\n        if (nextProps.Bookings !== this.props.Bookings) this.prepData(nextProps.Bookings, nextProps.Event)\r\n    }\r\n\r\n    prepData(Bookings, Event) {\r\n        //DeImmutable data and calculate ages, to avoid needing to do it on render. Store result in State.\r\n\r\n        const event = Event.toJS();\r\n\r\n        const ageWidgets = ageFactory(event);\r\n\r\n        const startDate = Moment(event.startDate); //todo store this as a Moment.\r\n\r\n        const bookings = Bookings.valueSeq().toJS().filter(b => b.eventId === event.id);\r\n        bookings.forEach(b => {\r\n            b.externalExtra = b.externalExtra || {};\r\n            b.participants.forEach(p => {\r\n                p.ageAtStart = startDate.diff(Moment(p.age), 'years');//@ts-ignore\r\n                p.ageGroup = W.find(w => w.filter(p.ageAtStart)).singular;\r\n                p.displayAge = ageWidgets.displayAgeParticipant(p);\r\n                p.prettyUpdatedAt = Moment(p.updatedAt).format('L');\r\n                p.prettyCreatedAt = Moment(p.createdAt).format('L');\r\n                p.externalExtra = p.externalExtra || {};\r\n                p.internalExtra = p.internalExtra || {};\r\n            })\r\n        });\r\n\r\n        this.setState({bookings: bookings})\r\n    }\r\n\r\n    render() {\r\n\r\n        //prevent render until we have the data available.\r\n        if (!this.props.Event || !this.props.Bookings || !this.props.Event.get(\"user\")) return <div>Loading Data</div>;\r\n\r\n\r\n        const event = this.props.Event.toJS();\r\n\r\n        const showApplications = event.bookingPolicy === 'approved' && event.applications;\r\n\r\n        const ApplicationsTab = showApplications ?\r\n            manageWholeEventWrapper(() => <CustomTab\r\n                to={\"/event/\" + this.props.match.params.eventId + \"/manage/applications\"}\r\n                label={'Applications (' + event.applications.length + ')'} activeOnlyWhenExact={undefined}/>) : () => null;\r\n\r\n        const VillagesTab = manageWholeEventWrapper(() => event.bigCampMode ? <CustomTab\r\n            to={\"/event/\" + this.props.match.params.eventId + \"/manage/villages\"} label=\"Villages\"\r\n            activeOnlyWhenExact={undefined}/> : null);\r\n        const RolesTab = manageWholeEventWrapper(() => <CustomTab\r\n            to={\"/event/\" + this.props.match.params.eventId + \"/manage/roles\"} label=\"Roles\"\r\n            activeOnlyWhenExact={undefined}/>);\r\n\r\n        const MoneyTab = manageMoneyWrapper(() => <CustomTab\r\n            to={\"/event/\" + this.props.match.params.eventId + \"/manage/money\"} label=\"Money\"\r\n            activeOnlyWhenExact={undefined}/>);\r\n\r\n        const MembershipsTab = manageWholeEventWrapper(() => event.customQuestions.adultEmail ? <CustomTab\r\n            to={\"/event/\" + this.props.match.params.eventId + \"/manage/memberships\"} label=\"Memberships\"\r\n            activeOnlyWhenExact={undefined}/> : null);\r\n\r\n        const {Bookings, ...props} = this.props;\r\n        // @ts-ignore\r\n        return (<React.Fragment>\r\n                <Row>\r\n                    <Col>\r\n                        <Nav tabs>\r\n                            <CustomTab activeOnlyWhenExact to={\"/event/\" + this.props.match.params.eventId + \"/manage\"}\r\n                                       label=\"Participants\"/>\r\n                            <CustomTab to={\"/event/\" + this.props.match.params.eventId + \"/manage/bookings\"}\r\n                                       label=\"Bookings\" activeOnlyWhenExact={undefined}/>\r\n                            <CustomTab to={\"/event/\" + this.props.match.params.eventId + \"/manage/kp\"} label=\"Kp\"\r\n                                       activeOnlyWhenExact={undefined}/>\r\n                            <VillagesTab {...this.props}/>\r\n                            <RolesTab {...this.props}/>\r\n                            <ApplicationsTab {...this.props}/>\r\n                            <MoneyTab {...this.props} />\r\n                            <CustomTab to={\"/event/\" + this.props.match.params.eventId + \"/manage/emails\"}\r\n                                       label=\"Emails\" activeOnlyWhenExact={undefined}/>\r\n                            <CustomTab to={\"/event/\" + this.props.match.params.eventId + \"/manage/birthdays\"}\r\n                                       label=\"🎂\" activeOnlyWhenExact={undefined}/>\r\n                            <CustomTab to={\"/event/\" + this.props.match.params.eventId + \"/manage/graphs\"}\r\n                                       label=\"📈\" activeOnlyWhenExact={undefined}/>\r\n                            <MembershipsTab {...this.props} />\r\n                        </Nav>\r\n                    </Col>\r\n                </Row>\r\n                <Switch>\r\n                    <Route exact path=\"/event/:eventId(\\d+)/manage\">\r\n                        <Filter bookings={this.state.bookings} {...props} >\r\n                            <ParticipantsPage/>\r\n                        </Filter>\r\n                    </Route>\r\n                    <Route path=\"/event/:eventId(\\d+)/manage/participants\">\r\n                        <Filter bookings={this.state.bookings} {...props} >\r\n                            <ParticipantsPage/>\r\n                        </Filter>\r\n                    </Route>\r\n                    <Route path=\"/event/:eventId(\\d+)/manage/bookings\">\r\n                        <Filter bookings={this.state.bookings} {...props} >\r\n                            <BookingsPage/>\r\n                        </Filter>\r\n                    </Route>\r\n                    <Route path=\"/event/:eventId(\\d+)/manage/kp\">\r\n                        <Filter bookings={this.state.bookings} {...props} >\r\n                            <KpPage/>\r\n                        </Filter>\r\n                    </Route>\r\n                    <Route path=\"/event/:eventId(\\d+)/manage/emails\">\r\n                        <Filter bookings={this.state.bookings} {...props} >\r\n                            <EmailsPage/>\r\n                        </Filter>\r\n                    </Route>\r\n                    <Route path=\"/event/:eventId(\\d+)/manage/birthdays\">\r\n                        <Filter bookings={this.state.bookings} {...props} >\r\n                            <BirthdaysPage/>\r\n                        </Filter>\r\n                    </Route>\r\n                    <Route path=\"/event/:eventId(\\d+)/manage/applications\">\r\n                        <ApplicationPage bookings={this.state.bookings} {...props} />\r\n                    </Route>\r\n                    <Route path=\"/event/:eventId(\\d+)/manage/villages\">\r\n                        <VillagePage bookings={this.state.bookings} {...props} />\r\n                    </Route>\r\n                    <Route path=\"/event/:eventId(\\d+)/manage/roles\">\r\n                        <RolesPage bookings={this.state.bookings} {...props} />\r\n                    </Route>\r\n                    <Route path=\"/event/:eventId(\\d+)/manage/money\">\r\n                        <MoneyPage bookings={this.state.bookings} {...props} />\r\n                    </Route>\r\n                    <Route path=\"/event/:eventId(\\d+)/manage/graphs\">\r\n                        <Filter bookings={this.state.bookings} {...props} >\r\n                            <GraphsPage/>\r\n                        </Filter>\r\n                    </Route>\r\n                    <Route path=\"/event/:eventId(\\d+)/manage/memberships\">\r\n                        <Filter bookings={this.state.bookings} {...props} >\r\n                            <MembershipsPage/>\r\n                        </Filter>\r\n                    </Route>\r\n                </Switch>\r\n            </React.Fragment>\r\n\r\n\r\n        );\r\n    }\r\n}\r\n\r\n\r\n//we could still have no bookings..\r\nconst mapStateToProps = (state, props) => {\r\n\r\n    const User = state.getIn([\"User\", \"user\"]);\r\n    const UserList = state.getIn([\"User\", \"list\"]);\r\n    const Event = state.getIn([\"Events\", \"events\", parseInt(props.match.params.eventId)]);\r\n    const Bookings = state.getIn([\"Bookings\", \"bookings\"]);\r\n    return {User, UserList, Event, Bookings};\r\n};\r\n\r\nconst mapDispatchToProps = {\r\n    getEventBookings: bookings.actions.getEventBookings,\r\n    getEventDetails: events.actions.getEventDetails,\r\n    togglePaid: togglePaid,\r\n    approve: approve,\r\n    decline: decline,\r\n    assignVillage: assignVillage,\r\n    addVillage: addVillage,\r\n    deleteVillage: deleteVillage,\r\n    renameVillage: renameVillage,\r\n    getUserList: getUserList,\r\n    addRole: addRole,\r\n    deleteRole: deleteRole,\r\n    addPayment: addPayment,\r\n    deletePayment: deletePayment,\r\n    syncMax: syncMax,\r\n    approveMembership: approveMembership,\r\n    unapproveMembership: unapproveMembership,\r\n    approveDBS: approveDBS,\r\n    unapproveDBS: unapproveDBS\r\n};\r\n\r\nconst VisibleManageContainerPage = connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(manageEventCheck(ManageContainerPage));\r\n\r\nexport default VisibleManageContainerPage;\r\n\r\nconst CustomTab = ({label, to, activeOnlyWhenExact}) => (\r\n    <Route\r\n        path={to}\r\n        exact={activeOnlyWhenExact}\r\n        children={({match}) => (\r\n            <NavItem>\r\n                <NavLink className={classnames({active: match})} tag={Link} to={to}>\r\n                    {label}\r\n                </NavLink>\r\n            </NavItem>)}\r\n    />\r\n);\r\n\r\n\r\n","import * as React      from 'react'\r\nimport {Link}     from 'react-router-dom'\r\nimport ReactTable from 'react-table'\r\nimport Moment     from 'moment'\r\nimport 'moment/locale/en-gb'\r\nimport csv        from 'csv-file-creator'\r\nimport update     from \"immutability-helper\"\r\n//import Switch from 'react-toggle'\r\n\r\n//import bookings from '../bookings'\r\n\r\nimport {\r\n    Row,\r\n    Col,\r\n    Button,\r\n    Card,\r\n    CardBody,\r\n    CardTitle,\r\n    Table\r\n}                 from 'reactstrap';\r\nimport ageFactory from \"../../age\";\r\nimport feeFactory from \"../../../shared/fee/feeFactory\";\r\n\r\nMoment.locale('en-gb');\r\n\r\n//import W from '../../../shared/woodcraft.js'\r\n\r\nexport default class Emails extends React.Component<any, any> {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n\r\n    shouldComponentUpdate(nextProps, nextState) {\r\n        //rerendering the tables suck, lets not do it.\r\n        //if (this.state !== nextState) return true;\r\n        //return !this.props.Bookings.equals(nextProps.Bookings);\r\n        return true;\r\n    }\r\n\r\n    render() {\r\n\r\n        const event = this.props.Event.toJS();\r\n        const bookings = this.props.bookings;\r\n        const user = this.props.User.toJS();\r\n\r\n        const emails = bookings.reduce((a, c) => {\r\n         const extra = c.externalExtra.additionalContacts ? c.externalExtra.additionalContacts.filter(c => c.email.length > 0).map(c => c.email) : [];\r\n         return [...a, c.userEmail, ...extra]\r\n        }, []);\r\n\r\n        const mailLink = `mailto:${user.email}?bcc=${emails.join(',')}`;\r\n\r\n        const bookingRows = bookings.map(singleBookingRows);\r\n\r\n        return (<React.Fragment>\r\n            <Row>\r\n                <Col>\r\n                    <h3><a href={mailLink}>Click here to email visible contacts</a></h3>\r\n                    <p>Or you can copy/paste this: <b>(INTO A BCC FIELD!)</b></p>\r\n                    <textarea readOnly={true} style={{width:'100%'}} value={emails.join(', ')} />\r\n                    <table className=\"table\">\r\n                        <thead>\r\n                        <tr>\r\n                        <th>District</th>\r\n                            <th>Name</th>\r\n                            <th>Email</th>\r\n                            <th>Phone</th>\r\n                        </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                        {bookingRows}\r\n                        </tbody>\r\n                    </table>\r\n                </Col>\r\n            </Row>\r\n        </React.Fragment>);\r\n    }\r\n}\r\n\r\nconst singleBookingRows = booking => {\r\n\r\n    if(!booking.externalExtra.additionalContacts) return [<tr>\r\n        <td>{booking.district}</td>\r\n        <td><b>{booking.userName}</b></td>\r\n        <td><b>{mailTo(booking.userEmail)}</b></td>\r\n        <td><b>{booking.userContact}</b></td>\r\n    </tr>];\r\n\r\n    const extraRows = booking.externalExtra.additionalContacts.filter(c => c.name.length > 0 || c.email.length > 0 || c.phone.length > 0)\r\n        .map(c =>\r\n        <tr><td>{c.name}</td><td>{mailTo(c.email)}</td><td>{c.phone}</td></tr>);\r\n\r\n    const mainRow = <tr>\r\n        <td rowSpan={extraRows.length+1}>{booking.district}</td>\r\n        <td><b>{booking.userName}</b></td>\r\n        <td><b>{mailTo(booking.userEmail)}</b></td>\r\n        <td><b>{booking.userContact}</b></td>\r\n    </tr>;\r\n\r\n    return [mainRow, ...extraRows]\r\n};\r\n\r\nconst mailTo = email => <a href={`mailto:${email}`}>{email}</a>;","import * as React                       from 'react'\r\nimport {MultiSelect, SimpleSelect} from 'react-selectize'; //Local version to fix bootstrap dropdowns. REMOVE\r\nimport update                      from 'immutability-helper';\r\nimport * as P                      from '../../../shared/permissions'\r\nimport debounce                    from 'debounce'\r\nimport Moment     from 'moment'\r\n\r\nimport {\r\n    Button,\r\n    Row,\r\n    Col,\r\n    Form,\r\n    FormGroup,\r\n    Label,\r\n    Input,\r\n    Card,\r\n    CardBody,\r\n    CardTitle,\r\n    CardImg,\r\n    CardImgOverlay,\r\n    Nav,\r\n    NavItem,\r\n    NavLink,\r\n    TabContents,\r\n    TabPane\r\n} from 'reactstrap';\r\n\r\nexport default class Filter extends React.Component<any, any> {\r\n    private bounceUpdate: any;\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        const participants = this.props.bookings.reduce((r, b) => [...r, ...b.participants], []);\r\n\r\n\r\n        this.state = {\r\n            orgs:     [],\r\n            villages: [],\r\n            day:      null,\r\n            search:   '',\r\n            food:     'all',\r\n            data:     {bookings:      this.props.bookings,\r\n                participants:         participants,\r\n                filteredBookings:     this.props.bookings,\r\n                filteredParticipants: participants\r\n            }\r\n        };\r\n        this.updateOrgs = this.updateOrgs.bind(this);\r\n        this.updateVillages = this.updateVillages.bind(this);\r\n        this.updateSearch = this.updateSearch.bind(this);\r\n        this.updateDay = this.updateDay.bind(this);\r\n        this.searchBooking = this.searchBooking.bind(this);\r\n        this.updateData = this.updateData.bind(this);\r\n        this.updateFood = this.updateFood.bind(this);\r\n        this.bounceUpdate = debounce(() => this.updateData(this.props), 500);\r\n    }\r\n\r\n    componentWillReceiveProps(nextProps) {\r\n        this.updateData(nextProps)\r\n    }\r\n\r\n    updateOrgs(orgs) {\r\n        this.setState(update(this.state, {orgs: {$set: orgs}}));\r\n        this.bounceUpdate();\r\n    }\r\n\r\n    updateVillages(villages) {\r\n        this.setState(update(this.state, {villages: {$set: villages}}));\r\n        this.bounceUpdate();\r\n    }\r\n\r\n    updateDay(day) {\r\n        this.setState(update(this.state, {day: {$set: day}}));\r\n        this.bounceUpdate();\r\n    }\r\n\r\n    updateFood(e) {\r\n        this.setState(update(this.state, {food: {$set: e.target.value}}));\r\n        this.bounceUpdate();\r\n    }\r\n\r\n    updateSearch(e) {\r\n        this.setState(update(this.state, {search: {$set: e.target.value}}));\r\n        this.bounceUpdate();\r\n    }\r\n\r\n    updateData(source) {\r\n        let filteredBookings = source.bookings.filter(b => {\r\n            if (this.state.food === 'all') return true;\r\n            if (this.state.food === 'out' && b.externalExtra.foodOptOut) return true;\r\n            if (this.state.food === 'central' && !b.externalExtra.foodOptOut) return true;\r\n            return false;\r\n        }).filter(b => {\r\n            if (b.totalParticipants) b.participants = b.totalParticipants;\r\n            if (this.state.orgs.length === 0) return true;\r\n            return this.state.orgs.find(o => o.value === b.organisationId)\r\n        }).filter(b => {\r\n            if (this.state.villages.length === 0) return true;\r\n            return this.state.villages.find(v => v.value === b.villageId)\r\n        });\r\n\r\n        if (this.state.day) filteredBookings = filteredBookings.map(b => {\r\n            b.totalParticipants = b.participants;\r\n            b.participants = b.participants.filter(p => p.days & this.state.day.value);\r\n            return b;\r\n        });\r\n\r\n        let searchedBookings = filteredBookings;\r\n\r\n        if (this.state.search.length > 2) searchedBookings = filteredBookings.reduce(this.searchBooking, []);\r\n\r\n        const participants = searchedBookings === this.state.data.bookings ? this.state.data.participants : searchedBookings.reduce((r, b) => [...r, ...b.participants], []);//just easier to do this here than find a plain javascript object map function\r\n        const filteredParticipants = filteredBookings.reduce((r, b) => [...r, ...b.participants], []).filter(p => p.name.toLowerCase().includes(this.state.search.toLowerCase().trim()));\r\n\r\n        this.setState(update(this.state, {\r\n            data: {\r\n                $set: {\r\n                    participants:         participants,\r\n                    bookings:             searchedBookings,\r\n                    filteredParticipants: filteredParticipants,\r\n                    filteredBookings:     filteredBookings\r\n                }\r\n            }\r\n        }));\r\n\r\n    }\r\n\r\n//TODO: Proper server side database searching\r\n    searchBooking(R, booking) {\r\n        const term = this.state.search.toLowerCase().trim();\r\n\r\n        booking.totalParticipants = booking.participants;\r\n\r\n        // const newParticipants = booking.participants.filter(p => p.name.includes(term));\r\n\r\n        booking.district = booking.district || '';\r\n\r\n        const bookingFound = (\r\n            booking.userName.toLowerCase().includes(term)\r\n            || booking.userEmail.toLowerCase().includes(term)\r\n            || booking.userContact.toLowerCase().includes(term)\r\n            || booking.district.toLowerCase().includes(term));\r\n\r\n        //if (bookingFound || newParticipants.length > 0) {\r\n        if (bookingFound) {\r\n            //booking.participants = newParticipants;\r\n            R.push(booking);\r\n            return R\r\n        }\r\n        return R\r\n    }\r\n\r\n    render() {\r\n\r\n        const user = this.props.User.toJS();\r\n        const event = this.props.Event.toJS();\r\n        const wholeEvent = P.manageWholeEvent(user, event);\r\n\r\n        const orgOptions = this.props.Event.get(\"organisations\").map(o => {\r\n            return {label: o.get(\"name\"), value: o.get(\"id\"), id: o.get(\"id\")}\r\n        }).toArray();\r\n\r\n        const villageOptions = this.props.Event.get(\"villages\").map(v => {\r\n            return {label: v.get(\"name\"), value: v.get(\"id\"), id: v.get(\"id\")}\r\n        }).toArray();\r\n\r\n        orgOptions.forEach(o => {\r\n            o.selectable = P.viewOrganisation(user, event, o)\r\n        });\r\n\r\n\r\n        villageOptions.forEach(v => {\r\n            v.selectable = P.viewVillage(user, event, v)\r\n        });\r\n\r\n        const startDate = Moment.utc(event.startDate).startOf('day');\r\n        const endDate = Moment.utc(event.endDate).startOf('day').add(1, 'days');\r\n        const days = [];\r\n        let mask = 0;\r\n\r\n        for (let m = startDate; m.isBefore(endDate); m.add(1, 'days')) {//@ts-ignore\r\n            days.push({label: m.format(\"dddd Do\"), value: Math.pow(2, mask)});\r\n            mask++;\r\n        }\r\n\r\n        const {Bookings, Participants, bookings, ...rest} = this.props;\r\n\r\n        return (\r\n            <React.Fragment>\r\n                <Form>\r\n                    <FormGroup row className=\"mt-3\">\r\n                        {event.bigCampMode ? <React.Fragment>\r\n                            {event.organisationsEnabled ?\r\n                                <Col sm={3}>\r\n                                    <Label>Filter by Organisation:</Label>\r\n                                    <MultiSelect\r\n                                        // @ts-ignore\r\n                                        values={this.state.orgs}\r\n                                        onValuesChange={this.updateOrgs}\r\n                                        placeholder={wholeEvent ? \"All Organisations\" : \"All Permissible Organisations\"}\r\n                                        options={orgOptions}\r\n                                        theme=\"bootstrap3\"\r\n                                    />\r\n                                </Col> : null}\r\n                            <Col sm={3}>\r\n                                <Label>Filter by Village:</Label>\r\n                                <MultiSelect\r\n                                    // @ts-ignore\r\n                                    values={this.state.villages}\r\n                                    onValuesChange={this.updateVillages}\r\n                                    placeholder={wholeEvent ? \"All Villages\" : \"All Permissible Villages\"}\r\n                                    options={villageOptions}\r\n                                    theme=\"bootstrap3\"\r\n                                />\r\n                            </Col></React.Fragment> : null}\r\n                        <Col sm={3}>\r\n                            <Label>Filter by Day:</Label>\r\n                            <SimpleSelect\r\n                                value={this.state.day}\r\n                                onValueChange={this.updateDay}\r\n                                placeholder=\"Any\"\r\n                                options={days}\r\n                                theme=\"bootstrap3\"\r\n                            />\r\n                        </Col>\r\n                        <Col sm={3}>\r\n                            <Label className=\"control-label\">Search:</Label>\r\n                            <Input type=\"text\"\r\n                                   value={this.state.search}\r\n                                   onChange={this.updateSearch}\r\n                                   placeholder=\"Search\"/>\r\n                        </Col>\r\n                        {event.customQuestions.foodOptOut ?\r\n                            <Col sm={3}>\r\n                                <Label className=\"control-label\">Food:</Label>\r\n                                <Input type=\"select\"\r\n                                       value={this.state.food}\r\n                                       onChange={this.updateFood}>\r\n                                    <option value=\"all\">All</option>\r\n                                    <option value=\"central\">Central Only</option>\r\n                                    <option value=\"out\">Opt-out Only</option>\r\n                                </Input>\r\n                            </Col> : null}\r\n                    </FormGroup>\r\n                </Form>\r\n                {         // @ts-ignore\r\n                    React.cloneElement(this.props.children, {...this.state.data, ...rest})}\r\n            </React.Fragment>\r\n        );\r\n\r\n    }\r\n}\r\n","import * as React      from 'react'\r\n\r\n\r\n//import bookings from '../bookings'\r\n//import { manageEventCheck } from '../permission.ts'\r\n\r\nimport {\r\n    LineChart,\r\n    Line,\r\n    XAxis,\r\n    YAxis,\r\n    CartesianGrid,\r\n    Tooltip,\r\n    Legend,\r\n    ResponsiveContainer,\r\n    BarChart,\r\n    Bar,\r\n    Cell,\r\n    PieChart,\r\n    Pie,\r\n    LabelList\r\n} from 'recharts';\r\n\r\n\r\nimport {\r\n    Row,\r\n    Col,\r\n    Button,\r\n    Card,\r\n    CardBody,\r\n    CardTitle,\r\n    CardSubtitle,\r\n} from 'reactstrap';\r\n\r\nimport ageFactory from \"../../age\";\r\n\r\nimport Moment from 'moment';\r\n\r\nexport default class Graphs extends React.Component<any, any> {\r\n    private ageWidgets: { BookingFormWidget: (props) => JSX.Element; displayAgeParticipant: (p) => string; participantCardField: (p) => JSX.Element; displayAgeCSV: (p) => string; displayAgeMoment: (age, event) => string } | { BookingFormWidget: (props) => JSX.Element; displayAgeParticipant: (p) => any; participantCardField: (p) => JSX.Element; displayAgeCSV: (p) => string; displayAgeMoment: (age, event) => any };\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {expanded: null};\r\n\r\n        this.ageWidgets = ageFactory(this.props.Event.toJS());\r\n    }\r\n\r\n    componentWillReceiveProps() {\r\n    }\r\n\r\n    render() {\r\n\r\n        const event = this.props.Event.toJS();\r\n        const bookings = this.props.bookings;\r\n        const participants = this.props.participants;\r\n\r\n        if (participants.length === 0) return <p>No participants to graph</p>;\r\n\r\n        const participantsData = [];\r\n\r\n        participants.forEach(p => p.createdAt = Moment(p.createdAt));\r\n\r\n        const sortedParticipants = participants.sort((a, b) => a.createdAt - b.createdAt);\r\n\r\n        const startDate = Moment.utc(sortedParticipants[0].createdAt).endOf('day');\r\n        const endDate = Moment().endOf('day').add(1, 'hour');\r\n\r\n        for (let m = startDate; m.isBefore(endDate); m.add(1, 'days')) {\r\n//@ts-ignore\r\n            participantsData.push({\r\n                                      'name': m.format('Do MMM'),\r\n                                      tot:    sortedParticipants.filter(p => p.createdAt.isBefore(m)).length\r\n                                  })\r\n        }\r\n\r\n        const ageData = [];\r\n\r\n        for (let age = 0; age < 101; age++) {\r\n            //@ts-ignore\r\n            ageData.push({'name': age, tot: sortedParticipants.filter(p => p.ageAtStart === age).length})\r\n        }\r\n\r\n        const dietData = [\r\n            {name: 'omnivore', value: 0},\r\n            {name: 'vegetarian', value: 0},\r\n            {name: 'vegan', value: 0},\r\n        ];\r\n\r\n        participants.forEach(p => {\r\n            //@ts-ignore\r\n            dietData.find(d => d.name === p.diet).value++\r\n        });\r\n\r\n        return (<React.Fragment>\r\n            <Row>\r\n                <Col>\r\n                    <h4>Participants booked</h4>\r\n                    <ResponsiveContainer width={\"100%\"} height={300}>\r\n                        <LineChart\r\n                            data={participantsData}\r\n                            margin={{\r\n                                top: 5, right: 30, left: 20, bottom: 40,\r\n                            }}\r\n                        >\r\n                            <CartesianGrid strokeDasharray=\"3 3\"/>\r\n                            <XAxis dataKey=\"name\" tick={<CustomizedAxisTick/>} interval={6}/>\r\n                            <YAxis label={{value: 'Participants', angle: -90, position: 'insideLeft'}}/>\r\n                            <Line dot={false} type=\"stepAfter\" dataKey=\"tot\" stroke=\"#8884d8\"/>\r\n                        </LineChart>\r\n                    </ResponsiveContainer>\r\n                    <h4>Age Breakdown</h4>\r\n                    <ResponsiveContainer width={\"100%\"} height={300}>\r\n                        <BarChart\r\n                            data={ageData}\r\n                            margin={{\r\n                                top: 5, right: 30, left: 20, bottom: 30,\r\n                            }}\r\n                        >\r\n                            <CartesianGrid strokeDasharray=\"3 3\"/>\r\n                            <XAxis dataKey=\"name\" label=\"Age\" interval={4}/>\r\n                            <YAxis label={{value: 'Participants', angle: -90, position: 'insideLeft'}}/>\r\n                            <Bar dataKey=\"tot\" fill=\"#8884d8\">\r\n                                {\r\n                                    ageData.map((entry, index) => {\r\n                                        const color = ageColour(index);\r\n                                        return <Cell key={entry} fill={color}/>;\r\n                                    })\r\n                                }</Bar>\r\n                        </BarChart>\r\n                    </ResponsiveContainer>\r\n                    <h4>Diet</h4>\r\n                    <ResponsiveContainer width={\"100%\"} height={300}>\r\n                        <PieChart>\r\n                            <Pie nameKey=\"name\" data={dietData} dataKey=\"value\" cx={\"50%\"} cy={\"50%\"} outerRadius={120}\r\n                                 fill=\"#8884d8\" label>\r\n                            </Pie>\r\n                            <Legend align=\"right\" layout=\"vertical\" verticalAlign=\"middle\"/>\r\n                        </PieChart>\r\n                    </ResponsiveContainer>\r\n                </Col>\r\n            </Row>\r\n        </React.Fragment>);\r\n    }\r\n}\r\n\r\nconst ageColour = age => {\r\n    switch (age) {\r\n        case 0:\r\n        case 1:\r\n        case 2:\r\n        case 3:\r\n        case 4:\r\n        case 5:\r\n            return '#FFEE82'\r\n        case 6:\r\n        case 7:\r\n        case 8:\r\n        case 9:\r\n            return '#80FF75'\r\n        case 10:\r\n        case 11:\r\n        case 12:\r\n            return '#8EFFDB'\r\n        case 13:\r\n        case 14:\r\n        case 15:\r\n            return '#706DFF'\r\n        case 16:\r\n        case 17:\r\n        case 18:\r\n        case 19:\r\n        case 20:\r\n            return '#E7A0FF'\r\n        default:\r\n            return '#FF817A'\r\n    }\r\n}\r\n\r\nclass CustomizedAxisTick extends React.Component<any, any> {\r\n    render() {\r\n        const {\r\n                  x, y, stroke, payload,\r\n              } = this.props;\r\n\r\n        return (\r\n            <g transform={`translate(${x},${y})`}>\r\n                <text x={0} y={0} dy={16} textAnchor=\"end\" fill=\"#666\" transform=\"rotate(-45)\">{payload.value}</text>\r\n            </g>\r\n        );\r\n    }\r\n}","import * as React from 'react'\r\n\r\n//import bookings from '../bookings'\r\n//import { manageEventCheck } from '../permission.ts'\r\n\r\nimport {\r\n    Row,\r\n    Col,\r\n    Button,\r\n    Card,\r\n    CardBody,\r\n    CardTitle,\r\n    Table\r\n} from 'reactstrap';\r\n\r\nimport { woodcraft as W } from '../../../shared/woodcraft'\r\n\r\nexport default class KP extends React.Component<any, any> {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n\r\n    shouldComponentUpdate(nextProps, nextState) {\r\n        //rerendering the tables suck, lets not do it.\r\n        //return !this.props.Bookings.equals(nextProps.Bookings);\r\n        return true\r\n    }\r\n\r\n    render() {\r\n\r\n        //const event = this.props.Event.toJS();\r\n        //const bookings = this.props.Bookings.toJS();\r\n        const participants = this.props.participants;\r\n\r\n        const groups = W.map(w => {\r\n            const people = participants.filter((p) => p.ageGroup === '' ? false : p.ageGroup === w.singular);\r\n            if (people.length === 0) return null;\r\n            return (<tr key={w.name}>\r\n                <td>{w.name}</td>\r\n                <td>{people.filter(p => p.diet === \"omnivore\").length}</td>\r\n                <td>{people.filter(p => p.diet === \"vegetarian\").length}</td>\r\n                <td>{people.filter(p => p.diet === \"vegan\").length}</td>\r\n                <td><b>{people.length}</b></td>\r\n            </tr>);\r\n        });\r\n\r\n        groups.push(<tr key=\"total\">\r\n            <td><b>Total:</b></td>\r\n            <td><b>{participants.filter(p => p.diet === \"omnivore\").length}</b></td>\r\n            <td><b>{participants.filter(p => p.diet === \"vegetarian\").length}</b></td>\r\n            <td><b>{participants.filter(p => p.diet === \"vegan\").length}</b></td>\r\n            <td><b>{participants.length}</b></td>\r\n        </tr>);\r\n\r\n        const requirments = participants.filter(p => p.dietExtra !== null && p.dietExtra !== '').map(p => <tr\r\n            key={p.id}>\r\n            <td>{p.name}</td>\r\n            <td>{p.dietExtra}</td>\r\n        </tr>);\r\n\r\n        return (<Row>\r\n            <Col>\r\n                <h4>Totals</h4>\r\n                <Table>\r\n                    <thead>\r\n                    <tr>\r\n                        <th>Age Group</th>\r\n                        <th>Omnivore</th>\r\n                        <th>Vegetarian</th>\r\n                        <th>Vegan</th>\r\n                        <th><b>Total</b></th>\r\n                    </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                    {groups}\r\n                    </tbody>\r\n                </Table>\r\n                <h4>Requirments &amp; Allergies</h4>\r\n                <Table>\r\n                    <thead>\r\n                    <tr>\r\n                        <th>Name</th>\r\n                        <th>Requirement</th>\r\n                    </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                    {requirments}\r\n                    </tbody>\r\n                </Table>\r\n            </Col>\r\n        </Row>);\r\n    }\r\n}\r\n\r\n\r\nconst nameSort = (a, b) => {\r\n    var splitA = a.name.split(\" \");\r\n    var splitB = b.name.split(\" \");\r\n    var lastA = splitA[splitA.length - 1];\r\n    var lastB = splitB[splitB.length - 1];\r\n\r\n    if (lastA < lastB) return -1;\r\n    if (lastA > lastB) return 1;\r\n    return 0;\r\n};\r\n\r\n","import * as React from 'react'\r\nimport { CopyToClipboard } from 'react-copy-to-clipboard';\r\n\r\n//import bookings from '../bookings'\r\n//import { manageEventCheck } from '../permission.ts'\r\n\r\nimport {\r\n    Row,\r\n    Col,\r\n    Button,\r\n    Card,\r\n    CardBody,\r\n    CardTitle,\r\n    CardSubtitle,\r\n} from 'reactstrap';\r\n\r\nimport ageFactory from \"../../age\";\r\n\r\nexport default class Memberships extends React.Component<any, any> {\r\n    private ageWidgets: { BookingFormWidget: (props) => JSX.Element; displayAgeParticipant: (p) => string; participantCardField: (p) => JSX.Element; displayAgeCSV: (p) => string; displayAgeMoment: (age, event) => string } | { BookingFormWidget: (props) => JSX.Element; displayAgeParticipant: (p) => any; participantCardField: (p) => JSX.Element; displayAgeCSV: (p) => string; displayAgeMoment: (age, event) => any };\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = { copied: 0 };\r\n\r\n        this.ageWidgets = ageFactory(this.props.Event.toJS());\r\n\r\n        this.approveMembership = this.approveMembership.bind(this);\r\n        this.unapproveMembership = this.unapproveMembership.bind(this);\r\n\r\n        this.approveDBS = this.approveDBS.bind(this);\r\n        this.unapproveDBS = this.unapproveDBS.bind(this);\r\n    }\r\n\r\n    shouldComponentUpdate(nextProps, nextState) {\r\n        //rerendering the tables suck, lets not do it.\r\n        //if (this.state !== nextState) return true;\r\n        //return !this.props.Bookings.equals(nextProps.Bookings);\r\n        return true;\r\n    }\r\n\r\n    componentWillReceiveProps() {\r\n    }\r\n\r\n    approveMembership(id) {\r\n        return e => {\r\n            this.props.approveMembership({\r\n                id: id\r\n            });\r\n            e.preventDefault();\r\n        }\r\n    }\r\n\r\n    unapproveMembership(id) {\r\n        return e => {\r\n            this.props.unapproveMembership({\r\n                id: id\r\n            });\r\n            e.preventDefault();\r\n        }\r\n    }\r\n\r\n    approveDBS(id) {\r\n        return e => {\r\n            this.props.approveDBS({\r\n                id: id\r\n            });\r\n            e.preventDefault();\r\n        }\r\n    }\r\n\r\n    unapproveDBS(id) {\r\n        return e => {\r\n            this.props.unapproveDBS({\r\n                id: id\r\n            });\r\n            e.preventDefault();\r\n        }\r\n    }\r\n\r\n\r\n    render() {\r\n\r\n        const event = this.props.Event.toJS();\r\n        const bookings = this.props.bookings;\r\n        const participants = this.props.participants;\r\n\r\n        const adults = participants.filter(p => p.ageAtStart > 15);\r\n\r\n        adults.forEach(p => {\r\n            p.district = bookings.find(b => b.id === p.bookingId).district;\r\n            p.internalExtra = p.internalExtra || {};\r\n        });\r\n\r\n        adults.sort(propSort('district'));\r\n\r\n        const approvedBoth = adults.filter(p => p.internalExtra.member === true && p.internalExtra.dbs === true);\r\n        const approvedDBSOnly = adults.filter(p => p.internalExtra.member !== true && p.internalExtra.dbs === true);\r\n        const approvedMembershipOnly = adults.filter(p => p.internalExtra.member === true && p.internalExtra.dbs !== true);\r\n        const notYetApproved = adults.filter(p => p.internalExtra.member !== true && p.internalExtra.dbs !== true);\r\n\r\n        const notYetApprovedRows = notYetApproved.map(p => <tr key={p.id}>\r\n            <td>{p.name + (p.ageAtStart === 16 ? '  (16)' : '')}</td>\r\n            <td>{p.district}</td>\r\n            <td>{p.externalExtra.adultEmail} <CopyToClipboard text={p.externalExtra.adultEmail}\r\n                onCopy={() => this.setState({ copied: p.id })}><span style={{ cursor: 'copy' }}>📋</span></CopyToClipboard>{this.state.copied === p.id ? ' ✔️' : ''}</td>\r\n            <td><Button color=\"success\" onClick={this.approveMembership(p.id)}>Approve Membership</Button></td>\r\n            <td><Button color=\"success\" onClick={this.approveDBS(p.id)}>Approve DBS</Button></td>\r\n        </tr>);\r\n\r\n        const approvedDBSOnlyRows = approvedDBSOnly.map(p => <tr key={p.id}>\r\n            <td>{p.name + (p.ageAtStart === 16 ? '  (16)' : '')}</td>\r\n            <td>{p.district}</td>\r\n            <td>{p.externalExtra.adultEmail} <CopyToClipboard text={p.externalExtra.adultEmail}\r\n                onCopy={() => this.setState({ copied: p.id })}><span style={{ cursor: 'copy' }}>📋</span></CopyToClipboard>{this.state.copied === p.id ? ' ✔️' : ''}</td>\r\n            <td><Button color=\"success\" onClick={this.approveMembership(p.id)}>Approve Membership</Button></td>\r\n            <td><Button color=\"warning\" onClick={this.unapproveDBS(p.id)}>Unapprove DBS</Button></td>\r\n        </tr>);\r\n\r\n        const approvedMembershipOnlyRows = approvedMembershipOnly.map(p => <tr key={p.id}>\r\n            <td>{p.name + (p.ageAtStart === 16 ? '  (16)' : '')}</td>\r\n            <td>{p.district}</td>\r\n            <td>{p.externalExtra.adultEmail} <CopyToClipboard text={p.externalExtra.adultEmail}\r\n                onCopy={() => this.setState({ copied: p.id })}><span style={{ cursor: 'copy' }}>📋</span></CopyToClipboard>{this.state.copied === p.id ? ' ✔️' : ''}</td>\r\n            <td><Button color=\"warning\" onClick={this.unapproveMembership(p.id)}>Unapprove Membership</Button></td>\r\n            <td><Button color=\"success\" onClick={this.approveDBS(p.id)}>Approve DBS</Button></td>\r\n        </tr>);\r\n\r\n        const approvedBothRows = approvedBoth.map(p => <tr key={p.id}>\r\n            <td>{p.name + (p.ageAtStart === 16 ? '  (16)' : '')}</td>\r\n            <td>{p.district}</td>\r\n            <td>{p.externalExtra.adultEmail} <CopyToClipboard text={p.externalExtra.adultEmail}\r\n                onCopy={() => this.setState({ copied: p.id })}><span style={{ cursor: 'copy' }}>📋</span></CopyToClipboard>{this.state.copied === p.id ? ' ✔️' : ''}</td>\r\n            <td><Button color=\"warning\" onClick={this.unapproveMembership(p.id)}>Unapprove Membership</Button></td>\r\n            <td><Button color=\"warning\" onClick={this.unapproveDBS(p.id)}>Unapprove DBS</Button></td>\r\n        </tr>);\r\n\r\n        return (<Row>\r\n            <Col sm={12}>\r\n                <h4>To Be Approved:</h4>\r\n                <table className='table'>\r\n                    <thead>\r\n                        <tr>\r\n                            <th>Name</th>\r\n                            <th>District</th>\r\n                            <th>Membership e-mail</th>\r\n                            <th>Membership</th>\r\n                            <th>DBS</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        {notYetApprovedRows}\r\n                    </tbody>\r\n                </table>\r\n            </Col>\r\n            <Col sm={12}>\r\n                <h4>Membership Approved:</h4>\r\n                <table className='table'>\r\n                    <thead>\r\n                        <tr>\r\n                            <th>Name</th>\r\n                            <th>District</th>\r\n                            <th>Membership e-mail</th>\r\n                            <th>Membership</th>\r\n                            <th>DBS</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        {approvedMembershipOnlyRows}\r\n                    </tbody>\r\n                </table>\r\n            </Col>\r\n            <Col sm={12}>\r\n                <h4>DBS Approved:</h4>\r\n                <table className='table'>\r\n                    <thead>\r\n                        <tr>\r\n                            <th>Name</th>\r\n                            <th>District</th>\r\n                            <th>Membership e-mail</th>\r\n                            <th>Membership</th>\r\n                            <th>DBS</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        {approvedDBSOnlyRows}\r\n                    </tbody>\r\n                </table>\r\n            </Col>\r\n            <Col sm={12}>\r\n                <h4>Already Approved:</h4>\r\n                <table className='table'>\r\n                    <thead>\r\n                        <tr>\r\n                            <th>Name</th>\r\n                            <th>District</th>\r\n                            <th>Membership e-mail</th>\r\n                            <th>Membership</th>\r\n                            <th>DBS</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        {approvedBothRows}\r\n                    </tbody>\r\n                </table>\r\n            </Col>\r\n        </Row>)\r\n    }\r\n}\r\n\r\nconst propSort = prop => (a, b) => {\r\n    const x = a[prop].toLowerCase();\r\n    const y = b[prop].toLowerCase();\r\n    return x < y ? -1 : x > y ? 1 : 0;\r\n};\r\n\r\n\r\n\r\n","import * as React      from 'react'\r\nimport Currency   from 'react-currency-formatter';\r\nimport Moment     from 'moment'\r\n\r\n//import bookings from '../bookings'\r\n//import { manageEventCheck } from '../permission.ts'\r\nimport feeFactory from '../../../shared/fee/feeFactory'\r\nimport update     from 'immutability-helper';\r\n\r\nimport  { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport  { faTimes } from '@fortawesome/free-solid-svg-icons'\r\n\r\nimport {\r\n    Row,\r\n    Col,\r\n    Label,\r\n    Button,\r\n    Input,\r\n    InputGroup,\r\n    FormGroup,\r\n    Table\r\n} from 'reactstrap';\r\n\r\nimport paymentReference from \"../../../shared/paymentReference\";\r\n\r\n\r\nconst RedCurrency = props => props.quantity < 0 ? <span style={{color: 'red'}}><Currency {...props} /></span> :\r\n    <Currency {...props} />\r\n\r\nexport default class Money extends React.Component<any, any> {\r\n    private getFeesOwed: any;\r\n    //@ts-ignore\r\n    private totalOwed: number;\r\n    //@ts-ignore\r\n    private totalPaid: number;\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {expanded: 0, amount: 0, note: ''};\r\n        this.expand = this.expand.bind(this);\r\n        this.updateAmount = this.updateAmount.bind(this);\r\n        this.updateNote = this.updateNote.bind(this);\r\n        this.addPayment = this.addPayment.bind(this);\r\n        this.deletePayement = this.deletePayement.bind(this);\r\n        this.syncMax = this.syncMax.bind(this);\r\n    }\r\n\r\n    shouldComponentUpdate(nextProps, nextState) {\r\n        //rerendering the tables suck, lets not do it.\r\n        //return !this.props.Bookings.equals(nextProps.Bookings);\r\n        return true\r\n    }\r\n\r\n    expand(id) {\r\n        return e => {\r\n            this.setState(update(this.state, {expanded: {$set: id}}));\r\n        }\r\n    }\r\n\r\n    updateAmount(e) {\r\n        this.setState(update(this.state, {amount: {$set: e.target.value}}));\r\n    }\r\n\r\n    updateNote(e) {\r\n        this.setState(update(this.state, {note: {$set: e.target.value}}));\r\n    }\r\n\r\n    deletePayement(id) {\r\n        return e => {\r\n            //@ts-ignore\r\n            if (confirm(\"Are you sure you want to delete this?\")) this.props.deletePayment({\r\n                id: id\r\n            });\r\n            e.preventDefault();\r\n        }\r\n    }\r\n\r\n    addPayment(type) {\r\n        return e => {\r\n\r\n            this.props.addPayment({\r\n                type: type,\r\n                amount: this.state.amount,\r\n                note: this.state.note,\r\n                bookingId: this.state.expanded\r\n            });\r\n\r\n            this.setState(update(this.state, {note: {$set: ''}, amount: {$set: 0}}));\r\n\r\n            e.preventDefault();\r\n        }\r\n    }\r\n\r\n    syncMax(e) {\r\n        this.props.syncMax(this.state.expanded)\r\n        e.stopPropagation();\r\n        e.preventDefault();\r\n    }\r\n\r\n    closedRow(b, event) {\r\n\r\n        let org = {name: ''};\r\n        if (event.bigCampMode && event.organisationsEnabled) org = event.organisations.find(o => o.id === b.organisationId);\r\n\r\n        b.payments = b.payments || [];\r\n\r\n        const name = event.bigCampMode ? b.district + (org.name ? ' - ' + org.name : '') : b.userName;\r\n        let owed = this.getFeesOwed(event, b.participants, b, false).reduce((a, c) => parseFloat(c.total) + a, 0);\r\n        const paid = b.payments.filter(p => p.type === 'payment').reduce((a, c) => a + parseFloat(c.amount), 0);\r\n\r\n        owed = b.payments.filter(p => p.type === 'adjustment').reduce((a, c) => a + parseFloat(c.amount), owed);\r\n\r\n        this.totalOwed += owed;\r\n        this.totalPaid += paid;\r\n\r\n        const classNames = (paid - owed >= 0 ? \"table-success\" : '') + (this.state.expanded !== 0 && this.state.expanded !== b.id ? ' fadeOut' : '');\r\n\r\n        const payRef = paymentReference(b.id);\r\n\r\n        return <tr key={b.id} onClick={this.expand(b.id)} className={classNames}>\r\n            <td>+</td>\r\n            <td>{payRef}</td>\r\n            <td>{name}</td>\r\n            <td><Currency\r\n                quantity={owed}\r\n                currency=\"GBP\"\r\n            /></td>\r\n            <td><Currency\r\n                quantity={paid}\r\n                currency=\"GBP\"\r\n            /></td>\r\n            <td><Currency\r\n                quantity={owed - paid}\r\n                currency=\"GBP\"\r\n            /></td>\r\n        </tr>\r\n    }\r\n\r\n    openRow(b, event) {\r\n\r\n        b.payments = b.payments || [];\r\n\r\n        const payRef = paymentReference(b.id);\r\n\r\n        let org = {name: ''};\r\n        if (event.bigCampMode && event.organisationsEnabled) org = event.organisations.find(o => o.id === b.organisationId);\r\n\r\n        const name = event.bigCampMode ? `${b.district} -  ${org.name} (${payRef})` : b.userName;\r\n        let owed = this.getFeesOwed(event, b.participants, b, false).reduce((a, c) => parseFloat(c.total) + a, 0);\r\n        const paid = b.payments.filter(p => p.type === 'payment').reduce((a, c) => a + parseFloat(c.amount), 0);\r\n\r\n        owed = b.payments.filter(p => p.type === 'adjustment').reduce((a, c) => a + parseFloat(c.amount), owed);\r\n\r\n        this.totalOwed += owed;\r\n        this.totalPaid += paid;\r\n\r\n        const adjustmentRow = b.payments.filter(p => p.type === 'adjustment').map((r, i) => <tr\r\n            key={`adjust` + b.id + r.id}><td></td>\r\n            <td><FontAwesomeIcon style={{cursor: 'pointer'}} onClick={this.deletePayement(r.id)} icon={faTimes}/></td>\r\n            <td>{Moment(r.updatedAt).format('L') + ' ' + r.note}</td>\r\n            <td><RedCurrency\r\n                quantity={r.amount}\r\n                currency=\"GBP\"\r\n            /></td>\r\n            <td></td>\r\n            <td></td>\r\n        </tr>);\r\n\r\n        const paymentRows = b.payments.filter(p => p.type === 'payment').map((r, i) => <tr\r\n            key={`payment` + b.id + r.id}><td></td>\r\n            <td><FontAwesomeIcon style={{cursor: 'pointer'}} onClick={this.deletePayement(r.id)} icon={faTimes}/></td>\r\n            <td>{Moment(r.updatedAt).format('L') + ' ' + r.note}</td>\r\n            <td></td>\r\n            <td><RedCurrency\r\n                quantity={r.amount}\r\n                currency=\"GBP\"\r\n            /></td>\r\n            <td></td>\r\n        </tr>);\r\n\r\n        const feeRows = this.getFeesOwed(event, b.participants, b, false).map((r, i) => <tr key={`owed` + b.id + i}>\r\n            <td></td><td></td>\r\n            <td>{r.line}</td>\r\n            <td><Currency\r\n                quantity={r.total}\r\n                currency=\"GBP\"\r\n            /></td>\r\n            <td></td>\r\n            <td></td>\r\n        </tr>);\r\n\r\n        return <React.Fragment key={b.id}>\r\n            <tr onClick={this.expand(0)} style={{borderTop: 'solid black 3px'}}>\r\n                <td></td><td></td>\r\n                <td colSpan={3}><b>{name}</b></td>\r\n                <td><Button color=\"success\" onClick={this.syncMax}>Remove Cancellation Fees</Button></td>\r\n            </tr>\r\n            <tr>\r\n                <td></td><td></td>\r\n                <td style={{borderBottom: 'solid #888888 2px'}} colSpan={4}><b>Fees</b></td>\r\n            </tr>\r\n            {feeRows}\r\n            {adjustmentRow}\r\n            <tr>\r\n                <td></td><td></td>\r\n                <td style={{borderBottom: 'solid #888888 2px'}} colSpan={4}><b>Payments</b></td>\r\n            </tr>\r\n            {paymentRows}\r\n            <tr style={{borderBottom: 'solid #888888 2px', borderTop: 'solid #888888 2px'}}>\r\n                <td></td><td></td>\r\n                <td><b>Total:</b></td>\r\n                <td><b><Currency\r\n                    quantity={owed}\r\n                    currency=\"GBP\"\r\n                /></b></td>\r\n                <td><b><Currency\r\n                    quantity={paid}\r\n                    currency=\"GBP\"\r\n                /></b></td>\r\n                <td><b><Currency\r\n                    quantity={owed - paid}\r\n                    currency=\"GBP\"\r\n                /></b></td>\r\n            </tr>\r\n            <tr style={{borderBottom: 'solid black 3px'}}>\r\n                <td></td><td></td>\r\n                <td colSpan={4}>\r\n                    <FormGroup row>\r\n                        <Label sm={3}>Amount</Label>\r\n                        <Col sm={3}>\r\n                            <InputGroup>\r\n                                <div className=\"input-group-prepend\">\r\n                                    <span className=\"input-group-text\">£</span>\r\n                                </div>\r\n                                <Input type=\"number\" onChange={this.updateAmount} value={this.state.amount}/>\r\n                            </InputGroup>\r\n                        </Col>\r\n                        <Col sm={6}>\r\n                            <Button color=\"success\" disabled={this.state.amount <= 0}\r\n                                    onClick={this.addPayment('payment')}>Add Payment</Button>{' '}\r\n                            <Button color=\"warning\"\r\n                                    onClick={this.addPayment('adjustment')}>Add Price Adjustment</Button>\r\n                        </Col>\r\n                    </FormGroup>\r\n                    <FormGroup row>\r\n                        <Label sm={3}>Note</Label>\r\n                        <Col sm={9}>\r\n                            <Input onChange={this.updateNote} value={this.state.note}/>\r\n                        </Col>\r\n                    </FormGroup>\r\n                </td>\r\n            </tr>\r\n        </React.Fragment>\r\n    }\r\n\r\n    render() {\r\n\r\n        const event = this.props.Event.toJS();\r\n        const bookings = this.props.bookings;\r\n        const participants = this.props.bookings.reduce((r, b) => [...r, ...b.participants], []);\r\n\r\n        this.getFeesOwed = feeFactory(event).getFeesOwed;\r\n\r\n        this.totalOwed = 0;\r\n        this.totalPaid = 0;\r\n\r\n        const bookingRows = bookings\r\n            .sort(propSort(event.bigCampMode ? 'district' : 'userName'))\r\n            .map(b => {\r\n            return b.id === this.state.expanded ? this.openRow(b, event) : this.closedRow(b, event);\r\n        });\r\n\r\n        return (<Row>\r\n            <Col>\r\n                <h3>Money</h3>\r\n                <Table striped size=\"sm\">\r\n                    <thead>\r\n                    <tr>\r\n                        <th></th>\r\n                        <th>Reference</th>\r\n                        <th>Booking</th>\r\n                        <th>Fees</th>\r\n                        <th>Payments</th>\r\n                        <th>Outstanding</th>\r\n                    </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                    {bookingRows}\r\n                    <tr>\r\n                        <td></td>\r\n                        <td>\r\n                            <b>Total</b>\r\n                        </td>\r\n                        <td></td>\r\n                        <td>\r\n                            <b><Currency\r\n                                quantity={this.totalOwed}\r\n                                currency=\"GBP\"\r\n                            /></b>\r\n                        </td>\r\n                        <td><b>\r\n                            <Currency\r\n                                quantity={this.totalPaid}\r\n                                currency=\"GBP\"\r\n                            /></b>\r\n                        </td>\r\n                        <td><b>\r\n                            <Currency\r\n                                quantity={this.totalOwed - this.totalPaid}\r\n                                currency=\"GBP\"\r\n                            /></b>\r\n                        </td>\r\n                    </tr>\r\n                    </tbody>\r\n                </Table>\r\n            </Col>\r\n        </Row>);\r\n    }\r\n}\r\n\r\nconst propSort = prop => (a,b) => {\r\n    const x = a[prop].toLowerCase();\r\n    const y = b[prop].toLowerCase();\r\n    return x < y ? -1 : x > y ? 1 : 0;\r\n};\r\n\r\nconst nameSort = (a, b) => {\r\n    var splitA = a.name.split(\" \");\r\n    var splitB = b.name.split(\" \");\r\n    var lastA = splitA[splitA.length - 1];\r\n    var lastB = splitB[splitB.length - 1];\r\n\r\n    if (lastA < lastB) return -1;\r\n    if (lastA > lastB) return 1;\r\n    return 0;\r\n};\r\n\r\n","import * as React from 'react'\r\nimport csv from 'csv-file-creator'\r\nimport ReactTable from 'react-table'\r\nimport Moment from 'moment'\r\nimport update from 'immutability-helper';\r\nimport * as eol from 'eol'\r\nimport map from 'lodash/map'\r\n\r\n//import bookings from '../bookings'\r\n//import { manageEventCheck } from '../permission.ts'\r\n\r\nimport {\r\n    Row,\r\n    Col,\r\n    Button,\r\n    Card,\r\n    CardBody,\r\n    CardTitle,\r\n    CardSubtitle,\r\n} from 'reactstrap';\r\n\r\nimport { woodcraft as W } from '../../../shared/woodcraft'\r\nimport ageFactory from \"../../age\";\r\n\r\nexport default class Participants extends React.Component<any, any> {\r\n    private ageWidgets: { BookingFormWidget: (props) => JSX.Element; displayAgeParticipant: (p) => string; participantCardField: (p) => JSX.Element; displayAgeCSV: (p) => string; displayAgeMoment: (age, event) => string } | { BookingFormWidget: (props) => JSX.Element; displayAgeParticipant: (p) => any; participantCardField: (p) => JSX.Element; displayAgeCSV: (p) => string; displayAgeMoment: (age, event) => any };\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {expanded: null};\r\n\r\n        this.ageWidgets = ageFactory(this.props.Event.toJS());\r\n        this.exportCSV = this.exportCSV.bind(this);\r\n        this.updateExpanded = this.updateExpanded.bind(this);\r\n    }\r\n\r\n    shouldComponentUpdate(nextProps, nextState) {\r\n        //rerendering the tables suck, lets not do it.\r\n        //if (this.state !== nextState) return true;\r\n        //return !this.props.Bookings.equals(nextProps.Bookings);\r\n        return true;\r\n    }\r\n\r\n    componentWillReceiveProps() {\r\n        this.setState(update(this.state, {expanded: {$set: null}}));\r\n    }\r\n\r\n    exportCSV() {\r\n\r\n        const event = this.props.Event.toJS();\r\n\r\n        const startDate = Moment.utc(event.startDate).startOf('day');\r\n        const endDate = Moment.utc(event.endDate).startOf('day').add(1, 'days');\r\n        const days = [];\r\n        let mask = 0;\r\n\r\n\r\n        for (let m = startDate; m.isBefore(endDate); m.add(1, 'days')) {\r\n            //@ts-ignore\r\n            days.push({label: m.format(\"dddd Do\"), value: Math.pow(2, mask)});\r\n            mask++;\r\n        }\r\n\r\n        const exportedData = this.props.participants.map(p => {\r\n            const b = this.props.bookings.find(b => b.id === p.bookingId);\r\n\r\n            const dates = event.partialDatesData.find(d => d.mask === p.days)\r\n            const attend = dates ? dates.name : 'Unknown'\r\n\r\n            const fields = [p.id,\r\n                p.name,\r\n                p.displayAge,\r\n                Moment(p.age).format(\"DD/MM/YYYY\"),\r\n                p.diet,\r\n                p.dietExtra,\r\n                p.medical,\r\n                attend,\r\n                b.userName,\r\n                b.userEmail,\r\n                b.userContact,\r\n                b.emergencyName,\r\n                b.emergencyPhone,\r\n                eol.crlf(b.note || ''),\r\n                p.externalExtra.adultFirstAid,\r\n                p.externalExtra.photoConsent,\r\n                p.externalExtra.adultEmail,\r\n                p.createdAt,\r\n                p.updatedAt];\r\n\r\n            if(event.partialDates === 'free') {\r\n\r\n                days.forEach(d => {\r\n                    //@ts-ignore\r\n                    fields.push(p.days & d.value ? 1 : 0)\r\n                })\r\n\r\n            }\r\n\r\n            return fields\r\n        });\r\n\r\n        const headers = ['id', 'Name', 'Age Group', 'DOB', 'Diet', 'Requirements &  Allergies', 'Medical', 'Attendance', 'Booking Name', 'Booking e-mail', 'Booking Phone', 'Emergency name', 'Emergency Contact', 'Note', 'First Aid', 'Photo', 'Membership email', 'Created At', 'Updated At']\r\n\r\n        if(event.partialDates === 'free') {\r\n\r\n            days.forEach(d => {\r\n                //@ts-ignore\r\n                headers.push(d.label)\r\n            })\r\n        }\r\n        const fileName = this.props.Event.get('name') + \"-Participants-\" + Moment().format('YYYY-MM-DD') + \".csv\";\r\n        csv(fileName, [headers, ...exportedData]);\r\n    }\r\n\r\n    updateExpanded(id) {\r\n        return e => {\r\n            if (id === this.state.expanded) this.setState(update(this.state, {expanded: {$set: null}}));\r\n            else this.setState(update(this.state, {expanded: {$set: id}}));\r\n        }\r\n    }\r\n\r\n    subRow = (row) => {\r\n\r\n        const event = row.original.e;\r\n\r\n        const village = event.villages.find(v => row.original.b.villageId === v.id);\r\n        const organisation = event.organisations.find(o => row.original.b.organisationId === o.id);\r\n        const attendance = event.partialDates === \"presets\" ? event.partialDatesData.find(d => d.mask === row.original.p.days) : null;\r\n\r\n\r\n        return (<Card>\r\n            <CardBody>\r\n                <CardTitle>\r\n                    {row.original.name}\r\n                </CardTitle>\r\n                <Row>\r\n                    <Col sm={4}>\r\n                        {this.ageWidgets.participantCardField(row.original)}\r\n                        {row.original.b.district ? <p><b>Group/District:</b> {row.original.b.district}</p> : null}\r\n                        <p><b>Booking Contact:</b> {row.original.b.userName}</p>\r\n                        <p><b>Booking Contact Phone:</b> {row.original.b.userContact}</p>\r\n                        {village ? <p><b>Village:</b> {village.name}</p> : null}\r\n                        {organisation ? <p><b>Organisation:</b> {organisation.name}</p> : null}\r\n                        {attendance ? <p><b>Attendance:</b> {attendance.name}</p> : null}\r\n                        {!event.bigCampMode ? <p><b>Emergency Contact:</b> {row.original.b.emergencyName}</p> : null}\r\n                        {!event.bigCampMode ? <p><b>Emergency Phone:</b> {row.original.b.emergencyPhone}</p> : null}\r\n                    </Col>\r\n                    <Col sm={4}>\r\n                        <p><b>Diet:</b> {row.original.diet} </p>\r\n                        <p><b>Diet Info:</b></p><p>{row.original.p.dietExtra}</p>\r\n                        <p><b>Anything Else:</b></p><p>{row.original.b.note}</p>\r\n                    </Col>\r\n                    <Col sm={4}>\r\n                        <p><b>Medical:</b></p><p>{row.original.p.medical}</p>\r\n                    </Col>\r\n                </Row>\r\n            </CardBody>\r\n        </Card>);\r\n    };\r\n\r\n    render() {\r\n\r\n        const event = this.props.Event.toJS();\r\n        const bookings = this.props.filteredBookings;\r\n        const participants = this.props.filteredParticipants;\r\n\r\n        const groups = W.reduce((a, w) => {\r\n            const people = participants.filter((p) => p.ageGroup === '' ? false : p.ageGroup === w.singular);\r\n            if (people.length === 0) return a;\r\n            return a + ` ${w.name}: ${people.length}`;\r\n        }, '');\r\n\r\n        //const prows = participants.sort(nameSort).map(p => <tr key={p.id}><td>{p.name}</td><td>{p.age}</td><td>{p.diet}</td><td>{bookings.find(b => b.id === p.bookingId).userName}</td></tr>)\r\n\r\n        const data = participants.map(p => {\r\n            const b = bookings.find(b => b.id === p.bookingId);\r\n            return {\r\n                name: p.name,\r\n                dob: p.age,\r\n                age: p.displayAge,\r\n                diet: p.diet,\r\n                createdAt: p.prettyCreatedAt,\r\n                district: b.district,\r\n                p: p,\r\n                b: b,\r\n                e: event\r\n            };\r\n        });\r\n\r\n\r\n        const columns = [{\r\n            id: \"name\",\r\n            accessor: row => row,\r\n            Header: \"Name\",\r\n            sortable: true,\r\n            sortMethod: nameSort,\r\n            Cell: row => row.value.name\r\n        }];\r\n\r\n        if (event.bigCampMode) { // @ts-ignore\r\n            columns.push({accessor: \"district\", Header: \"District\", sortable: true});\r\n        }\r\n\r\n        columns.push({\r\n                id: 'age',\r\n                accessor: row => row,\r\n                Header: \"Age\",\r\n                sortable: true,\r\n                sortMethod: dobSort,\r\n                Cell: row => row.original.age,\r\n                //width: 120\r\n            },// @ts-ignore\r\n            {accessor: \"diet\", Header: \"Diet\", sortable: true, minWidth: 50});\r\n\r\n        if (event.partialDates === 'presets') columns.push({\r\n            id: 'presets',\r\n            accessor: row => row,\r\n            Cell: row => {\r\n                const data = row.original.e.partialDatesData.find(d => d.mask === row.original.p.days)\r\n                return data ? data.name : 'Unknown'\r\n            },\r\n            Header: \"Attendance\",// @ts-ignore\r\n            sortMethod: partialAttendanceSort,\r\n            //width: 150,\r\n            sortable: true\r\n        });\r\n\r\n        columns.push(\r\n            {\r\n                id: 'createdAt',\r\n                accessor: row => row,\r\n                Cell: row => row.original.createdAt,\r\n                sortMethod: createdSort,\r\n                Header: \"Created At\",\r\n                sortable: true,\r\n                //minWidth: 50\r\n            });\r\n\r\n        if(event.partialDates === 'free')columns.push({\r\n            id:         'popcount',\r\n            accessor:   row => row,\r\n            Cell:       row => bitCount(row.original.p.days),\r\n            Header:     \"Days\",// @ts-ignore\r\n            sortMethod: daysSort,\r\n            width:      60,\r\n            sortable:   true\r\n        });\r\n\r\n        if (event.customQuestions.adultFirstAid) columns.push({\r\n                                                                  id:         'firstaid',\r\n                                                                  accessor:   row => row,\r\n                                                                  Cell:       row => row.original.p.externalExtra.adultFirstAid === 'yes' ? '✅' : '',\r\n                                                                  Header:     \"⚕️\",// @ts-ignore\r\n                                                                  sortMethod: firstAidSort,\r\n                                                                  width:      40,\r\n                                                                  sortable:   true\r\n                                                              });\r\n\r\n        if (event.customQuestions.photoConsent) columns.push({\r\n            id:         'photo',\r\n            accessor:   row => row,\r\n            Cell:       row => row.original.p.externalExtra.photoConsent === 'yes' ? '✅' : '',\r\n            Header:     \"📷 \",// @ts-ignore\r\n            sortMethod: photoSort,\r\n            width:      40,\r\n            sortable:   true\r\n        });\r\n\r\n        const expanded = {[this.state.expanded]: true};\r\n\r\n        return (<React.Fragment>\r\n            <Row>\r\n                <Col>\r\n                    <Button className=\"float-right\" onClick={this.exportCSV}>Export CSV</Button>\r\n                    <h4>Total Participants: {participants.length}</h4>\r\n                    <p>{groups}</p>\r\n                </Col>\r\n            </Row>\r\n            <Row>\r\n                <Col>\r\n                    <ReactTable\r\n                        expanded={expanded}\r\n                        getTrProps={(state, rowInfo, column) => {\r\n                            if (rowInfo) return {onClick: this.updateExpanded(rowInfo.viewIndex)};\r\n                            return {}\r\n                        }}\r\n                        onSortedChange={this.updateExpanded(null)}\r\n                        onPageChange={this.updateExpanded(null)}\r\n                        SubComponent={this.subRow}\r\n                        data={data}\r\n                        columns={columns}\r\n                        showPageSizeOptions={false}\r\n                        showPagination={true}\r\n                        defaultPageSize={50}/>\r\n                </Col>\r\n            </Row>\r\n        </React.Fragment>);\r\n    }\r\n}\r\n\r\nconst dobSort = (a, b) => {\r\n    return a.dob < b.dob ? 1 : -1;\r\n};\r\n\r\nconst createdSort = (a, b) => {\r\n    return a.p.createdAt > b.p.createdAt ? 1 : -1;\r\n};\r\n\r\nconst firstAidSort = (a, b) => {// @ts-ignore\r\n    return !!(a.p.externalExtra.adultFirstAid === 'yes') - !!(b.p.externalExtra.adultFirstAid === 'yes');\r\n}\r\n\r\nconst photoSort = (a, b) => {// @ts-ignore\r\n    return !!(a.p.externalExtra.photoConsent === 'yes') - !!(b.p.externalExtra.photoConsent === 'yes');\r\n}\r\nconst daysSort = (a, b) => {\r\n    return bitCount(a.p.days) - bitCount(b.p.days);\r\n}\r\n\r\nconst partialAttendanceSort = (a, b) => {\r\n    return a.p.days - b.p.days;\r\n}\r\n\r\nconst nameSort = (a, b) => {\r\n    var splitA = a.name.trim().split(\" \");\r\n    var splitB = b.name.trim().split(\" \");\r\n    var lastA = splitA[splitA.length - 1];\r\n    var lastB = splitB[splitB.length - 1];\r\n\r\n    if (lastA < lastB) return -1;\r\n    if (lastA > lastB) return 1;\r\n    return 0;\r\n};\r\n\r\n// https://stackoverflow.com/questions/43122082/efficiently-count-the-number-of-bits-in-an-integer-in-javascript/43122214\r\nfunction bitCount (n) {\r\n    n = n - ((n >> 1) & 0x55555555);\r\n    n = (n & 0x33333333) + ((n >> 2) & 0x33333333);\r\n    return ((n + (n >> 4) & 0xF0F0F0F) * 0x1010101) >> 24\r\n}\r\n","import * as React         from 'react'\r\nimport update        from 'immutability-helper';\r\nimport {Typeahead}   from 'react-bootstrap-typeahead';\r\nimport ReactMarkdown from 'react-markdown'\r\n\r\nimport {manageWholeEventCheck} from '../permission'\r\nimport csv from 'csv-file-creator'\r\n\r\nimport {\r\n    Row,\r\n    Col,\r\n    Button,\r\n    FormGroup,\r\n    Table,\r\n    Label,\r\n    Input\r\n} from 'reactstrap';\r\n\r\nimport  { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport  { faTimes } from '@fortawesome/free-solid-svg-icons'\r\nimport Moment from 'moment'\r\n\r\nclass Roles extends React.Component<any, any> {\r\n    private event: any;\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {role: 'Manage', org: '', village: '', user: []};\r\n\r\n        this.updateOption = this.updateOption.bind(this);\r\n        this.updateUser = this.updateUser.bind(this);\r\n        this.addRole = this.addRole.bind(this);\r\n        this.deleteRole = this.deleteRole.bind(this);\r\n        this.exportCSV = this.exportCSV.bind(this);\r\n\r\n        this.event = this.props.Event.toJS();\r\n    }\r\n\r\n    componentWillMount() {\r\n        this.props.getUserList(this.event.id);\r\n    }\r\n\r\n    updateOption(section) {\r\n        return e => {\r\n            this.setState(update(this.state, {[section]: {$set: e.target.value}}));\r\n            e.preventDefault()\r\n        }\r\n    }\r\n\r\n    updateUser(user) {\r\n        this.setState(update(this.state, {user: {$set: user}}));\r\n    }\r\n\r\n    addRole(e) {\r\n\r\n        const role = {\r\n            userId: this.state.user[0].id,\r\n            eventId: this.props.Event.get('id'),\r\n            name: this.state.role,\r\n            organisationId: undefined,\r\n            villageId: undefined\r\n        };\r\n        //@ts-ignore\r\n        if (this.state.org !== '') role.organisationId = parseInt(this.state.org);\r\n        //@ts-ignore\r\n        if (this.state.village !== '') role.villageId = parseInt(this.state.village);\r\n\r\n        this.props.addRole(role);\r\n\r\n        this.setState({role: 'Manage', org: '', village: '', user: []});\r\n        // @ts-ignore\r\n        this.refs.typeahead.getInstance().clear();\r\n        e.preventDefault()\r\n    }\r\n\r\n    deleteRole(id) {\r\n        return e => {\r\n            this.props.deleteRole(id);\r\n            e.preventDefault()\r\n        }\r\n    }\r\n\r\n    exportCSV() {\r\n\r\n        const event = this.props.Event.toJS();\r\n        const bookings = this.props.bookings\r\n\r\n        const headers = ['id', 'name', 'email', 'role', 'note', 'organisation', 'village', 'createdAt', 'booked', 'participants'];\r\n\r\n        const exportedData = event.roles.map(r => {\r\n\r\n            return [r.id,\r\n                    r.user.userName,\r\n                    r.user.email,\r\n                    r.name,\r\n                    r.note,\r\n                    r.organisation ? r.organisation.name : '',\r\n                    r.village ? r.village.name : '',\r\n                    r.createdAt,\r\n                    bookings.find(b => b.userId === r.user.id) ? 'yes': 'no',\r\n                    bookings.find(b => b.userId === r.user.id) ? bookings.find(b => b.userId === r.user.id).participants.length : '']\r\n        });\r\n\r\n        const fileName = this.props.Event.get('name') + \"-Roles-\" + Moment().format('YYYY-MM-DD') + \".csv\";\r\n        csv(fileName, [headers, ...exportedData]);\r\n    }\r\n\r\n    render() {\r\n\r\n        const event = this.props.Event.toJS();\r\n        const userList = this.props.UserList.toJS().map(u => {\r\n            u.search = u.userName + ' <' + (u.email || '') + '>';\r\n            return u;\r\n        }).sort((a, b) => nameSort(a.search, b.search));\r\n\r\n        const globalRoles = event.roles.filter(r => r.villageId === null && r.organisationId === null && r.name !== 'book');\r\n\r\n        globalRoles.unshift({id: 0, name: \"Owner\", user: event.user});\r\n\r\n        const globalRows = globalRoles.map(r => <tr key={r.id}>\r\n            <td>{r.user.userName}</td>\r\n            <td>{r.name}</td>\r\n            <td>{r.name === \"Owner\" ? null :\r\n\r\n                <Button onClick={this.deleteRole(r.id)} color=\"warning\" size=\"sm\" className=\"float-right\"\r\n                        aria-label=\"Delete\">\r\n                    <span aria-hidden=\"true\"><FontAwesomeIcon\r\n                        icon={faTimes}/></span>\r\n                </Button>\r\n            }</td>\r\n        </tr>);\r\n\r\n        const bookRoles = event.roles.filter(r => r.name === 'book');\r\n\r\n        bookRoles.sort((a, b) => a.note > b.note);\r\n\r\n        const bookRows = bookRoles.map(r => <tr key={r.id}>\r\n            <td>{r.user.userName}</td>\r\n            <td>\r\n                <ReactMarkdown  children={r.note}/></td>\r\n            <td><Button onClick={this.deleteRole(r.id)} color=\"warning\" size=\"sm\" className=\"float-right\"\r\n                        aria-label=\"Delete\">\r\n                    <span aria-hidden=\"true\"><FontAwesomeIcon\r\n                        icon={faTimes}/></span>\r\n            </Button>\r\n            </td>\r\n        </tr>);\r\n\r\n        const orgRoles = event.roles.filter(r => r.organisationId !== null);\r\n        const orgRows = orgRoles.map(r => <tr key={r.id}>\r\n            <td>{r.user.userName}</td>\r\n            <td>{r.name}</td>\r\n            <td>{r.organisation.name}</td>\r\n            <td>\r\n                <Button onClick={this.deleteRole(r.id)} color=\"warning\" size=\"sm\" className=\"float-right\"\r\n                        aria-label=\"Delete\">\r\n                    <span aria-hidden=\"true\"><FontAwesomeIcon\r\n                        icon={faTimes}/></span>\r\n                </Button>\r\n            </td>\r\n        </tr>);\r\n\r\n        const villageRoles = event.roles.filter(r => r.villageId !== null);\r\n        const villageRows = villageRoles.map(r => <tr key={r.id}>\r\n            <td>{r.user.userName}</td>\r\n            <td>{r.name}</td>\r\n            <td>{r.village.name}</td>\r\n            <td>\r\n                <Button onClick={this.deleteRole(r.id)} color=\"warning\" size=\"sm\" className=\"float-right\"\r\n                        aria-label=\"Delete\">\r\n                    <span aria-hidden=\"true\"><FontAwesomeIcon\r\n                        icon={faTimes}/></span>\r\n                </Button>\r\n            </td>\r\n        </tr>);\r\n\r\n        const orgOptions = event.organisations.map(o => <option key={o.id} value={o.id}>{o.name}</option>);\r\n        const villageOptions = event.villages.map(v => <option key={v.id} value={v.id}>{v.name}</option>);\r\n\r\n        return (<React.Fragment>\r\n            <Row>\r\n            <Col sm={12}>\r\n                <Button className=\"float-right top5\" onClick={this.exportCSV}>Export CSV</Button>\r\n                <h6 className=\"top5\">Here you can assign roles to other users so they can help you administer the event</h6>\r\n            </Col>\r\n            </Row>\r\n            <Row>\r\n            <Col sm={5}>\r\n                <FormGroup>\r\n                    <Label>User:</Label>\r\n                    <Typeahead\r\n                        ref=\"typeahead\"\r\n                        options={userList}\r\n                        labelKey=\"search\"\r\n                        onChange={this.updateUser}\r\n                        placeholder=\"Name\"/>\r\n                </FormGroup>\r\n            </Col>\r\n            <Col sm={2}>\r\n                <FormGroup>\r\n                    <Label className=\"control-label\">Role:</Label>\r\n                    <Input type=\"select\" value={this.state.role} onChange={this.updateOption(\"role\")}\r\n                           className=\"form-control\">\r\n                        <option value=\"Manage\">Manage</option>\r\n                        <option value=\"View\">View</option>\r\n                        <option value=\"Kp\">Kp</option>\r\n                        <option value=\"Money\">Money</option>\r\n                        <option value=\"book\">Book</option>\r\n                    </Input>\r\n                </FormGroup>\r\n            </Col>\r\n            <Col sm={2}>\r\n                <FormGroup>\r\n                    <Label className=\"control-label\">Organisation:</Label>\r\n                    <Input type=\"select\" value={this.state.org} onChange={this.updateOption(\"org\")}\r\n                           className=\"form-control\">\r\n                        <option value={''}>All</option>\r\n                        {orgOptions}\r\n                    </Input>\r\n                </FormGroup>\r\n            </Col>\r\n            <Col sm={2}>\r\n                <FormGroup>\r\n                    <Label className=\"control-label\">Village:</Label>\r\n                    <Input type=\"select\" value={this.state.village} onChange={this.updateOption(\"village\")}\r\n                           className=\"form-control\">\r\n                        <option value={''}>All</option>\r\n                        {villageOptions}\r\n                    </Input>\r\n                </FormGroup>\r\n            </Col>\r\n            <Col sm={1}>\r\n                <Label className=\"control-label\">&nbsp;</Label>\r\n                <Button className=\"form-control\" disabled={this.state.user.length !== 1} type=\"submit\" onClick={this.addRole}\r\n                        color=\"success\">Add\r\n                </Button>\r\n            </Col>\r\n            <Col sm={12}>\r\n                <h4>Event Roles</h4>\r\n                <p>These roles grant access to the whole event, Managers here can also assign Villages and Roles.</p>\r\n                <Table striped size=\"sm\">\r\n                    <thead>\r\n                    <tr>\r\n                        <th>User</th>\r\n                        <th>Role</th>\r\n                        <th></th>\r\n                    </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                    {globalRows}\r\n                    </tbody>\r\n                </Table>\r\n                <h4>Book Roles</h4>\r\n                <p>These are users who can book into the event:</p>\r\n                <Table striped size=\"sm\">\r\n                    <thead>\r\n                    <tr>\r\n                        <th>User</th>\r\n                        <th>Note</th>\r\n                        <th></th>\r\n                    </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                    {bookRows}\r\n                    </tbody>\r\n                </Table>\r\n                <h4>Organisation Roles</h4>\r\n                <p>These grant access to bookings within the specified organisation only</p>\r\n                <Table striped size=\"sm\">\r\n                    <thead>\r\n                    <tr>\r\n                        <th>User</th>\r\n                        <th>Role</th>\r\n                        <th>Organisation</th>\r\n                        <th></th>\r\n                    </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                    {orgRows}\r\n                    </tbody>\r\n                </Table>\r\n                <h4>Village Roles</h4>\r\n                <p>These grant access to bookings within the specified Village only</p>\r\n                <Table striped size=\"sm\">\r\n                    <thead>\r\n                    <tr>\r\n                        <th>User</th>\r\n                        <th>Role</th>\r\n                        <th>Village</th>\r\n                        <th></th>\r\n                    </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                    {villageRows}\r\n                    </tbody>\r\n                </Table>\r\n            </Col>\r\n        </Row>\r\n        </React.Fragment>);\r\n\r\n    }\r\n}\r\n\r\nexport default manageWholeEventCheck(Roles);\r\n\r\nconst nameSort = (a, b) => {\r\n    var splitA = a.split(\" \");\r\n    var splitB = b.split(\" \");\r\n    var lastA = splitA[splitA.length - 1];\r\n    var lastB = splitB[splitB.length - 1];\r\n\r\n    if (lastA < lastB) return -1;\r\n    if (lastA > lastB) return 1;\r\n    return 0;\r\n};","import * as React from 'react'\r\nimport {DragDropContext, Draggable, Droppable} from 'react-beautiful-dnd'\r\nimport update from 'immutability-helper';\r\n\r\n//import bookings from '../bookings'\r\nimport {manageWholeEventCheck} from '../permission'\r\nimport * as Immutable from \"immutable\";\r\n\r\nimport {\r\n    Row,\r\n    Col,\r\n    Button,\r\n    Card,\r\n    CardBody,\r\n    CardTitle,\r\n    Input,\r\n    Table,\r\n    CardColumn,\r\n    CardDeck\r\n} from 'reactstrap';\r\n\r\nimport  { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport  { faTimes } from '@fortawesome/free-solid-svg-icons'\r\nimport  { faPlus } from '@fortawesome/free-solid-svg-icons'\r\nimport { woodcraft as W } from '../../../shared/woodcraft.js'\r\n\r\n//import W from '../../../shared/woodcraft.js'\r\n\r\nclass Villages extends React.Component<any, any> {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {newVillageName: ''};\r\n\r\n        this.onDragEnd = this.onDragEnd.bind(this);\r\n        this.updateVillageName = this.updateVillageName.bind(this);\r\n        this.addVillage = this.addVillage.bind(this);\r\n        this.renameVillage = this.renameVillage.bind(this);\r\n    };\r\n\r\n    static textColour(total) {\r\n        if (total < 80) return \"green\";\r\n        if (total < 100) return \"gold\";\r\n        return \"red\";\r\n    };\r\n\r\n    updateVillageName(e) {\r\n\r\n        this.setState(update(this.state, {newVillageName: {$set: e.target.value}}));\r\n\r\n        e.preventDefault()\r\n    }\r\n\r\n    addVillage(e) {\r\n        this.props.addVillage({\r\n            name: this.state.newVillageName,\r\n            eventId: this.props.Event.get(\"id\")\r\n        });\r\n        e.preventDefault();\r\n        this.setState(update(this.state, {newVillageName: {$set: ''}}));\r\n    }\r\n\r\n    deleteVillage(id) {\r\n        return e => {\r\n            //@ts-ignore\r\n            if (confirm(\"Are you sure you want to delete this village?\")) {\r\n                this.props.deleteVillage(id);\r\n            }\r\n            e.preventDefault();\r\n        }\r\n    }\r\n\r\n    renameVillage(id, oldName) {\r\n        return e => {\r\n            //@ts-ignore\r\n            const newName = prompt(\"Rename Village\", oldName)\r\n            if(newName && newName !== \"\") this.props.renameVillage(id, newName);\r\n            e.preventDefault();\r\n        }\r\n    }\r\n\r\n    onDragEnd(result) {\r\n        if (result.destination === null) return;\r\n        //@ts-ignore\r\n        const bookingId = parseInt(/b([\\d]+)/.exec(result.draggableId)[1]);\r\n        //@ts-ignore\r\n        const villageId = result.destination.droppableId === \"empty\" ? null : parseInt(/v([\\d]+)/.exec(result.destination.droppableId)[1]);\r\n\r\n        this.props.assignVillage(bookingId, villageId);\r\n    }\r\n\r\n    render() {\r\n\r\n        const event = this.props.Event.toJS();\r\n        const bookings = this.props.bookings;\r\n        const participants = bookings.reduce((r, b) => [...r, ...b.participants], []);\r\n        //const participants = this.props.Bookings.reduce((r, b) => r.concat(b.get(\"participants\")), Immutable.List()).toJS();\r\n\r\n        const villages = (event.villages || []).map(v => {\r\n\r\n            v.participants = bookings.reduce((a, b) =>\r\n                    b.villageId === v.id ? a + participants.filter(p => p.bookingId === b.id).length : a\r\n                , 0);\r\n            v.bookings = bookings.filter(b => b.villageId === v.id).map(b => {\r\n                return {...b, size: participants.filter(p => p.bookingId === b.id).length}\r\n            }).sort((a, b) => b.size - a.size);\r\n            return v;\r\n        }).sort((a,b) => {\r\n            const numberA = /Village ([0-9]+)/.exec(a.name)\r\n            const numberB = /Village ([0-9]+)/.exec(b.name)\r\n\r\n            if(numberA && numberB){\r\n                return parseInt(numberA[1]) - parseInt(numberB[1])\r\n            } else {\r\n                return (a.name || \"\").localeCompare((b.name || \"\"))\r\n            }\r\n        });\r\n\r\n        const unassignedBookings = bookings.filter(b => b.villageId === null).map(b => {\r\n            return {...b, size: participants.filter(p => p.bookingId === b.id).length}\r\n        }).sort((a, b) => b.size - a.size);\r\n\r\n        const unassignedBoxes = unassignedBookings.map(b =>\r\n            <Draggable key={b.id} draggableId={'b' + b.id}>\r\n                {(provided, snapshot) => {\r\n                    const style = {\r\n                        ...provided.draggableStyle,\r\n                        cursor: 'pointer'\r\n                    };\r\n\r\n                    const participantList = b.participants.length < 6 ? b.participants.map(p => <li key={p.id}>{p.name}</li>) : null\r\n\r\n                    return (\r\n                        <div ref={provided.innerRef}\r\n                             style={style}\r\n                             {...provided.dragHandleProps}>\r\n                            <Card className=\"mb-3\">\r\n                                <CardBody>\r\n                                    <CardTitle>{(event.bigCampMode ? b.district : b.userName) + \" (\" + b.size + \")\"}</CardTitle>\r\n                                    <p>{b.campWith}</p>\r\n                                    <ul>{participantList}</ul>\r\n                                </CardBody>\r\n                            </Card>\r\n                        </div>)\r\n                }}\r\n            </Draggable>);\r\n\r\n        const villageBoxes = villages.map(v => {\r\n            const groups = W.reduce((a, w) => {\r\n                const people = v.bookings.reduce((acc,c) => {\r\n                    const current = c.participants.filter((p) => p.ageGroup === '' ? false : p.ageGroup === w.singular)\r\n                    acc += current.length\r\n                    return acc\r\n                },0)\r\n                if (people === 0) return a;\r\n                return a + ` ${w.name}: ${people}`;\r\n            }, '');\r\n\r\n\r\n            const bookings = v.bookings.map(b =>\r\n\r\n                <Draggable key={b.id} draggableId={'b' + b.id}>\r\n                    {(provided, snapshot) => {\r\n\r\n                        const style = {\r\n                            ...provided.draggableStyle,\r\n                            cursor: 'pointer'\r\n                        };\r\n\r\n                        return (\r\n                            <div ref={provided.innerRef}\r\n                                 style={style}\r\n                                 {...provided.dragHandleProps}>\r\n                                {(event.bigCampMode ? b.district : b.userName) + ' (' + b.size + ')'}\r\n                            </div>)\r\n                    }}\r\n                </Draggable>\r\n            );\r\n\r\n            return <Droppable key={v.id} droppableId={'v' + v.id}>\r\n                {(provided, snapshot) => (\r\n                    <Card>\r\n                        <CardBody>\r\n                            <Button outline color=\"warning\" onClick={this.deleteVillage(v.id)}\r\n                                    className=\"float-right\"\r\n                                    aria-label=\"Close\"><span aria-hidden=\"true\"><FontAwesomeIcon\r\n                                icon={faTimes}/></span>\r\n                            </Button>\r\n                            <CardTitle onClick={this.renameVillage(v.id, v.name)}>{v.name}</CardTitle>\r\n                            <div ref={provided.innerRef} style={{minHeight: \"20px\"}}>\r\n                                {bookings}\r\n                                {provided.placeholder}\r\n                            </div>\r\n                            <p>\r\n                                <b style={{color:Villages.textColour(v.participants)}}>Total: {v.participants}</b><br />\r\n                                <span style={{fontSize:\"80%\"}}>{groups}</span>\r\n                            </p>\r\n                        </CardBody>\r\n                    </Card>\r\n                )}\r\n            </Droppable>;\r\n        });\r\n\r\n        villageBoxes.push(<Card key=\"new\">\r\n                <CardBody>\r\n                    <CardTitle>Add Village</CardTitle>\r\n                    <Input type=\"text\"\r\n                           placeholder=\"Name\"\r\n                           value={this.state.newVillageName}\r\n                           onChange={this.updateVillageName}\r\n\r\n                    />\r\n                    <Button className=\"mt-2\"\r\n                            disabled={this.state.newVillageName === ''}\r\n                            color=\"success\"\r\n                            onClick={this.addVillage}>\r\n                        <span aria-hidden=\"true\"><FontAwesomeIcon\r\n                            icon={faPlus}/></span> Add\r\n                    </Button>\r\n                </CardBody>\r\n            </Card>\r\n        );\r\n\r\n\r\n        const villageCardDecks = villageBoxes.reduce((a, c) => {\r\n            a[a.length - 1].length > 2 ? a.push([c]) : a[a.length - 1].push(c)\r\n            return a\r\n        }, [[]])\r\n            .map((a, i) => <CardDeck className=\"mb-3\" key={i}>{a}</CardDeck>);\r\n\r\n        return (<DragDropContext onDragEnd={this.onDragEnd}>\r\n            <Row>\r\n                <Col>\r\n                    <h4>Drag and drop to configure villages</h4>\r\n                </Col>\r\n            </Row>\r\n            <Row>\r\n                <Col sm={3}>\r\n                    <h5>Unassigned:</h5>\r\n                    <Droppable droppableId=\"empty\">\r\n                        {(provided, snapshot) => (\r\n                            <div ref={provided.innerRef} className=\"unassignedVillages\">\r\n                                {unassignedBoxes}\r\n                                {provided.placeholder}\r\n                            </div>\r\n                        )}\r\n                    </Droppable>\r\n                </Col>\r\n                <Col sm={9}>\r\n                    {villageCardDecks}\r\n                </Col>\r\n            </Row>\r\n        </DragDropContext>);\r\n    }\r\n}\r\n\r\nexport default manageWholeEventCheck(Villages);","import containerPage from './components/containerPage'\r\nimport participants from './components/participants'\r\nimport bookings from './components/bookings'\r\nimport kp from './components/kp'\r\nimport villages from './components/villages'\r\nimport * as actions from './actions'\r\n\r\n\r\nexport {containerPage, participants, bookings, kp, villages, actions}","import {connectedRouterRedirect} from 'redux-auth-wrapper/history4/redirect'\r\n\r\nimport * as P from '../../shared/permissions'\r\nimport connectedAuthWrapper from \"redux-auth-wrapper/connectedAuthWrapper\";\r\n\r\nexport const manageEventCheck = connectedRouterRedirect({\r\n\tauthenticatedSelector: (state, props) => {\r\n        return P.manageEvent(state.getIn([\"User\", \"user\"]).toJS(), state.getIn([\"Events\", \"events\", parseInt(props.match.params.eventId)]).toJS());\r\n\t},\r\n\tredirectPath: \"/user\",\r\n\twrapperDisplayName: \"Manage Event Check\"\r\n});\r\n\r\nexport const manageWholeEventWrapper = connectedAuthWrapper({\r\n    authenticatedSelector: (state, props) => {\r\n        const user = state.getIn([\"User\", \"user\"]).toJS();\r\n        const event = state.getIn([\"Events\", \"events\", parseInt(props.match.params.eventId)]).toJS();\r\n        return P.manageWholeEvent(user, event);\r\n    },\r\n    wrapperDisplayName: \"manageWholeEventWrapper\"\r\n});\r\n\r\nexport const manageRolesWrapper = connectedAuthWrapper({\r\n    authenticatedSelector: (state, props) => {\r\n        const user = state.getIn([\"User\", \"user\"]).toJS();\r\n        const event = state.getIn([\"Events\", \"events\", parseInt(props.match.params.eventId)]).toJS();\r\n        return P.createRole(user, event);\r\n    },\r\n    wrapperDisplayName: \"manageWholeEventWrapper\"\r\n});\r\n\r\nexport const manageWholeEventCheck = connectedRouterRedirect({\r\n    authenticatedSelector: (state, props) => {\r\n        const user = state.getIn([\"User\", \"user\"]).toJS();\r\n        const event = state.getIn([\"Events\", \"events\", parseInt(props.match.params.eventId)]).toJS();\r\n        return P.manageWholeEvent(user, event);\r\n    },\r\n    redirectPath: \"/user\",\r\n    wrapperDisplayName: \"manageWholeEventCheck\"\r\n});\r\n\r\nexport const showBookingEditLink = connectedAuthWrapper({\r\n    authenticatedSelector: (state, props) => {\r\n        return P.editBooking(state.getIn([\"User\", \"user\"]).toJS(), props.event, props.booking);\r\n    },\r\n    wrapperDisplayName: \"showBookingEditLink\"\r\n});\r\n\r\nexport const manageMoneyWrapper = connectedAuthWrapper({\r\n    authenticatedSelector: (state, props) => {\r\n        const user = state.getIn([\"User\", \"user\"]).toJS();\r\n        const event = state.getIn([\"Events\", \"events\", parseInt(props.match.params.eventId)]).toJS();\r\n        return P.viewMoney(user, event);\r\n    },\r\n    wrapperDisplayName: \"manageWholeEventWrapper\"\r\n});","\r\nexport const SET_SUCCESS_MESSAGE = 'MESSAGE_SET_SUCCESS_MESSAGE'\r\n\r\nexport const setSuccess = (message) => {\r\n\treturn {\r\n\t\ttype: SET_SUCCESS_MESSAGE,\r\n\t\tmessage: message\r\n\t}\r\n}\r\n\r\nexport const SET_WARNING_MESSAGE = 'MESSAGE_SET_WARNING_MESSAGE'\r\n\r\nexport const setWarning = (message) => {\r\n\treturn {\r\n\t\ttype: SET_WARNING_MESSAGE,\r\n\t\tmessage: message\r\n\t}\r\n}","import * as React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport {\r\n    UncontrolledAlert,\r\n    Col\r\n} from 'reactstrap';\r\n\r\nclass Messages extends React.Component<any, any> {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst data = this.props.Messages.toObject();\r\n\r\n        let success: any, warning: any = null\r\n\r\n        if (data.success && new Date().getTime() - data.success.time.getTime() < 10000)success = <UncontrolledAlert\r\n            color=\"success\">{data.success.message}</UncontrolledAlert>\r\n        if (data.warning && new Date().getTime() - data.warning.time.getTime() < 10000)warning = <UncontrolledAlert\r\n            color=\"warning\">{data.warning.message}</UncontrolledAlert>\r\n\t\tif (!success && !warning) return null;\r\n\r\n        return (<Col sm={12}>\r\n            {success}\r\n            {warning}\r\n        </Col>)\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    const Messages = state.get(\"Messages\");\r\n    const router = state.get(\"router\");\r\n    return {Messages, router};\r\n};\r\n/*\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    doLogin:(credentials) => dispatch(doLogin(credentials))\r\n  }\r\n}\r\n*/\r\n\r\nconst mapDispatchToProps = {};\r\n\r\nvar VisibleMessages = connect(\r\n\tmapStateToProps,\r\n\tmapDispatchToProps\r\n)(Messages);\r\n\r\nexport default VisibleMessages;","import * as actions from './actions'\r\nimport reducer from './reducer'\r\n\r\nimport messages from './components/messages'\r\n\r\nexport { actions, reducer, messages };","import * as Immutable from 'immutable'\r\nimport * as a from './actions'\r\n\r\n\r\nconst initalMessageState = Immutable.Map();\r\n\r\nexport default function Messages(state = initalMessageState, action) {\r\n\tswitch (action.type) {\r\n\t\tcase a.SET_WARNING_MESSAGE: return state.set(\"warning\", { message: action.message, time: new Date() }).set(\"success\", null);\r\n\t\tcase a.SET_SUCCESS_MESSAGE: return state.set(\"success\", { message: action.message, time: new Date() }).set(\"warning\", null);\r\n\t}\r\n\treturn state;\r\n\r\n}","import * as React from 'react'\r\n//import { Router, Route, Link, IndexRoute, browserHistory } from 'react-router'\r\nimport {Route, Switch} from 'react-router-dom';\r\n\r\nimport App from './app'\r\nimport * as user from './user'\r\nimport * as events from './events'\r\nimport * as bookings from './bookings'\r\nimport * as manage from './manage'\r\n\r\nexport default (\r\n    <App>\r\n        <Switch>\r\n            <Route exact path=\"/\" component={events.listPage}/>\r\n            <Route path=\"/user\" component={user.userPage}/>\r\n            <Route path=\"/event/create\" component={events.createPage}/>\r\n            <Route path=\"/event/:eventId(\\d+)\">\r\n                <Switch>\r\n                    <Route exact path=\"/event/:eventId(\\d+)/book\" component={bookings.myBookingPage}/>\r\n                    <Route exact path=\"/event/:eventId(\\d+)/book/thanks\" component={bookings.thanksPage}/>\r\n                    <Route exact path=\"/event/:eventId(\\d+)/apply\" component={bookings.applyPage}/>\r\n                    <Route exact path=\"/event/:eventId(\\d+)/apply/thanks\" component={bookings.applyThanksPage}/>\r\n                    <Route exact path=\"/event/:eventId(\\d+)/edit\" component={events.editPage}/>\r\n                    <Route path=\"/event/:eventId(\\d+)/manage\"\r\n                           component={manage.containerPage /* Loads all Bookings for an event */}/>\r\n                </Switch>\r\n            </Route>\r\n            <Route path=\"/booking/:bookingId\" component={bookings.loader}/>\r\n            <Route path=\"/cancel\" component={bookings.cancelPage}/>\r\n            <Route path=\"/guestUUID/:eventId(\\d+)/:guestUUID\" component={bookings.myBookingPage}/>\r\n        </Switch>\r\n    </App>\r\n)\r\n","import fetch from '../fetch'\r\nimport {push} from 'react-router-redux'\r\nimport * as m from '../messages'\r\n\r\nimport { storageFactory } from \"storage-factory\";\r\n//@ts-ignore\r\nconst local = storageFactory(() => localStorage);\r\n\r\nexport const UPDATE_USER = 'USER_UPDATE_USER';\r\n\r\nexport const getUser = () => {\r\n    return (dispatch, getState) => {\r\n        fetch('/api/user', \"GET\")\r\n            .then(j => {\r\n                if(j.remoteId)local.setItem('userId', j.remoteId.substr(0, 4));\r\n                const user = getState().get('User').toJS();\r\n                if (!user.user || user.user.id !== j.id) dispatch(updateUser(j))\r\n            });\r\n    }\r\n};\r\n\r\nexport const doLogin = (credentials) => {\r\n    return (dispatch) => {\r\n        fetch('/api/user/login', \"POST\", credentials)\r\n            .then(j => {\r\n                    if(j.remoteId)local.setItem('userId', j.remoteId.substr(0, 4));\r\n                    dispatch(updateUser(j));\r\n                    dispatch(m.actions.setSuccess(\"Logged in\"));\r\n                    dispatch(push('/'));\r\n                },\r\n                e => {\r\n                    if (e.status === 401) dispatch(m.actions.setWarning(\"Invalid e-mail or password\"));\r\n                });\r\n    };\r\n};\r\n\r\nexport const doLogout = () => {\r\n    return (dispatch) => {\r\n        fetch('/api/user/logout', \"POST\")\r\n            .then(j => {\r\n                dispatch(updateUser(j));\r\n                dispatch(m.actions.setSuccess(\"Logged out\"));\r\n                dispatch(push('/'));\r\n            });\r\n    };\r\n};\r\n\r\n\r\nexport const updateUser = user => {\r\n    return {\r\n        type: UPDATE_USER,\r\n        user: user\r\n    }\r\n};\r\n\r\nexport const getUserList = (eventId) => dispatch => {\r\n    fetch('/api/users/' + eventId, 'GET')\r\n        .then(u => dispatch(updateList(u.users)));\r\n};\r\n\r\nexport const UPDATE_LIST = \"USERS_UPDATE_LIST\";\r\n\r\nconst updateList = users => {\r\n    return {\r\n        type: UPDATE_LIST,\r\n        users: users\r\n    }\r\n};","import * as React from 'react'\r\nimport {connect} from 'react-redux'\r\nimport {Link} from 'react-router-dom'\r\n\r\nimport {doLogout} from '../actions'\r\n\r\nclass LoginStatus extends React.Component<any, any> {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.logout = this.logout.bind(this);\r\n    }\r\n\r\n    logout(e) {\r\n        e.preventDefault();\r\n        this.props.doLogout();\r\n    }\r\n\r\n    render() {\r\n        const data = this.props.User.toObject();\r\n\r\n        if (data.id == 1) var link = <Link to=\"/user\">Login</Link>;\r\n        else var link = <a onClick={this.logout} href=\"#\">Logout</a>;\r\n\r\n        return (\r\n            <p className=\"text-right\">Logged in as: <b>{data.userName}</b> ({link})</p>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    const User = state.getIn([\"User\", \"user\"]);\r\n    return {User};\r\n};\r\n/*\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    doLogin:(credentials) => dispatch(doLogin(credentials))\r\n  }\r\n}\r\n*/\r\n\r\nconst mapDispatchToProps = {doLogout};\r\n\r\nvar VisibleLoginStatus = connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(LoginStatus);\r\n\r\nexport default VisibleLoginStatus;","import * as React from 'react'\r\nimport {connect} from 'react-redux'\r\nimport {doLogin} from '../actions'\r\nimport {FacebookLoginButton, GoogleLoginButton, MicrosoftLoginButton} from 'react-social-login-buttons';\r\nimport SocialLoginButton from 'react-social-login-buttons/lib/buttons/SocialLoginButton';\r\nimport {\r\n    Button,\r\n    Row,\r\n    Col,\r\n    Card,\r\n    CardText,\r\n    CardBody,\r\n    CardTitle,\r\n    Form,\r\n    FormGroup,\r\n    Label,\r\n    Input,\r\n    UncontrolledAlert\r\n} from 'reactstrap';\r\n\r\nimport {Route} from 'react-router-dom';\r\n\r\nimport  { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport { faYahoo } from '@fortawesome/free-brands-svg-icons'\r\n\r\nimport { storageFactory } from \"storage-factory\";\r\n//@ts-ignore\r\nconst local = storageFactory(() => localStorage);\r\n\r\nclass UserPage extends React.Component<any, any> {\r\n\r\n    render() {\r\n        const data = this.props.User.toObject();\r\n\r\n        return data.id === 1 ? <LoginForm doLogin={this.props.doLogin} env={this.props.env}/> :\r\n            <UserProfile user={data}/>;\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    const User = state.getIn([\"User\", \"user\"]);\r\n    const env = state.get(\"App\");\r\n    return {User, env};\r\n};\r\n/*\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    doLogin:(credentials) => dispatch(doLogin(credentials))\r\n  }\r\n}\r\n*/\r\n\r\nconst mapDispatchToProps = {doLogin};\r\n\r\nconst VisibleUserPage = connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(UserPage);\r\n\r\nexport default VisibleUserPage;\r\n\r\nconst MyYahooLoginButton = (props) => {\r\n\r\n    const {style, ...buttonProps} = props;\r\n\r\n    const customProps = {\r\n        style: {background: \"#2f2268\", ...style},\r\n        activeStyle: {background: \"#16094F\"}\r\n\r\n    };\r\n\r\n    return <SocialLoginButton {...{...customProps, ...buttonProps}}>\r\n        <FontAwesomeIcon style={{verticalAlign: 'middle', width: \"1em\", marginLeft: \"0.6em\", marginRight: \"0.6em\"}}\r\n                         icon={faYahoo}/>\r\n        <span style={{verticalAlign: 'middle'}}>Login with Yahoo!</span>\r\n    </SocialLoginButton>\r\n};\r\n\r\nclass LoginForm extends React.Component<any, any> {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {email: \"\", password: \"\"}\r\n        this.updateEmail = this.updateEmail.bind(this);\r\n        this.updatePassword = this.updatePassword.bind(this);\r\n        this.submit = this.submit.bind(this);\r\n    }\r\n\r\n    updateEmail(e) {\r\n        this.setState({email: e.target.value});\r\n    }\r\n\r\n    updatePassword(e) {\r\n        this.setState({password: e.target.value});\r\n    }\r\n\r\n    submit(e) {\r\n        e.preventDefault();\r\n        this.props.doLogin(this.state);\r\n        this.setState({password: \"\"});\r\n    }\r\n\r\n    render() {\r\n        return (<Row>\r\n\r\n            <Route path='/user/facebook' render={() =>\r\n            <Col sm={12}>\r\n                <UncontrolledAlert color=\"warning\">The supplied e-mail address was previously used with Facebook, please log in using Facebook to access your bookings</UncontrolledAlert>\r\n            </Col>\r\n            } />\r\n            <Route path='/user/microsoft' render={() =>\r\n                <Col sm={12}>\r\n                    <UncontrolledAlert color=\"warning\">The supplied e-mail address was previously used with Microsoft, please log in using Microsoft to access your bookings</UncontrolledAlert>\r\n                </Col>\r\n            } />\r\n            <Route path='/user/google' render={() =>\r\n                <Col sm={12}>\r\n                    <UncontrolledAlert color=\"warning\">The supplied e-mail address was previously used with Google, please log in using Google to access your bookings</UncontrolledAlert>\r\n                </Col>\r\n            } />\r\n            <Route path='/user/yahoo' render={() =>\r\n                <Col sm={12}>\r\n                    <UncontrolledAlert color=\"warning\">The supplied e-mail address was previously used with Yahoo, please log in using Yahoo to access your bookings</UncontrolledAlert>\r\n                </Col>\r\n            } />\r\n            <Col sm={this.props.env === 'dev' ? 7 : 12}>\r\n                <Card>\r\n                    <CardBody>\r\n                        <CardTitle>Social Login</CardTitle>\r\n                        <CardText>Please use one of the following services to authenticate:</CardText>\r\n                        <Row>\r\n                            <Col sm={this.props.env === 'dev' ? 6 : 5}>\r\n                                <GoogleLoginButton onClick={() => {\r\n                                    // @ts-ignore\r\n                                    window.location = '/api/auth/google/redirect'\r\n                                }} style={local.getItem('userId') && local.getItem('userId') !== 'goog' ? {filter: 'grayscale(50%)', opacity: 0.5} : {}} />\r\n                                <FacebookLoginButton text=\"Login with Facebook\" onClick={() => {\r\n                                    // @ts-ignore\r\n                                    window.location = '/api/auth/facebook/redirect'\r\n                                }} style={local.getItem('userId') && local.getItem('userId') !== 'face' ? {filter: 'grayscale(50%)', opacity: 0.5} : {}} />\r\n                                <MicrosoftLoginButton onClick={() => {\r\n                                    // @ts-ignore\r\n                                    window.location = '/api/auth/microsoft/redirect'\r\n                                }} style={local.getItem('userId') && local.getItem('userId') !== 'micr' ? {filter: 'grayscale(50%)', opacity: 0.5} : {}} />\r\n                                <MyYahooLoginButton onClick={() => {\r\n                                    // @ts-ignore\r\n                                    window.location = '/api/auth/yahoo/redirect'\r\n                                }} style={local.getItem('userId') && local.getItem('userId') !== 'yaho' ? {filter: 'grayscale(50%)', opacity: 0.5} : {}} />\r\n                            </Col>\r\n                        </Row>\r\n                    </CardBody>\r\n                </Card>\r\n            </Col>\r\n            {this.props.env === 'dev' ?\r\n                <Col sm={5}>\r\n                    <Card>\r\n                        <CardBody>\r\n                            <CardTitle>Local Login</CardTitle>\r\n                            <CardText>Only use this if Ralph has told you to.</CardText>\r\n                            <Form>\r\n                                <FormGroup row>\r\n                                    <Label for=\"email\" sm={4}>\r\n                                        Email Address\r\n                                    </Label>\r\n                                    <Col>\r\n                                        <Input type=\"email\"\r\n                                               name=\"email\"\r\n                                               placeholded=\"e-mail\"\r\n                                               value={this.state.email}\r\n                                               onChange={this.updateEmail}\r\n                                        />\r\n                                    </Col>\r\n                                </FormGroup>\r\n                                <FormGroup row>\r\n                                    <Label for=\"password\" sm={4}>\r\n                                        Password\r\n                                    </Label>\r\n                                    <Col>\r\n                                        <Input type=\"password\"\r\n                                               name=\"password\"\r\n                                               placeholded=\"password\"\r\n                                               value={this.state.password}\r\n                                               onChange={this.updatePassword}\r\n                                        />\r\n                                    </Col>\r\n                                </FormGroup>\r\n                                <FormGroup row>\r\n                                    <Col sm={{size: 8, offset: 4}}>\r\n                                        <Button type=\"submit\"\r\n                                                onClick={this.submit}\r\n                                                color=\"primary\">Submit</Button>\r\n                                    </Col>\r\n                                </FormGroup>\r\n                            </Form>\r\n                        </CardBody>\r\n                    </Card>\r\n                </Col> : null}\r\n        </Row>);\r\n    }\r\n}\r\n\r\nclass UserProfile extends React.Component<any, any> {\r\n\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"col-sm-12\">\r\n                <p>Logged in as {this.props.user.userName}, email: {this.props.user.email} </p>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\n\r\n","import * as actions from './actions'\r\nimport reducer from './reducer'\r\n\r\nimport userPage from './components/userPage'\r\nimport loginStatus from './components/loginStatus'\r\n\r\nexport { actions, reducer, userPage, loginStatus };","import * as Immutable from 'immutable'\r\nimport * as a from './actions'\r\n\r\n//const initalUserState = Immutable.fromJS({id:0, name:\"Guest\", roles:[]});\r\nconst initalUserState = Immutable.fromJS({user: null, list: []});\r\n\r\nexport default function User(state = initalUserState, action) {\r\n\r\n\tswitch (action.type) {\r\n        case a.UPDATE_USER:\r\n            return state.set('user', Immutable.fromJS(action.user));\r\n        case a.UPDATE_LIST:\r\n            return state.set(\"list\", Immutable.fromJS(action.users));\r\n\t}\r\n\treturn state;\r\n\r\n}","import * as React from 'react'\r\nimport Moment from 'moment'\r\nimport update from 'immutability-helper';\r\nimport cloneDeep from \"lodash/cloneDeep\";\r\nimport map from 'lodash/map';\r\nimport reduce from 'lodash/reduce';\r\nimport ReactMarkdown from 'react-markdown'\r\n//this implements a pricing policy for large camps\r\n\r\nimport  { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport  { faTimes } from '@fortawesome/free-solid-svg-icons'\r\n\r\nimport {\r\n    Row,\r\n    Col,\r\n    FormGroup,\r\n    Input,\r\n    Table,\r\n    InputGroup,\r\n    Button,\r\n    Label\r\n} from 'reactstrap';\r\n\r\nimport {\r\n    Item,\r\n    Span,\r\n    A,\r\n    Box\r\n} from 'react-html-email'\r\n\r\nlet bucketKey = Math.random() * 10000\r\n\r\nexport const name = \"big\";\r\nexport const selection = \"Big Camp Pricing Policy\";\r\n\r\nexport class Config extends React.Component<any, any> {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.addBucket = this.addBucket.bind(this);\r\n        this.deleteBucket = this.deleteBucket.bind(this);\r\n        this.updateDate = this.updateDate.bind(this);\r\n        this.update = this.update.bind(this);\r\n        this.updateAmount = this.updateAmount.bind(this);\r\n        this.updateAmountPartial = this.updateAmountPartial.bind(this);\r\n\r\n        if (!this.props.fee.woodchips) this.props.update({\r\n            buckets: [{\r\n                id: \"bucket\" + bucketKey,\r\n                date: new Date(),\r\n                amount: 0\r\n            }], woodchips: 0.5, cancel: 50, desc: ''\r\n        });\r\n        bucketKey++;\r\n    }\r\n\r\n    update(field) {\r\n        return e => {\r\n            this.props.update(update(this.props.fee, {[field]: {$set: e.target.value}}));\r\n            e.preventDefault();\r\n        }\r\n    }\r\n\r\n    updateDate(id) {\r\n        return e => {\r\n            const buckets = cloneDeep(this.props.fee.buckets);\r\n            buckets.forEach(b => {\r\n                if (b.id === id) b.date = e.target.value;\r\n            });\r\n            this.props.update(update(this.props.fee, {buckets: {$set: buckets}}));\r\n            e.preventDefault();\r\n        }\r\n    }\r\n\r\n    updateAmount(id) {\r\n        return e => {\r\n            const buckets = cloneDeep(this.props.fee.buckets);\r\n            buckets.forEach(b => {\r\n                if (b.id === id) b.amount = e.target.value;\r\n            });\r\n            this.props.update(update(this.props.fee, {buckets: {$set: buckets}}));\r\n            e.preventDefault();\r\n        }\r\n    }\r\n\r\n    updateAmountPartial(id) {\r\n        return o => {\r\n            return e => {\r\n                const buckets = cloneDeep(this.props.fee.buckets);\r\n                buckets.forEach(b => {\r\n                    if (b.id === id) {\r\n                        b.amount = typeof(b.amount) !== 'object' ? {} : b.amount;\r\n                        b.amount[o] = e.target.value;\r\n                    }\r\n                });\r\n\r\n                this.props.update(update(this.props.fee, {buckets: {$set: buckets}}));\r\n                e.preventDefault();\r\n            }\r\n        }\r\n    }\r\n\r\n    addBucket(e) {\r\n        const buckets = [...(this.props.fee.buckets || [])];\r\n        buckets.push({id: \"bucket\" + bucketKey, date: new Date(), amount: 0});\r\n        bucketKey++;\r\n        this.props.update(update(this.props.fee, {buckets: {$set: buckets}}));\r\n        e.preventDefault();\r\n    }\r\n\r\n    deleteBucket(id) {\r\n        return e => {\r\n            const buckets = cloneDeep(this.props.fee.buckets).filter(b => b.id !== id);\r\n            this.props.update(update(this.props.fee, {buckets: {$set: buckets}}));\r\n            e.preventDefault();\r\n        }\r\n    }\r\n\r\n    render() {\r\n        //Thou shalt not ever use JS numbers for currency...\r\n        const dateBuckets = this.props.fee.buckets || [];\r\n\r\n        const bucketRows = dateBuckets.map(b => {\r\n\r\n            const feeBoxes = (this.props.event.partialDates === 'whole' || !this.props.event.partialDatesData) ?\r\n                <FormGroup>\r\n                    <InputGroup>\r\n                        <div className=\"input-group-prepend\">\r\n                            <span className=\"input-group-text\">£</span>\r\n                        </div>\r\n                        <Input type=\"number\" className=\"form-control\" placeholder=\"35\" value={b.amount}\r\n                               onChange={this.updateAmount(b.id)}/>\r\n                    </InputGroup>\r\n                </FormGroup> :\r\n                <React.Fragment>\r\n                    {this.props.event.partialDatesData.map(o => <FormGroup key={o.id} row>\r\n                        <Label sm={6}>{o.name}</Label>\r\n                        <Col sm={6}>\r\n                            <InputGroup>\r\n                                <div className=\"input-group-prepend\">\r\n                                    <span className=\"input-group-text\">£</span>\r\n                                </div>\r\n                                <Input type=\"number\" className=\"form-control\" placeholder=\"35\"\r\n                                       value={b.amount[o.name] || 0}\r\n                                       onChange={this.updateAmountPartial(b.id)(o.name)}/>\r\n                            </InputGroup>\r\n                        </Col>\r\n                    </FormGroup>)}\r\n                </React.Fragment>;\r\n\r\n            return <tr key={b.id}>\r\n                <td><Input type=\"date\" onChange={this.updateDate(b.id)} value={Moment(b.date).format(\"YYYY-MM-DD\")}/>\r\n                </td>\r\n                <td>{feeBoxes}</td>\r\n                <td>\r\n                    <Button onClick={this.deleteBucket(b.id)} color=\"warning\">\r\n                        <span style={{color: 'white'}}><FontAwesomeIcon icon={faTimes}/></span>\r\n                    </Button>\r\n                </td>\r\n            </tr>\r\n        });\r\n\r\n        return (<React.Fragment>\r\n            <Row>\r\n                <Col>\r\n                    <FormGroup>\r\n                        <Label>Description (Markdown supported):</Label>\r\n                        <Input type=\"textarea\" name=\"description\" value={this.props.fee.desc}\r\n                               onChange={this.update('desc')}/>\r\n                    </FormGroup>\r\n                </Col>\r\n            </Row>\r\n            <Row>\r\n                <Col>\r\n                    <h4>Date buckets</h4>\r\n                    <Table>\r\n                        <thead>\r\n                        <tr>\r\n                            <th>Up Until Date</th>\r\n                            <th>Fee</th>\r\n                            <th></th>\r\n                        </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                        {bucketRows}\r\n                        </tbody>\r\n                    </Table>\r\n                    <Button onClick={this.addBucket}>Add Bucket</Button>\r\n                </Col>\r\n            </Row>\r\n            <Row>\r\n                <Col>\r\n                    <FormGroup row>\r\n                        <Label sm={4}>Woodchip Multiplier</Label>\r\n                        <Col sm={2}>\r\n                            <InputGroup>\r\n                                <Input type=\"number\" className=\"form-control\" placeholder=\"0.5\"\r\n                                       value={this.props.fee.woodchips}\r\n                                       onChange={this.update('woodchips')}/>\r\n                            </InputGroup>\r\n                        </Col>\r\n                        <Label sm={4}>Cancellation Fee:</Label>\r\n                        <Col sm={2}>\r\n                            <InputGroup>\r\n                                <div className=\"input-group-prepend\">\r\n                                    <span className=\"input-group-text\">£</span>\r\n                                </div>\r\n                                <Input type=\"number\" className=\"form-control\" placeholder=\"50\"\r\n                                       value={this.props.fee.cancel}\r\n                                       onChange={this.update('cancel')}/>\r\n                            </InputGroup>\r\n                        </Col>\r\n                    </FormGroup>\r\n                </Col>\r\n            </Row>\r\n        </React.Fragment>)\r\n    }\r\n}\r\n\r\nexport class BookingForm extends React.Component<any, any>{\r\n\r\n    render() {\r\n\r\n        //this.props.participants\r\n        //this.props.event.startDate\r\n\r\n        //this.props.feeData.amount\r\n        //\r\n        const feesOwed = getFeesOwed(this.props.event, this.props.participants, this.props.booking);\r\n        const tableLines = feesOwed.map(l => <tr key={l.line}>\r\n            <td>{l.line}</td>\r\n            <td>£{l.total}</td>\r\n        </tr>);\r\n\r\n        return (<Row>\r\n            <Col sm={12}>\r\n                <ReactMarkdown  children={this.props.event.feeData.desc}/>\r\n            </Col>\r\n            <Col>\r\n                <Table>\r\n                    <thead></thead>\r\n                    <tbody>{tableLines}\r\n                    <tr>\r\n                        <td><b>Total:</b></td>\r\n                        <td><b>£{feesOwed.reduce((a, c) => {\r\n                            return a + c.total\r\n                        }, 0)}</b></td>\r\n                    </tr>\r\n                    </tbody>\r\n                </Table>\r\n            </Col>\r\n        </Row>)\r\n    }\r\n}\r\n\r\nexport class ThanksRow extends React.Component<any, any>{\r\n\r\n    render() {\r\n\r\n        //this.props.participants\r\n        //this.props.event.startDate\r\n\r\n        //this.props.feeData.amount\r\n        //\r\n        const feesOwed = getFeesOwed(this.props.event, this.props.booking.participants, this.props.booking);\r\n        const tableLines = feesOwed.map(l => <tr key={l.line}>\r\n            <td>{l.line}</td>\r\n            <td>£{l.total}</td>\r\n        </tr>);\r\n\r\n        return (<Row>\r\n            <Col>\r\n                <Table>\r\n                    <thead></thead>\r\n                    <tbody>{tableLines}\r\n                    <tr>\r\n                        <td><b>Total:</b></td>\r\n                        <td><b>£{feesOwed.reduce((a, c) => {\r\n                            return a + c.total\r\n                        }, 0)}</b></td>\r\n                    </tr>\r\n                    </tbody>\r\n                </Table>\r\n            </Col>\r\n        </Row>)\r\n    }\r\n}\r\n\r\nexport function emailHTML(event, booking) {\r\n\r\n    const rows = getFeesOwed(event, booking.participants, booking).map((r, i) => <tr key={i}>\r\n        <td>{r.line}</td>\r\n        <td><b>£{r.total}</b></td>\r\n    </tr>);\r\n\r\n    const total = rows.length > 1 ? <tr>\r\n        <td><b>Total</b></td>\r\n        <td><b>£{getFeesOwed(event, booking.participants, booking).reduce((a, c) => {\r\n            return a + c.total\r\n        }, 0)}</b></td>\r\n    </tr> : null;\r\n\r\n    return (<Item>\r\n        <p><b>Money:</b></p>\r\n        <table>\r\n            <tbody>\r\n            {rows}\r\n            {total}\r\n            </tbody>\r\n        </table>\r\n    </Item>)\r\n\r\n}\r\n\r\n\r\nexport function getFeesOwed(event, participants, booking) {\r\n\r\n    switch (event.partialDates) {\r\n        case 'whole':\r\n            return owedWholeEvent(event, participants, booking);\r\n        case 'presets':\r\n            return owedPresetEvent(event, participants, booking);\r\n        default:\r\n            return [{line: \"Unsupported attendance/fee combo\", total: 0}]\r\n    }\r\n}\r\n\r\nconst owedWholeEvent = (event, participants, booking) => {\r\n\r\n    const sortedBuckets = event.feeData.buckets.sort((a, b) => a.date < b.date ? 1 : a.date === b.date ? 0 : -1);\r\n\r\n    const filteredParticipants = cloneDeep(participants)\r\n        .filter(p => p.name && p.age)\r\n        .map(p => {\r\n            if (!p.createdAt) p.createdAt = Moment().format(\"YYYY-MM-DD\");\r\n            return p;\r\n        });\r\n\r\n    const rawCosts = filteredParticipants.map(p => sortedBuckets.reduce((a, c) => {\r\n        if (new Date(p.createdAt) < new Date(c.date)) return {\r\n            type: isWoodchip(event, p) ? 'woodchip' : 'normal',\r\n            date: c.date,\r\n            mask: p.days,\r\n            amount: c.amount * (isWoodchip(event, p) ? event.feeData.woodchips : 1)\r\n        };\r\n        else return a;\r\n    }, {}));\r\n\r\n    const combinedCosts = rawCosts.reduce((a, c) => {\r\n        if (a[c.date] && a[c.date][c.type]) a[c.date][c.type].count++;\r\n        else {\r\n            a[c.date] = a[c.date] || {};\r\n            a[c.date][c.type] = {count: 1, amount: c.amount};\r\n        }\r\n        return a;\r\n    }, {});\r\n\r\n    return [...linesWithoutPartial(combinedCosts), ...cancelledFee(event, participants, booking)];\r\n};\r\n\r\nconst owedPresetEvent = (event, participants, booking) => {\r\n\r\n    const sortedBuckets = event.feeData.buckets.sort((a, b) => a.date < b.date ? 1 : a.date === b.date ? 0 : -1);\r\n\r\n    const filteredParticipants = cloneDeep(participants)\r\n        .filter(p => p.name && p.age)\r\n        .map(p => {\r\n            if (!p.createdAt) p.createdAt = Moment().format(\"YYYY-MM-DD\");\r\n            p.days = event.partialDatesData.find(d => d.mask === p.days);\r\n            p.days = p.days ? p.days.name : event.partialDatesData[0].name;\r\n            return p;\r\n        });\r\n\r\n    const rawCosts = filteredParticipants.map(p => sortedBuckets.reduce((a, c) => {\r\n        if (new Date(p.createdAt) < new Date(c.date)) return {\r\n            type: isWoodchip(event, p) ? 'woodchip' : 'normal',\r\n            date: c.date,\r\n            mask: p.days,\r\n            amount: c.amount[p.days] * (isWoodchip(event, p) ? event.feeData.woodchips : 1)\r\n        };\r\n        else return a;\r\n    }, {}));\r\n\r\n    const combinedCosts = rawCosts.reduce((a, c) => {\r\n        if (a[c.date] && a[c.date][c.mask] && a[c.date][c.mask][c.type]) a[c.date][c.mask][c.type].count++;\r\n        else {\r\n            a[c.date] = a[c.date] || {};\r\n            a[c.date][c.mask] = a[c.date][c.mask] || {};\r\n            a[c.date][c.mask][c.type] = {count: 1, amount: c.amount};\r\n        }\r\n        return a;\r\n    }, {});\r\n\r\n    return [...linesWithPartial(combinedCosts), ...cancelledFee(event, participants, booking)];\r\n};\r\n//@ts-ignore\r\nconst linesWithoutPartial = combined => reduce(combined, (a, c, i) => [...a, ...map(c, (l, t) => {\r\n    if (t === 'normal') return {\r\n        line: `${l.count} ${l.count > 1 ? 'people' : 'person'} booked before ${Moment(i).format('MMMM Do YYYY')} at £${l.amount}`,\r\n        total: l.count * l.amount\r\n    };\r\n    else return {\r\n        line: `${l.count} ${l.count > 1 ? 'woodchips' : 'woodchip'} booked before ${Moment(i).format('MMMM Do YYYY')} at £${l.amount}`,\r\n        total: l.count * l.amount\r\n    }\r\n})], []);\r\n//@ts-ignore\r\nconst linesWithPartial = (combined) => reduce(combined, (a, c, i) => [...a, ...reduce(c, (a1, c1, i1) => [...a1, ...map(c1, (l, t) => {\r\n    if (t === 'normal') return {\r\n        line: `${l.count} ${l.count > 1 ? 'people' : 'person'} booked for ${i1} before ${Moment(i).format('MMMM Do YYYY')} at £${l.amount}`,\r\n        total: l.count * l.amount\r\n    };\r\n    else return {\r\n        line: `${l.count} ${l.count > 1 ? 'woodchips' : 'woodchip'} booked for ${i1} before ${Moment(i).format('MMMM Do YYYY')} at £${l.amount}`,\r\n        total: l.count * l.amount\r\n    }\r\n})], [])], []);\r\n\r\nconst cancelledFee = (event, participants, booking) => {\r\n\r\n    if (!booking.maxParticipants || booking.maxParticipants <= participants.length || event.feeData.cancel === 0) return [];\r\n    return [{\r\n        line: `${booking.maxParticipants - participants.length} cancelled bookings at £${event.feeData.cancel}`,\r\n        total: (booking.maxParticipants - participants.length) * event.feeData.cancel\r\n    }]\r\n};\r\n\r\nconst isWoodchip = (e, p) => {\r\n    return Date.parse(e.startDate) - Date.parse(p.age) < 189216000000\r\n};\r\n","import * as React from 'react'\r\nimport Moment        from 'moment'\r\nimport update        from 'immutability-helper';\r\nimport { cloneDeep, map, reduce }     from \"lodash\";\r\nimport ReactMarkdown from 'react-markdown';\r\nimport paymentLines  from './payment-lines';\r\nimport Currency   from 'react-currency-formatter';\r\n//this implements a pricing policy for large camps\r\n\r\nimport  { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport  { faTimes }         from '@fortawesome/free-solid-svg-icons'\r\n\r\nimport {\r\n    Row,\r\n    Col,\r\n    FormGroup,\r\n    Input,\r\n    Table,\r\n    InputGroup,\r\n    Button,\r\n    Label\r\n} from 'reactstrap';\r\n\r\nimport {\r\n    Item,\r\n    Span,\r\n    A,\r\n    Box\r\n} from 'react-html-email'\r\n\r\nlet bucketKey = Math.random() * 10000\r\n\r\nexport const name = \"cg-preset\";\r\nexport const selection = \"Common Ground Pricing Policy\";\r\n\r\nexport class Config extends React.Component<any, any>{\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.addBucket = this.addBucket.bind(this);\r\n        this.deleteBucket = this.deleteBucket.bind(this);\r\n        this.updateDate = this.updateDate.bind(this);\r\n        this.update = this.update.bind(this);\r\n        this.updateAmount = this.updateAmount.bind(this);\r\n        this.updateAmountPartial = this.updateAmountPartial.bind(this);\r\n\r\n        if (!this.props.fee.desc) this.props.update({\r\n                                                             buckets:       [{\r\n                                                                 id:     \"bucket\" + bucketKey,\r\n                                                                 date:   new Date(),\r\n                                                                 amount: 0\r\n                                                             }], woodchips: 0.5, cancel: 50, desc: '', orgs: ''\r\n                                                         });\r\n        bucketKey++;\r\n    }\r\n\r\n    update(field) {\r\n        return e => {\r\n            this.props.update(update(this.props.fee, {[field]: {$set: e.target.value}}));\r\n            e.preventDefault();\r\n        }\r\n    }\r\n\r\n    updateDate(id) {\r\n        return e => {\r\n            const buckets = cloneDeep(this.props.fee.buckets);\r\n            buckets.forEach(b => {\r\n                if (b.id === id) b.date = e.target.value;\r\n            });\r\n            this.props.update(update(this.props.fee, {buckets: {$set: buckets}}));\r\n            e.preventDefault();\r\n        }\r\n    }\r\n\r\n    updateAmount(id) {\r\n        return e => {\r\n            const buckets = cloneDeep(this.props.fee.buckets);\r\n            buckets.forEach(b => {\r\n                if (b.id === id) b.amount = e.target.value;\r\n            });\r\n            this.props.update(update(this.props.fee, {buckets: {$set: buckets}}));\r\n            e.preventDefault();\r\n        }\r\n    }\r\n\r\n    updateAmountPartial(id) {\r\n        return o => {\r\n            return e => {\r\n                const buckets = cloneDeep(this.props.fee.buckets);\r\n                buckets.forEach(b => {\r\n                    if (b.id === id) {\r\n                        b.amount = typeof(b.amount) !== 'object' ? {} : b.amount;\r\n                        b.amount[o] = e.target.value;\r\n                    }\r\n                });\r\n\r\n                this.props.update(update(this.props.fee, {buckets: {$set: buckets}}));\r\n                e.preventDefault();\r\n            }\r\n        }\r\n    }\r\n\r\n    addBucket(e) {\r\n        const buckets = [...(this.props.fee.buckets || [])];\r\n        buckets.push({id: \"bucket\" + bucketKey, date: new Date(), amount: 0});\r\n        bucketKey++;\r\n        this.props.update(update(this.props.fee, {buckets: {$set: buckets}}));\r\n        e.preventDefault();\r\n    }\r\n\r\n    deleteBucket(id) {\r\n        return e => {\r\n            const buckets = cloneDeep(this.props.fee.buckets).filter(b => b.id !== id);\r\n            this.props.update(update(this.props.fee, {buckets: {$set: buckets}}));\r\n            e.preventDefault();\r\n        }\r\n    }\r\n\r\n    render() {\r\n        //Thou shalt not ever use JS numbers for currency...\r\n        const dateBuckets = this.props.fee.buckets || [];\r\n\r\n        const bucketRows = dateBuckets.map(b => {\r\n\r\n            const feeBoxes = (this.props.event.partialDates === 'whole' || !this.props.event.partialDatesData) ?\r\n                <FormGroup>\r\n                    <InputGroup>\r\n                        <div className=\"input-group-prepend\">\r\n                            <span className=\"input-group-text\">£</span>\r\n                        </div>\r\n                        <Input type=\"number\" className=\"form-control\" placeholder=\"35\" value={b.amount}\r\n                               onChange={this.updateAmount(b.id)}/>\r\n                    </InputGroup>\r\n                </FormGroup> :\r\n                <React.Fragment>\r\n                    {this.props.event.partialDatesData.map(o => <FormGroup key={o.id} row>\r\n                        <Label sm={6}>{o.name}</Label>\r\n                        <Col sm={6}>\r\n                            <InputGroup>\r\n                                <div className=\"input-group-prepend\">\r\n                                    <span className=\"input-group-text\">£</span>\r\n                                </div>\r\n                                <Input type=\"number\" className=\"form-control\" placeholder=\"35\"\r\n                                       value={b.amount[o.name] || 0}\r\n                                       onChange={this.updateAmountPartial(b.id)(o.name)}/>\r\n                            </InputGroup>\r\n                        </Col>\r\n                    </FormGroup>)}\r\n                </React.Fragment>;\r\n\r\n            return <tr key={b.id}>\r\n                <td><Input type=\"date\" onChange={this.updateDate(b.id)} value={Moment(b.date).format(\"YYYY-MM-DD\")}/>\r\n                </td>\r\n                <td>{feeBoxes}</td>\r\n                <td>\r\n                    <Button onClick={this.deleteBucket(b.id)} color=\"warning\">\r\n                        <span style={{color: 'white'}}><FontAwesomeIcon icon={faTimes}/></span>\r\n                    </Button>\r\n                </td>\r\n            </tr>\r\n        });\r\n\r\n        return (<React.Fragment>\r\n            <Row>\r\n                <Col>\r\n                    <FormGroup>\r\n                        <Label>Description (Markdown supported):</Label>\r\n                        <Input type=\"textarea\" name=\"description\" value={this.props.fee.desc}\r\n                               onChange={this.update('desc')}/>\r\n                    </FormGroup>\r\n                </Col>\r\n            </Row>\r\n            <Row>\r\n                <Col>\r\n                    <FormGroup>\r\n                        <Label>Organisation level fees:</Label>\r\n                        <Input type=\"textarea\" name=\"orgs\" value={this.props.fee.orgs}\r\n                               onChange={this.update('orgs')}/>\r\n                    </FormGroup>\r\n                </Col>\r\n            </Row>\r\n            <Row>\r\n                <Col>\r\n                    <h4>Date buckets</h4>\r\n                    <Table>\r\n                        <thead>\r\n                        <tr>\r\n                            <th>Up Until Date</th>\r\n                            <th>Fee</th>\r\n                            <th></th>\r\n                        </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                        {bucketRows}\r\n                        </tbody>\r\n                    </Table>\r\n                    <Button onClick={this.addBucket}>Add Bucket</Button>\r\n                </Col>\r\n            </Row>\r\n            <Row>\r\n                <Col>\r\n                    <FormGroup row>\r\n                        <Label sm={4}>Food Opt Out Discount:</Label>\r\n                        <Col sm={2}>\r\n                            <InputGroup>\r\n                                <div className=\"input-group-prepend\">\r\n                                    <span className=\"input-group-text\">£</span>\r\n                                </div>\r\n                                <Input type=\"number\" className=\"form-control\" placeholder=\"30\"\r\n                                       value={this.props.fee.foodOptOut}\r\n                                       onChange={this.update('foodOptOut')}/>\r\n                            </InputGroup>\r\n                        </Col>\r\n                    </FormGroup>\r\n                    <FormGroup row>\r\n                        <Label sm={4}>Cancellation Fee:</Label>\r\n                        <Col sm={2}>\r\n                            <InputGroup>\r\n                                <div className=\"input-group-prepend\">\r\n                                    <span className=\"input-group-text\">£</span>\r\n                                </div>\r\n                                <Input type=\"number\" className=\"form-control\" placeholder=\"50\"\r\n                                       value={this.props.fee.cancel}\r\n                                       onChange={this.update('cancel')}/>\r\n                            </InputGroup>\r\n                        </Col>\r\n                    </FormGroup>\r\n                </Col>\r\n            </Row>\r\n        </React.Fragment>)\r\n    }\r\n}\r\n\r\nexport class BookingForm extends React.Component<any, any>{\r\n\r\n    render() {\r\n\r\n        //this.props.participants\r\n        //this.props.event.startDate\r\n\r\n        //this.props.feeData.amount\r\n        //\r\n        const feesOwed = getFeesOwed(this.props.event, this.props.participants, this.props.booking);\r\n        const tableLines = feesOwed.map((l,i) => <tr key={`${l.line} ${i}`}>\r\n            <td>{l.line}</td>\r\n            <td><Currency\r\n                quantity={l.total}\r\n                currency=\"GBP\"\r\n            /></td>\r\n        </tr>);\r\n\r\n        return (<Row>\r\n            <Col sm={12}>\r\n                <ReactMarkdown  children={this.props.event.feeData.desc}/>\r\n            </Col>\r\n            <Col>\r\n                <Table>\r\n                    <thead></thead>\r\n                    <tbody>{tableLines}\r\n                    <tr>\r\n                        <td><b>Total:</b></td>\r\n                        <td><b><Currency\r\n                            quantity={feesOwed.reduce((a, c) => {\r\n                                return a + c.total\r\n                            }, 0)}\r\n                            currency=\"GBP\"\r\n                        /></b></td>\r\n                    </tr>\r\n                    </tbody>\r\n                </Table>\r\n            </Col>\r\n        </Row>)\r\n    }\r\n}\r\n\r\nexport class ThanksRow extends React.Component<any, any>{\r\n\r\n    render() {\r\n\r\n        //this.props.participants\r\n        //this.props.event.startDate\r\n\r\n        //this.props.feeData.amount\r\n        //\r\n        const feesOwed = getFeesOwed(this.props.event, this.props.booking.participants, this.props.booking);\r\n        const tableLines = feesOwed.map((l,i) => <tr key={`${l.line} ${i}`}>\r\n            <td>{l.line}</td>\r\n            <td><Currency\r\n                quantity={l.total}\r\n                currency=\"GBP\"\r\n            /></td>\r\n        </tr>);\r\n\r\n        return (<Row>\r\n            <Col>\r\n                <Table>\r\n                    <thead></thead>\r\n                    <tbody>{tableLines}\r\n                    <tr>\r\n                        <td><b>Total:</b></td>\r\n                        <td><b><Currency\r\n                            quantity={feesOwed.reduce((a, c) => {\r\n                                return a + c.total\r\n                            }, 0)}\r\n                            currency=\"GBP\"\r\n                        /></b></td>\r\n                    </tr>\r\n                    </tbody>\r\n                </Table>\r\n            </Col>\r\n        </Row>)\r\n    }\r\n}\r\n\r\nexport function emailHTML(event, booking) {\r\n\r\n    const feesOwed = getFeesOwed(event, booking.participants, booking);\r\n\r\n    const rows = feesOwed.map((r, i) => <tr key={i}>\r\n        <td>{r.line}</td>\r\n        <td><b><Currency\r\n            quantity={r.total}\r\n            currency=\"GBP\"\r\n        /></b></td>\r\n    </tr>);\r\n\r\n    const total = <tr>\r\n        <td><b>Total</b></td>\r\n        <td><b><Currency\r\n            quantity={feesOwed.reduce((a, c) => {\r\n                return a + c.total\r\n            }, 0)}\r\n            currency=\"GBP\"\r\n        /></b></td>\r\n    </tr>;\r\n\r\n    return (<Item>\r\n        <table>\r\n            <tbody>\r\n            {rows}\r\n            {total}\r\n            </tbody>\r\n        </table>\r\n    </Item>)\r\n\r\n}\r\n\r\nexport function getFeesOwed(event, participants, booking, payments=true) {\r\n            return owedPresetEvent(event, participants, booking, payments);\r\n}\r\n\r\nconst owedPresetEvent = (event, participants, booking, payments) => {\r\n\r\n    const orgFees = parseOrgFees(event);\r\n\r\n    if (orgFees[booking.organisationId]) return [...underFives(event, participants), ...orgFeesLines(participants, orgFees, booking, event), ...cancelledFee(event, participants, booking)]\r\n\r\n    const sortedBuckets = event.feeData.buckets.sort((a, b) => a.date < b.date ? 1 : a.date === b.date ? 0 : -1);\r\n\r\n    const filteredParticipants = cloneDeep(participants)\r\n    .filter(p => p.name && p.age)\r\n    .filter(p => !isUnderFive(event, p))\r\n    .map(p => {\r\n        if (!p.updatedAt) p.updatedAt = Moment().format(\"YYYY-MM-DD\");\r\n        p.days = event.partialDatesData.find(d => d.mask === p.days);\r\n        p.days = p.days ? p.days.name : event.partialDatesData[0].name;\r\n        return p;\r\n    });\r\n\r\n    const rawCosts = filteredParticipants.map(p => sortedBuckets.reduce((a, c) => {\r\n        if (new Date(p.updatedAt) < new Date(c.date)) return {\r\n            date:   c.date,\r\n            mask:   p.days,\r\n            amount: c.amount[p.days] - (booking.externalExtra.foodOptOut ? event.feeData.foodOptOut : 0)\r\n        };\r\n        else return a;\r\n    }, {}));\r\n\r\n    const combinedCosts = rawCosts.reduce((a, c) => {\r\n        if (a[c.date] && a[c.date][c.mask] && a[c.date][c.mask][c.type]) a[c.date][c.mask][c.type].count++;\r\n        else {\r\n            a[c.date] = a[c.date] || {};\r\n            a[c.date][c.mask] = a[c.date][c.mask] || {};\r\n            a[c.date][c.mask][c.type] = {count: 1, amount: c.amount};\r\n        }\r\n        return a;\r\n    }, {});\r\n\r\n    return [...underFives(event, participants), ...linesWithPartial(combinedCosts, booking), ...cancelledFee(event, participants, booking), ...(payments ? paymentLines(event, participants, booking) : [])];\r\n};\r\n\r\nconst orgFeesLines = (participants, orgFees, booking, event) => {\r\n    const filteredParticipants = cloneDeep(participants)\r\n    .filter(p => p.name && p.age)\r\n    .filter(p => !isUnderFive(event, p));\r\n    if (filteredParticipants.length > 0) return [{\r\n        line:  `${filteredParticipants.length} ${filteredParticipants.length > 1 ? 'people' : 'person'} for £${orgFees[booking.organisationId]}`,\r\n        total: filteredParticipants.length * orgFees[booking.organisationId]\r\n    }];\r\n    else return [];\r\n};\r\n\r\nconst parseOrgFees = event => {\r\n    if (event.feeData.orgs.length < 2) return {};\r\n\r\n    const lines = event.feeData.orgs.split(\"\\n\");\r\n    return lines.reduce((a, l) => {\r\n        const parts = l.split(':');\r\n        parts[1].split(',').forEach(p => {\r\n            a[parseInt(p)] = parseInt(parts[0]);\r\n        });\r\n        return a;\r\n    }, {})\r\n};\r\n\r\nconst underFives = (event, participants) => {\r\n    const filteredParticipants = cloneDeep(participants)\r\n    .filter(p => p.name && p.age)\r\n    .filter(p => isUnderFive(event, p));\r\n    if (filteredParticipants.length > 0) return [{\r\n        line:  `${filteredParticipants.length} ${filteredParticipants.length > 1 ? 'people' : 'person'} under five for free`,\r\n        total: 0\r\n    }];\r\n    else return [];\r\n};\r\n//@ts-ignore\r\nconst linesWithPartial = (combined, booking) => reduce(combined, (a, c, i) => [...a, ...reduce(c, (a1, c1, i1) => [...a1, ...map(c1, (l, t) => {\r\n    return {\r\n        line:  `${l.count} ${l.count > 1 ? 'people' : 'person'} booked for ${i1}${booking.externalExtra.foodOptOut ? ' with food opt-out' : ''} before ${Moment(i).format('MMMM Do YYYY')} at £${l.amount}`,\r\n        total: l.count * l.amount\r\n    }\r\n})], [])], []);\r\n\r\nconst cancelledFee = (event, participants, booking) => {\r\n\r\n    if (!booking.maxParticipants || booking.maxParticipants <= participants.length || event.feeData.cancel === 0) return [];\r\n    return [{\r\n        line:  `${booking.maxParticipants - participants.length} cancelled bookings at £${event.feeData.cancel}`,\r\n        total: (booking.maxParticipants - participants.length) * event.feeData.cancel\r\n    }]\r\n};\r\n\r\nconst isUnderFive = (e, p) => {\r\n    return Date.parse(e.startDate) - Date.parse(p.age) < 157784630000\r\n};\r\n","import * as React from 'react'\r\n\r\nimport {\r\n    Row,\r\n    Col,\r\n    FormGroup,\r\n    Input,\r\n    Table,\r\n    InputGroup\r\n} from 'reactstrap';\r\n\r\nimport {\r\n    Item,\r\n    Span,\r\n    A,\r\n    Box\r\n} from 'react-html-email'\r\n\r\nimport update from 'immutability-helper';\r\n\r\nimport cloneDeep from \"lodash/cloneDeep\";\r\nimport Moment from \"moment\";\r\nimport Currency from \"react-currency-formatter\";\r\n\r\n\r\n//this implements Ealing's camp pricing policy.\r\n\r\nexport const name = \"ealing\";\r\nexport const selection = \"Ealing Pricing Policy\";\r\n\r\nexport class Config extends React.Component<any, any>{\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.updateStandardFee = this.updateStandardFee.bind(this);\r\n        this.updateDiscountFee = this.updateDiscountFee.bind(this);\r\n        this.updateUnaccompaniedFee = this.updateUnaccompaniedFee.bind(this);\r\n        this.updateUnaccompaniedDiscountFee = this.updateUnaccompaniedDiscountFee.bind(this);\r\n\r\n        this.updateStandardFeeHalf = this.updateStandardFeeHalf.bind(this);\r\n        this.updateDiscountFeeHalf = this.updateDiscountFeeHalf.bind(this);\r\n        this.updateUnaccompaniedFeeHalf = this.updateUnaccompaniedFeeHalf.bind(this);\r\n        this.updateUnaccompaniedDiscountFeeHalf = this.updateUnaccompaniedDiscountFeeHalf.bind(this);\r\n    }\r\n\r\n    updateStandardFee(e) {\r\n        this.props.update(update(this.props.fee, {amount: {$set: parseFloat(e.target.value)}}));\r\n    }\r\n\r\n    updateDiscountFee(e) {\r\n        this.props.update(update(this.props.fee, {amountDiscount: {$set: parseFloat(e.target.value)}}));\r\n    }\r\n\r\n    updateUnaccompaniedFee(e) {\r\n        this.props.update(update(this.props.fee, {amountUnaccompanied: {$set: parseFloat(e.target.value)}}));\r\n    }\r\n\r\n    updateUnaccompaniedDiscountFee(e) {\r\n        this.props.update(update(this.props.fee, {amountUnaccompaniedDiscount: {$set: parseFloat(e.target.value)}}));\r\n    }\r\n\r\n    updateStandardFeeHalf(e) {\r\n        this.props.update(update(this.props.fee, {amountHalf: {$set: parseFloat(e.target.value)}}));\r\n    }\r\n\r\n    updateDiscountFeeHalf(e) {\r\n        this.props.update(update(this.props.fee, {amountDiscountHalf: {$set: parseFloat(e.target.value)}}));\r\n    }\r\n\r\n    updateUnaccompaniedFeeHalf(e) {\r\n        this.props.update(update(this.props.fee, {amountUnaccompaniedHalf: {$set: parseFloat(e.target.value)}}));\r\n    }\r\n\r\n    updateUnaccompaniedDiscountFeeHalf(e) {\r\n        this.props.update(update(this.props.fee, {amountUnaccompaniedDiscountHalf: {$set: parseFloat(e.target.value)}}));\r\n    }\r\n\r\n    render() {\r\n        //Thou shalt not ever use JS numbers for currency...\r\n        const amount = this.props.fee.amount || 35;\r\n        const unaccompanied = this.props.fee.amountUnaccompanied || 50;\r\n        const unaccompaniedDiscount = this.props.fee.amountUnaccompaniedDiscount || 25;\r\n        const discount = this.props.fee.amountDiscount || 17;\r\n\r\n        const amountHalf = this.props.fee.amountHalf || 35;\r\n        const unaccompaniedHalf = this.props.fee.amountUnaccompaniedHalf || 50;\r\n        const unaccompaniedDiscountHalf = this.props.fee.amountUnaccompaniedDiscountHalf || 25;\r\n        const discountHalf = this.props.fee.amountDiscountHalf || 17;\r\n\r\n        return (\r\n            <>\r\n                <Row>\r\n                    <Col>\r\n                        <p>Whole camp</p>\r\n                        <Table>\r\n                            <thead>\r\n                            <tr>\r\n                                <th></th>\r\n                                <th>Standard Rates</th>\r\n                                <th>Discounted Rates</th>\r\n                            </tr>\r\n                            </thead>\r\n                            <tbody>\r\n                            <tr>\r\n                                <td>Unaccompanied Elfins, Pioneers &amp; Venturers</td>\r\n                                <td><FormGroup>\r\n                                    <InputGroup>\r\n                                        <div className=\"input-group-prepend\">\r\n                                            <span className=\"input-group-text\">£</span>\r\n                                        </div>\r\n                                        <Input type=\"number\" className=\"form-control\" placeholder=\"50\"\r\n                                               value={unaccompanied}\r\n                                               onChange={this.updateUnaccompaniedFee}/>\r\n                                    </InputGroup>\r\n                                </FormGroup></td>\r\n                                <td><FormGroup>\r\n                                    <InputGroup>\r\n                                        <div className=\"input-group-prepend\">\r\n                                            <span className=\"input-group-text\">£</span>\r\n                                        </div>\r\n                                        <Input type=\"number\" className=\"form-control\" placeholder=\"25\"\r\n                                               value={unaccompaniedDiscount}\r\n                                               onChange={this.updateUnaccompaniedDiscountFee}/>\r\n                                    </InputGroup>\r\n                                </FormGroup></td>\r\n                            </tr>\r\n                            <tr>\r\n                                <td>Elfins, Pioneers &amp; Venturers accompanied by a responsible adult, DFs and\r\n                                    Adults\r\n                                </td>\r\n                                <td>\r\n                                    <FormGroup>\r\n                                        <InputGroup>\r\n                                            <div className=\"input-group-prepend\">\r\n                                                <span className=\"input-group-text\">£</span>\r\n                                            </div>\r\n                                            <Input type=\"number\" className=\"form-control\" placeholder=\"35\"\r\n                                                   value={amount}\r\n                                                   onChange={this.updateStandardFee}/>\r\n                                        </InputGroup>\r\n                                    </FormGroup>\r\n                                </td>\r\n                                <td><FormGroup>\r\n                                    <InputGroup>\r\n                                        <div className=\"input-group-prepend\">\r\n                                            <span className=\"input-group-text\">£</span>\r\n                                        </div>\r\n                                        <Input type=\"number\" className=\"form-control\" placeholder=\"17\" value={discount}\r\n                                               onChange={this.updateDiscountFee}/>\r\n                                    </InputGroup>\r\n                                </FormGroup></td>\r\n                            </tr>\r\n                            </tbody>\r\n                        </Table>\r\n                    </Col>\r\n                </Row>\r\n                <Row>\r\n                    <Col>\r\n                        <p>Half camp</p>\r\n                        <Table>\r\n                            <thead>\r\n                            <tr>\r\n                                <th></th>\r\n                                <th>Standard Rates</th>\r\n                                <th>Discounted Rates</th>\r\n                            </tr>\r\n                            </thead>\r\n                            <tbody>\r\n                            <tr>\r\n                                <td>Unaccompanied Elfins, Pioneers &amp; Venturers</td>\r\n                                <td><FormGroup>\r\n                                    <InputGroup>\r\n                                        <div className=\"input-group-prepend\">\r\n                                            <span className=\"input-group-text\">£</span>\r\n                                        </div>\r\n                                        <Input type=\"number\" className=\"form-control\" placeholder=\"50\"\r\n                                               value={unaccompaniedHalf}\r\n                                               onChange={this.updateUnaccompaniedFeeHalf}/>\r\n                                    </InputGroup>\r\n                                </FormGroup></td>\r\n                                <td><FormGroup>\r\n                                    <InputGroup>\r\n                                        <div className=\"input-group-prepend\">\r\n                                            <span className=\"input-group-text\">£</span>\r\n                                        </div>\r\n                                        <Input type=\"number\" className=\"form-control\" placeholder=\"25\"\r\n                                               value={unaccompaniedDiscountHalf}\r\n                                               onChange={this.updateUnaccompaniedDiscountFeeHalf}/>\r\n                                    </InputGroup>\r\n                                </FormGroup></td>\r\n                            </tr>\r\n                            <tr>\r\n                                <td>Elfins, Pioneers &amp; Venturers accompanied by a responsible adult, DFs and\r\n                                    Adults\r\n                                </td>\r\n                                <td>\r\n                                    <FormGroup>\r\n                                        <InputGroup>\r\n                                            <div className=\"input-group-prepend\">\r\n                                                <span className=\"input-group-text\">£</span>\r\n                                            </div>\r\n                                            <Input type=\"number\" className=\"form-control\" placeholder=\"35\"\r\n                                                   value={amountHalf}\r\n                                                   onChange={this.updateStandardFeeHalf}/>\r\n                                        </InputGroup>\r\n                                    </FormGroup>\r\n                                </td>\r\n                                <td><FormGroup>\r\n                                    <InputGroup>\r\n                                        <div className=\"input-group-prepend\">\r\n                                            <span className=\"input-group-text\">£</span>\r\n                                        </div>\r\n                                        <Input type=\"number\" className=\"form-control\" placeholder=\"17\" value={discountHalf}\r\n                                               onChange={this.updateDiscountFeeHalf}/>\r\n                                    </InputGroup>\r\n                                </FormGroup></td>\r\n                            </tr>\r\n                            </tbody>\r\n                        </Table>\r\n                    </Col>\r\n                </Row>\r\n            </>);\r\n    }\r\n}\r\n\r\nexport class BookingForm extends React.Component<any, any>{\r\n\r\n    render() {\r\n\r\n        const accompanied = this.props.participants.find(p => Moment(this.props.event.startDate).diff(Moment(p.age), 'years') > 15) === undefined ? false : true;\r\n\r\n        const amount = this.props.feeData.amount || 35;\r\n        const unaccompanied = this.props.feeData.amountUnaccompanied || 50;\r\n        const unaccompaniedDiscount = this.props.feeData.amountUnaccompaniedDiscount || 25;\r\n        const discount = this.props.feeData.amountDiscount || 17;\r\n\r\n        const amountHalf = this.props.feeData.amountHalf || 35;\r\n        const unaccompaniedHalf = this.props.feeData.amountUnaccompaniedHalf || 50;\r\n        const unaccompaniedDiscountHalf = this.props.feeData.amountUnaccompaniedDiscountHalf || 25;\r\n        const discountHalf = this.props.feeData.amountDiscountHalf || 17;\r\n\r\n        const feesOwed = getFeesOwed(this.props.event, this.props.booking.participants, this.props.booking);\r\n        const tableLines = feesOwed.map(l => <tr key={l.line}>\r\n            <td>{l.line}</td>\r\n            <td><Currency\r\n                quantity={l.total}\r\n                currency=\"GBP\"\r\n            /></td>\r\n        </tr>);\r\n\r\n        return (\r\n            <Col>\r\n                <Table>\r\n                    <thead></thead>\r\n                    <tbody>{tableLines}\r\n                    <tr>\r\n                        <td><b>Total:</b></td>\r\n                        <td><b><Currency\r\n                            quantity={feesOwed.reduce((a, c) => {\r\n                                return a + c.total\r\n                            }, 0)}\r\n                            currency=\"GBP\"\r\n                        /> (discount: <Currency\r\n                            quantity={feesOwed.reduce((a, c) => {\r\n                                return a + c.discountTotal\r\n                            }, 0)}\r\n                            currency=\"GBP\"\r\n                        />)</b></td>\r\n                    </tr>\r\n                    </tbody>\r\n                </Table>\r\n                <p>The <b>discounted donation</b> is offered to all\r\n                    families/individuals where there is no wage earner and/or the family/individual is on a low wage. This\r\n                    would include DFs and students as well as adults and families. Cost should never be a reason for people\r\n                    being unable to attend camp so please contact us if you need further discount.</p>\r\n            </Col>)\r\n\r\n    /*\r\n        return (<div className=\"col-sm-12\">\r\n            <table className=\"table\">\r\n                <thead>\r\n                <tr>\r\n                    <th></th>\r\n                    <th>Suggested Donation</th>\r\n                    <th>Discounted Donation</th>\r\n                </tr>\r\n                </thead>\r\n                <tbody>\r\n                <tr>\r\n                    <td>Unaccompanied Elfins, Pioneers &amp; Venturers</td>\r\n                    <td>£{unaccompanied.toFixed(2)}</td>\r\n                    <td>£{unaccompaniedDiscount.toFixed(2)}</td>\r\n                </tr>\r\n                <tr>\r\n                    <td>Elfins, Pioneers &amp; Venturers accompanied by a responsible adult, DFs and Adults</td>\r\n                    <td>£{amount.toFixed(2)}</td>\r\n                    <td>£{discount.toFixed(2)}</td>\r\n                </tr>\r\n                <tr>\r\n                    <td><b>My\r\n                        Booking</b> ({this.props.participants.length} {this.props.participants.length < 2 ? \"person\" : \"people\"}, {accompanied ? \"Accompanied\" : \"Unaccompanied\"})\r\n                    </td>\r\n                    <td><b>£{total.toFixed(2)}</b></td>\r\n                    <td><b>£{totalDiscounted.toFixed(2)}</b></td>\r\n                </tr>\r\n                </tbody>\r\n            </table>\r\n            <p>In order for us to utilise Gift Aid the camp price has been changed to a suggested donation. If you have\r\n                the means to donate more than the donations listed above then please do so as this will allow us to\r\n                further subsidise poorer individuals and families. The <b>discounted donation</b> is offered to all\r\n                families/individuals where there is no wage earner and/or the family/individual is on a low wage. This\r\n                would include DFs and students as well as adults and families. Cost should never be a reason for people\r\n                being unable to attend camp so please contact us if you need further discount. Please make cheques\r\n                payable to Ealing District Woodcraft Folk.</p>\r\n        </div>)\r\n     */\r\n            }\r\n\r\n}\r\n\r\nexport class ThanksRow extends React.Component<any, any>{\r\n\r\n    render() {\r\n\r\n        //this.props.participants\r\n        //this.props.event.startDate\r\n\r\n        //this.props.feeData.amount\r\n        //\r\n        const feesOwed = getFeesOwed(this.props.event, this.props.booking.participants, this.props.booking);\r\n        const tableLines = feesOwed.map(l => <tr key={l.line}>\r\n            <td>{l.line}</td>\r\n            <td><Currency\r\n                quantity={l.total}\r\n                currency=\"GBP\"\r\n            /></td>\r\n        </tr>);\r\n\r\n        return (<Row>\r\n            <Col>\r\n                <Table>\r\n                    <thead></thead>\r\n                    <tbody>{tableLines}\r\n                    <tr>\r\n                        <td><b>Total:</b></td>\r\n                        <td><b><Currency\r\n                            quantity={feesOwed.reduce((a, c) => {\r\n                                return a + c.total\r\n                            }, 0)}\r\n                            currency=\"GBP\"\r\n                        /> (discount: <Currency\r\n                            quantity={feesOwed.reduce((a, c) => {\r\n                                return a + c.discountTotal\r\n                            }, 0)}\r\n                            currency=\"GBP\"\r\n                        />)</b></td>\r\n                    </tr>\r\n                    </tbody>\r\n                </Table>\r\n            </Col>\r\n        </Row>)\r\n    }\r\n}\r\n\r\nexport function emailHTML(event, booking) {\r\n\r\n    const rows = getFeesOwed(event, booking.participants, booking).map((r, i) => <tr key={i}>\r\n        <td>{r.line}</td>\r\n        <td><b>£{r.total}</b></td>\r\n    </tr>);\r\n\r\n    const total = rows.length > 1 ? <tr>\r\n        <td><b>Total</b></td>\r\n        <td><b>£{getFeesOwed(event, booking.participants, booking).reduce((a, c) => {\r\n            return a + c.total\r\n        }, 0)} (discount: £{getFeesOwed(event, booking.participants, booking).reduce((a, c) => {\r\n            return a + c.discountTotal\r\n        }, 0)})</b></td>\r\n    </tr> : null;\r\n\r\n    return (<Item>\r\n        <p><b>Money:</b></p>\r\n        <table>\r\n            <tbody>\r\n            {rows}\r\n            {total}\r\n            </tbody>\r\n        </table>\r\n    </Item>)\r\n\r\n}\r\n\r\nexport function getFeesOwed(event, participants, booking) {\r\n    const accompanied = participants.find(p => Moment(event.startDate).diff(Moment(p.age), 'years') > 15) !== undefined;\r\n\r\n    const amount = event.feeData.amount || 35;\r\n    const unaccompanied = event.feeData.amountUnaccompanied || 50;\r\n    const unaccompaniedDiscount = event.feeData.amountUnaccompaniedDiscount || 25;\r\n    const discount = event.feeData.amountDiscount || 17;\r\n\r\n    const amountHalf = event.feeData.amountHalf || 35;\r\n    const unaccompaniedHalf = event.feeData.amountUnaccompaniedHalf || 50;\r\n    const unaccompaniedDiscountHalf = event.feeData.amountUnaccompaniedDiscountHalf || 25;\r\n    const discountHalf = event.feeData.amountDiscountHalf || 17;\r\n\r\n    const filteredParticipants = cloneDeep(participants)\r\n        .filter(p => p.name && p.age)\r\n        .filter(p => !isUnderFive(event, p))\r\n        .map(p => {\r\n            if (!p.updatedAt) p.updatedAt = Moment().format(\"YYYY-MM-DD\");\r\n            p.days = event.partialDatesData.find(d => d.mask === p.days);\r\n            p.days = p.days ? p.days.name : event.partialDatesData[0].name;\r\n            return p;\r\n        });\r\n\r\n    const lines = event.partialDatesData.map(d => {\r\n        const people = filteredParticipants.filter(p => p.days === d.name).length\r\n        const isWhole = d.mask === event.partialDatesData[0].mask\r\n        if(isWhole) {\r\n            if(accompanied) {\r\n                const total = people * amount\r\n                const discountTotal = people * discount\r\n                const line = `${people} ${people < 2 ? \"person\" : \"people\"}, accompanied for the whole camp (Discount: £${discountTotal})`\r\n                return {line: line, total: total, discountTotal: discountTotal}\r\n            }  else {\r\n                const total = people * unaccompanied\r\n                const discountTotal = people * unaccompaniedDiscount\r\n                const line = `${people} ${people < 2 ? \"person\" : \"people\"}, unaccompanied for the whole camp (Discount: £${discountTotal})`\r\n                return {line: line, total: total, discountTotal: discountTotal}\r\n            }\r\n        } else {\r\n            if(accompanied) {\r\n                const total = people * amountHalf\r\n                const discountTotal = people * discountHalf\r\n                const line = `${people} ${people < 2 ? \"person\" : \"people\"}, accompanied for half the camp (Discount: £${discountTotal})`\r\n                return {line: line, total: total, discountTotal: discountTotal}\r\n            }  else {\r\n                const total = people * unaccompaniedHalf\r\n                const discountTotal = people * unaccompaniedDiscountHalf\r\n                const line = `${people} ${people < 2 ? \"person\" : \"people\"}, unaccompanied for half the camp (Discount: £${discountTotal})`\r\n                return {line: line, total: total, discountTotal: discountTotal}\r\n            }\r\n        }\r\n    }).filter(l => l.total > 0)\r\n\r\n    return [...lines, ...underFives(event, participants)]\r\n\r\n    /*\r\n    const total = participants.length * (accompanied ? amount : unaccompanied);\r\n    const totalDiscounted = participants.length * (accompanied ? discount : unaccompaniedDiscount);\r\n\r\n    const line = `${participants.length} ${participants.length < 2 ? \"person\" : \"people\"}, ${accompanied ? \"Accompanied\" : \"Unaccompanied\"} (Discount: £${totalDiscounted})`;\r\n\r\n    return [{line: line, total: total.toFixed(2)}];\r\n\r\n     */\r\n}\r\n\r\nconst underFives = (event, participants) => {\r\n    const filteredParticipants = cloneDeep(participants)\r\n        .filter(p => p.name && p.age)\r\n        .filter(p => isUnderFive(event, p));\r\n    if (filteredParticipants.length > 0) return [{\r\n        line:  `${filteredParticipants.length} ${filteredParticipants.length > 1 ? 'people' : 'person'} under five for free`,\r\n        total: 0\r\n    }];\r\n    else return [];\r\n};\r\n\r\nconst isUnderFive = (e, p) => {\r\n    return Date.parse(e.startDate) - Date.parse(p.age) < 157784630000\r\n};\r\n","import * as React from 'react'\r\n\r\nimport {\r\n    Row,\r\n    Col,\r\n    FormGroup,\r\n    Input,\r\n    Table,\r\n    InputGroup\r\n} from 'reactstrap';\r\n\r\nimport {\r\n    Item,\r\n    Span,\r\n    A,\r\n    Box\r\n} from 'react-html-email'\r\n\r\nimport update from 'immutability-helper';\r\n\r\nimport Moment from 'moment';\r\n\r\n\r\n//this implements Ealing's camp pricing policy.\r\n\r\nexport const name = \"ealing\";\r\nexport const selection = \"Ealing Pricing Policy\";\r\n\r\nexport class Config extends React.Component<any, any>{\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.updateStandardFee = this.updateStandardFee.bind(this);\r\n        this.updateDiscountFee = this.updateDiscountFee.bind(this);\r\n        this.updateUnaccompaniedFee = this.updateUnaccompaniedFee.bind(this);\r\n        this.updateUnaccompaniedDiscountFee = this.updateUnaccompaniedDiscountFee.bind(this);\r\n    }\r\n\r\n    updateStandardFee(e) {\r\n        this.props.update(update(this.props.fee, {amount:{$set:  parseFloat(e.target.value)}}));\r\n    }\r\n\r\n    updateDiscountFee(e) {\r\n        this.props.update(update(this.props.fee, {amountDiscount:{$set:  parseFloat(e.target.value)}}));\r\n    }\r\n\r\n    updateUnaccompaniedFee(e) {\r\n        this.props.update(update(this.props.fee, {amountUnaccompanied:{$set:  parseFloat(e.target.value)}}));\r\n    }\r\n\r\n    updateUnaccompaniedDiscountFee(e) {\r\n        this.props.update(update(this.props.fee, {amountUnaccompaniedDiscount:{$set:  parseFloat(e.target.value)}}));\r\n    }\r\n\r\n    render() {\r\n        //Thou shalt not ever use JS numbers for currency...\r\n        const amount = this.props.fee.amount || 35;\r\n        const unaccompanied = this.props.fee.amountUnaccompanied || 50;\r\n        const unaccompaniedDiscount = this.props.fee.amountUnaccompaniedDiscount || 25;\r\n        const discount = this.props.fee.amountDiscount || 17;\r\n\r\n        return (<Row>\r\n            <Col>\r\n                <Table>\r\n                    <thead>\r\n                    <tr>\r\n                        <th></th>\r\n                        <th>Standard Rates</th>\r\n                        <th>Discounted Rates</th>\r\n                    </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                    <tr>\r\n                        <td>Unaccompanied Elfins, Pioneers &amp; Venturers</td>\r\n                        <td><FormGroup>\r\n                            <InputGroup>\r\n                                <div className=\"input-group-prepend\">\r\n                                    <span className=\"input-group-text\">£</span>\r\n                                </div>\r\n                                <Input type=\"number\" className=\"form-control\" placeholder=\"50\" value={unaccompanied}\r\n                                       onChange={this.updateUnaccompaniedFee}/>\r\n                            </InputGroup>\r\n                        </FormGroup></td>\r\n                        <td><FormGroup>\r\n                            <InputGroup>\r\n                                <div className=\"input-group-prepend\">\r\n                                    <span className=\"input-group-text\">£</span>\r\n                                </div>\r\n                                <Input type=\"number\" className=\"form-control\" placeholder=\"25\" value={unaccompaniedDiscount}\r\n                                       onChange={this.updateUnaccompaniedDiscountFee}/>\r\n                            </InputGroup>\r\n                        </FormGroup></td>\r\n                    </tr>\r\n                    <tr>\r\n                        <td>Elfins, Pioneers &amp; Venturers accompanied by a responsible adult, DFs and Adults</td>\r\n                        <td>\r\n                            <FormGroup>\r\n                                <InputGroup>\r\n                                    <div className=\"input-group-prepend\">\r\n                                        <span className=\"input-group-text\">£</span>\r\n                                    </div>\r\n                                    <Input type=\"number\" className=\"form-control\" placeholder=\"35\" value={amount}\r\n                                           onChange={this.updateStandardFee}/>\r\n                                </InputGroup>\r\n                            </FormGroup>\r\n                        </td>\r\n                        <td><FormGroup>\r\n                            <InputGroup>\r\n                                <div className=\"input-group-prepend\">\r\n                                    <span className=\"input-group-text\">£</span>\r\n                                </div>\r\n                                <Input type=\"number\" className=\"form-control\" placeholder=\"17\" value={discount}\r\n                                       onChange={this.updateDiscountFee}/>\r\n                            </InputGroup>\r\n                        </FormGroup></td>\r\n                    </tr>\r\n                    </tbody>\r\n                </Table>\r\n            </Col>\r\n        </Row>);\r\n    }\r\n}\r\n\r\nexport class BookingForm extends React.Component<any, any>{\r\n\r\n    render() {\r\n\r\n        const accompanied = this.props.participants.find(p => Moment(this.props.event.startDate).diff(Moment(p.age), 'years') > 15) === undefined ? false : true;\r\n\r\n        const amount = this.props.feeData.amount || 35;\r\n        const unaccompanied = this.props.feeData.amountUnaccompanied || 50;\r\n        const unaccompaniedDiscount = this.props.feeData.amountUnaccompaniedDiscount || 25;\r\n        const discount = this.props.feeData.amountDiscount || 17;\r\n\r\n        const total = this.props.participants.length * (accompanied ? amount : unaccompanied);\r\n        const totalDiscounted = this.props.participants.length * (accompanied ? discount : unaccompaniedDiscount);\r\n\r\n        return (<div className=\"col-sm-12\">\r\n            <table className=\"table\">\r\n                <thead>\r\n                <tr>\r\n                    <th></th>\r\n                    <th>Suggested Donation</th>\r\n                    <th>Discounted Donation</th>\r\n                </tr>\r\n                </thead>\r\n                <tbody>\r\n                <tr>\r\n                    <td>Unaccompanied Elfins, Pioneers &amp; Venturers</td>\r\n                    <td>£{unaccompanied.toFixed(2)}</td>\r\n                    <td>£{unaccompaniedDiscount.toFixed(2)}</td>\r\n                </tr>\r\n                <tr>\r\n                    <td>Elfins, Pioneers &amp; Venturers accompanied by a responsible adult, DFs and Adults</td>\r\n                    <td>£{amount.toFixed(2)}</td>\r\n                    <td>£{discount.toFixed(2)}</td>\r\n                </tr>\r\n                <tr>\r\n                    <td><b>My\r\n                        Booking</b> ({this.props.participants.length} {this.props.participants.length < 2 ? \"person\" : \"people\"}, {accompanied ? \"Accompanied\" : \"Unaccompanied\"})\r\n                    </td>\r\n                    <td><b>£{total.toFixed(2)}</b></td>\r\n                    <td><b>£{totalDiscounted.toFixed(2)}</b></td>\r\n                </tr>\r\n                </tbody>\r\n            </table>\r\n            <p>In order for us to utilise Gift Aid the camp price has been changed to a suggested donation. If you have\r\n                the means to donate more than the donations listed above then please do so as this will allow us to\r\n                further subsidise poorer individuals and families. The <b>discounted donation</b> is offered to all\r\n                families/individuals where there is no wage earner and/or the family/individual is on a low wage. This\r\n                would include DFs and students as well as adults and families. Cost should never be a reason for people\r\n                being unable to attend camp so please contact us if you need further discount. Please make cheques\r\n                payable to Ealing District Woodcraft Folk.</p>\r\n        </div>)\r\n    }\r\n}\r\n\r\nexport class ThanksRow extends React.Component<any, any>{\r\n\r\n    render() {\r\n\r\n        const accompanied = this.props.booking.participants.find(p => Moment(this.props.event.startDate).diff(Moment(p.age), 'years') > 15) === undefined ? false : true;\r\n\r\n        const amount = this.props.event.feeData.amount || 35;\r\n        const unaccompanied = this.props.event.feeData.amountUnaccompanied || 50;\r\n        const unaccompaniedDiscount = this.props.event.feeData.amountUnaccompaniedDiscount || 25;\r\n        const discount = this.props.event.feeData.amountDiscount || 17;\r\n\r\n        const total = this.props.booking.participants.length * (accompanied ? amount : unaccompanied);\r\n        const totalDiscounted = this.props.booking.participants.length * (accompanied ? discount : unaccompaniedDiscount);\r\n\r\n        return (<Row>\r\n            <Col>\r\n                <Table>\r\n                    <thead>\r\n                    <tr>\r\n                        <th></th>\r\n                        <th>Suggested Donation</th>\r\n                        <th>Discounted Donation</th>\r\n                    </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                    <tr>\r\n                        <td>Unaccompanied Elfins, Pioneers &amp; Venturers</td>\r\n                        <td>£{unaccompanied.toFixed(2)}</td>\r\n                        <td>£{unaccompaniedDiscount.toFixed(2)}</td>\r\n                    </tr>\r\n                    <tr>\r\n                        <td>Elfins, Pioneers &amp; Venturers accompanied by a responsible adult, DFs and Adults</td>\r\n                        <td>£{amount.toFixed(2)}</td>\r\n                        <td>£{discount.toFixed(2)}</td>\r\n                    </tr>\r\n                    <tr>\r\n                        <td><b>My\r\n                            Booking</b> ({this.props.booking.participants.length} {this.props.booking.participants.length < 2 ? \"person\" : \"people\"}, {accompanied ? \"Accompanied\" : \"Unaccompanied\"})\r\n                        </td>\r\n                        <td><b>£{total.toFixed(2)}</b></td>\r\n                        <td><b>£{totalDiscounted.toFixed(2)}</b></td>\r\n                    </tr>\r\n                    </tbody>\r\n                </Table>\r\n            </Col>\r\n        </Row>)\r\n    }\r\n\r\n}\r\n\r\nexport function emailHTML(event, booking) {\r\n\r\n    const rows = getFeesOwed(event, booking.participants, booking).map((r, i) => <tr key={i}>\r\n        <td>{r.line}</td>\r\n        <td><b>£{r.total}</b></td>\r\n    </tr>);\r\n\r\n    return (<Item>\r\n        <p><b>Money:</b></p>\r\n        <table>\r\n            <tbody>\r\n            {rows}\r\n            </tbody>\r\n        </table>\r\n    </Item>)\r\n\r\n}\r\n\r\nexport function getFeesOwed(event, participants, booking) {\r\n    const accompanied = participants.find(p => Moment(event.startDate).diff(Moment(p.age), 'years') > 15) === undefined ? false : true;\r\n\r\n    const amount = event.feeData.amount || 35;\r\n    const unaccompanied = event.feeData.amountUnaccompanied || 50;\r\n    const unaccompaniedDiscount = event.feeData.amountUnaccompaniedDiscount || 25;\r\n    const discount = event.feeData.amountDiscount || 17;\r\n\r\n    const total = participants.length * (accompanied ? amount : unaccompanied);\r\n    const totalDiscounted = participants.length * (accompanied ? discount : unaccompaniedDiscount);\r\n\r\n    const line = `${participants.length} ${participants.length < 2 ? \"person\" : \"people\"}, ${accompanied ? \"Accompanied\" : \"Unaccompanied\"} (Discount: £${totalDiscounted})`;\r\n\r\n    return [{line: line, total: total.toFixed(2)}];\r\n}","\r\nconst feeMatrix = {\r\n    free:   {\r\n        whole:   require('./free'),\r\n        free:    require('./free'),\r\n        presets: require('./free')\r\n    },\r\n    flat:         {\r\n        whole:   require('./flat'),\r\n        free:    require('./flat'),\r\n        presets: require('./flat')\r\n    },\r\n    ealing:       {\r\n        whole:   require('./ealing'),\r\n        free:    require('./ealing'),\r\n        presets: require('./ealing-cg'),\r\n    },\r\n    big:          {\r\n        whole:   require('./big'),\r\n        free:    require('./free'),\r\n        presets: require('./big')\r\n    },\r\n    vcamp:        {\r\n        whole:   require('./free'),\r\n        free:    require('./vcamp-free'),\r\n        presets: require('./free')\r\n    },\r\n    commonground: {\r\n        whole:   require('./free'),\r\n        free:    require('./free'),\r\n        presets: require('./cg-preset')\r\n    }\r\n};\r\n\r\nfunction getFeeModel(event) {\r\n    return feeMatrix[event.feeModel][event.partialDates];\r\n};\r\n\r\n\r\nexport default getFeeModel","import * as React from 'react'\r\n//This event has a flat per participant cost.\r\n\r\nimport {\r\n    Button,\r\n    Row,\r\n    Col,\r\n    Form,\r\n    FormGroup,\r\n    Label,\r\n    Input,\r\n    InputGroup,\r\n    InputGroupAddon,\r\n    Card,\r\n    CardBody,\r\n    CardTitle,\r\n    CardImg,\r\n    CardImgOverlay,\r\n    Table\r\n} from 'reactstrap';\r\nimport Currency from \"react-currency-formatter\";\r\nimport {Item} from \"react-html-email\";\r\nimport paymentLines from \"./payment-lines\";\r\n\r\nexport const name = \"flat\";\r\nexport const selection = \"Flat fee per participant\";\r\n\r\nexport class Config extends React.Component<any, any>{\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.update = this.update.bind(this);\r\n    }\r\n\r\n    update(e) {\r\n        const fee = {amount: e.target.value}\r\n        this.props.update(fee);\r\n    }\r\n\r\n    render() {\r\n\r\n        const amount = this.props.fee.amount || \"\";\r\n\r\n        return (<FormGroup row>\r\n            <Label sm={3}>Fee per participant:</Label>\r\n            <Col sm={9}>\r\n                <InputGroup>\r\n                    <div className=\"input-group-prepend\">\r\n                        <span className=\"input-group-text\">£</span>\r\n                    </div>\r\n                    <Input type=\"number\" className=\"form-control\" placeholder=\"35\" value={amount}\r\n                           onChange={this.update}/>\r\n                </InputGroup>\r\n            </Col>\r\n        </FormGroup>);\r\n    }\r\n}\r\n\r\nexport class BookingForm extends React.Component<any, any>{\r\n\r\n    render() {\r\n\r\n        const participants = this.props.participants ? this.props.participants.length : 0\r\n        const total = this.props.feeData.amount * participants\r\n\r\n        return (<Row>\r\n            <Col>\r\n                <p>This event costs £{this.props.feeData.amount} per person.</p>\r\n                <p>You have booked <b>{participants}</b> {`${participants > 1 ? 'people' : 'person'}`} for a total of <b>£{total}</b></p>\r\n            </Col>\r\n        </Row>);\r\n\r\n    }\r\n}\r\n\r\nexport class ThanksRow extends React.Component<any, any>{\r\n\r\n    render() {\r\n\r\n        const participants = this.props.booking.participants ? this.props.booking.participants.length : 0\r\n        const total = this.props.event.feeData.amount * participants\r\n\r\n\r\n        return (<Row>\r\n            <Col>\r\n                <p>This event costs £{this.props.event.feeData.amount} per person.</p>\r\n                <p>You have booked <b>{participants}</b> {`${participants > 1 ? 'people' : 'person'}`} for a total of <b>£{total}</b></p>\r\n            </Col>\r\n        </Row>);\r\n\r\n    }\r\n}\r\n\r\nexport function emailHTML(event, booking) {\r\n\r\n    const rows = getFeesOwed(event, booking.participants, booking).map((r, i) => <tr key={i}>\r\n        <td>{r.line}: </td>\r\n        <td><b><Currency\r\n            quantity={r.total}\r\n            currency=\"GBP\"\r\n        /></b></td>\r\n    </tr>);\r\n\r\n    const total = rows.length > 1 ? <tr>\r\n        <td><b>Total</b></td>\r\n        <td><b><Currency\r\n            quantity={getFeesOwed(event, booking.participants, booking).reduce((a, c) => {\r\n                return a + c.total\r\n            }, 0)}\r\n            currency=\"GBP\"\r\n        /></b></td>\r\n    </tr> : null;\r\n\r\n    return (<Item>\r\n        <p><b>Money:</b></p>\r\n        <table>\r\n            <tbody>\r\n            {rows}\r\n            {total}\r\n            </tbody>\r\n        </table>\r\n    </Item>)\r\n\r\n}\r\n\r\nexport function getFeesOwed(event, participants, booking, payments=true) {\r\n    const people = participants.length\r\n    const result = {\r\n        line:  `${people} ${people > 1 ? 'people' : 'person'} at £${event.feeData.amount}`,\r\n            total: event.feeData.amount * people\r\n    }\r\n\r\n    return [result, ...(payments ? paymentLines(event, participants, booking) : [])];\r\n}\r\n","import * as React from 'react'\r\nimport { Item } from \"react-html-email\";\r\n//this represents a free event whereby no fees are expected/managed by the system.\r\n\r\nexport const name = \"free\";\r\nexport const selection = \"Free Event (don't manage fees)\";\r\n\r\nexport const Config = () => <p>Nothing to decide3</p>;\r\n\r\nexport const BookingForm = (props) => <p>This is free event, no money involved</p>;\r\n\r\nexport const ThanksRow = (props) => null\r\n\r\nexport function emailHTML(event, booking) {\r\n    return (<Item>\r\n    </Item>)\r\n}","import Moment        from 'moment'\r\n\r\nexport default function paymentLines(event, participants, booking) {\r\n\r\n    if(!booking.payments) return [];\r\n\r\n    const adjustments = booking.payments.filter(p => p.type === \"adjustment\");\r\n    const payments = booking.payments.filter(p => p.type === \"payment\");\r\n\r\n    return [...adjustments.map(a => {\r\n                return {total: a.amount, line: a.note}}),\r\n        ...payments.map(p => {\r\n                return {total: -p.amount, line: `Payment recorded ${Moment(p.createdAt).format('L')} ${p.note}`}})\r\n    ]\r\n\r\n}","import * as React from 'react'\r\nimport Moment        from 'moment'\r\nimport update        from 'immutability-helper';\r\nimport cloneDeep     from \"lodash/cloneDeep\";\r\nimport map           from 'lodash/map';\r\nimport reduce        from 'lodash/reduce';\r\nimport ReactMarkdown from 'react-markdown'\r\nimport popcount      from '@f/popcount';\r\n//this implements a pricing policy for large camps\r\n\r\nimport  { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport  { faTimes }         from '@fortawesome/free-solid-svg-icons'\r\n\r\nimport {\r\n    Row,\r\n    Col,\r\n    FormGroup,\r\n    Input,\r\n    Table,\r\n    InputGroup,\r\n    Button,\r\n    Label\r\n} from 'reactstrap';\r\n\r\nimport {\r\n    Item,\r\n    Span,\r\n    A,\r\n    Box\r\n} from 'react-html-email'\r\n\r\nlet bucketKey = Math.random() * 10000\r\n\r\n\r\nexport const name = \"big\";\r\nexport const selection = \"Big Camp Pricing Policy\";\r\n\r\nexport class Config extends React.Component<any, any>{\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.addBucket = this.addBucket.bind(this);\r\n        this.deleteBucket = this.deleteBucket.bind(this);\r\n        this.updateDate = this.updateDate.bind(this);\r\n        this.update = this.update.bind(this);\r\n        this.updateAmount = this.updateAmount.bind(this);\r\n    }\r\n\r\n    update(field) {\r\n        return e => {\r\n            this.props.update(update(this.props.fee, {[field]: {$set: e.target.value}}));\r\n            e.preventDefault();\r\n        }\r\n    }\r\n\r\n    updateDate(id) {\r\n        return e => {\r\n            const buckets = cloneDeep(this.props.fee.buckets);\r\n            buckets.forEach(b => {\r\n                if (b.id === id) b.date = e.target.value;\r\n            });\r\n            this.props.update(update(this.props.fee, {buckets: {$set: buckets}}));\r\n            e.preventDefault();\r\n        }\r\n    }\r\n\r\n    updateAmount(id) {\r\n        return item => e => {\r\n            const buckets = cloneDeep(this.props.fee.buckets);\r\n            buckets.forEach(b => {\r\n                if (b.id === id) b[item] = e.target.value;\r\n            });\r\n            this.props.update(update(this.props.fee, {buckets: {$set: buckets}}));\r\n            e.preventDefault();\r\n        }\r\n    }\r\n\r\n    addBucket(e) {\r\n        const buckets = [...(this.props.fee.buckets || [])];\r\n        buckets.push({id: \"bucket\" + bucketKey, date: new Date()});\r\n        bucketKey++;\r\n        this.props.update(update(this.props.fee, {buckets: {$set: buckets}}));\r\n        e.preventDefault();\r\n    }\r\n\r\n    deleteBucket(id) {\r\n        return e => {\r\n            const buckets = cloneDeep(this.props.fee.buckets).filter(b => b.id !== id);\r\n            this.props.update(update(this.props.fee, {buckets: {$set: buckets}}));\r\n            e.preventDefault();\r\n        }\r\n    }\r\n\r\n    render() {\r\n        //Thou shalt not ever use JS numbers for currency...\r\n        const dateBuckets = this.props.fee.buckets || [];\r\n\r\n        const bucketRows = dateBuckets.map(b => {\r\n\r\n            const feeBoxes = <React.Fragment>\r\n                <FormGroup row>\r\n                    <Label sm={4}>Whole Event:</Label>\r\n                    <Col sm={8}>\r\n                        <InputGroup>\r\n                            <div className=\"input-group-prepend\">\r\n                                <span className=\"input-group-text\">£</span>\r\n                            </div>\r\n                            <Input type=\"number\" className=\"form-control\" value={b.whole}\r\n                                   onChange={this.updateAmount(b.id)('whole')}/>\r\n                        </InputGroup>\r\n                    </Col>\r\n                </FormGroup>\r\n                <p>Partial attendance fee = A + B * (nights attending)</p>\r\n                <FormGroup row>\r\n                    <Label sm={2}>A:</Label>\r\n                    <Col sm={4}>\r\n                        <InputGroup>\r\n\r\n                            <div className=\"input-group-prepend\">\r\n                                <span className=\"input-group-text\">£</span>\r\n                            </div>\r\n                            <Input type=\"number\" className=\"form-control\" placeholder=\"35\" value={b.a}\r\n                                   onChange={this.updateAmount(b.id)('a')}/>\r\n                        </InputGroup>\r\n                    </Col>\r\n                    <Label sm={2}>B:</Label>\r\n                    <Col sm={4}>\r\n                        <InputGroup>\r\n\r\n                            <div className=\"input-group-prepend\">\r\n                                <span className=\"input-group-text\">£</span>\r\n                            </div>\r\n                            <Input type=\"number\" className=\"form-control\" placeholder=\"35\" value={b.b}\r\n                                   onChange={this.updateAmount(b.id)('b')}/>\r\n                        </InputGroup>\r\n                    </Col>\r\n                </FormGroup>\r\n            </React.Fragment>;\r\n\r\n            return <tr key={b.id}>\r\n                <td><Input type=\"date\" onChange={this.updateDate(b.id)} value={Moment(b.date).format(\"YYYY-MM-DD\")}/>\r\n                </td>\r\n                <td>{feeBoxes}</td>\r\n                <td>\r\n                    <Button onClick={this.deleteBucket(b.id)} color=\"warning\">\r\n                        <span style={{color: 'white'}}><FontAwesomeIcon icon={faTimes}/></span>\r\n                    </Button>\r\n                </td>\r\n            </tr>\r\n        });\r\n\r\n        return (<React.Fragment>\r\n            <Row>\r\n                <Col>\r\n                    <FormGroup>\r\n                        <Label>Description (Markdown supported):</Label>\r\n                        <Input type=\"textarea\" name=\"description\" value={this.props.fee.desc}\r\n                               onChange={this.update('desc')}/>\r\n                    </FormGroup>\r\n                </Col>\r\n            </Row>\r\n            <Row>\r\n                <Col>\r\n                    <h4>Date buckets</h4>\r\n                    <Table>\r\n                        <thead>\r\n                        <tr>\r\n                            <th>Up Until Date</th>\r\n                            <th>Fee</th>\r\n                            <th></th>\r\n                        </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                        {bucketRows}\r\n                        </tbody>\r\n                    </Table>\r\n                    <Button onClick={this.addBucket}>Add Bucket</Button>\r\n                </Col>\r\n            </Row>\r\n            <Row>\r\n                <Col>\r\n                    <FormGroup row>\r\n                        <Label sm={4}>Cancellation Fee:</Label>\r\n                        <Col sm={2}>\r\n                            <InputGroup>\r\n                                <div className=\"input-group-prepend\">\r\n                                    <span className=\"input-group-text\">£</span>\r\n                                </div>\r\n                                <Input type=\"number\" className=\"form-control\" placeholder=\"50\"\r\n                                       value={this.props.fee.cancel}\r\n                                       onChange={this.update('cancel')}/>\r\n                            </InputGroup>\r\n                        </Col>\r\n                    </FormGroup>\r\n                </Col>\r\n            </Row>\r\n        </React.Fragment>)\r\n    }\r\n}\r\n\r\nexport class BookingForm extends React.Component<any, any>{\r\n\r\n    render() {\r\n\r\n        //this.props.participants\r\n        //this.props.event.startDate\r\n\r\n        //this.props.feeData.amount\r\n        //\r\n        const feesOwed = getFeesOwed(this.props.event, this.props.participants, this.props.booking);\r\n        const tableLines = feesOwed.map(l => <tr key={l.line}>\r\n            <td>{l.line}</td>\r\n            <td>£{l.total}</td>\r\n        </tr>);\r\n\r\n        return (<Row>\r\n            <Col sm={12}>\r\n                <ReactMarkdown children={this.props.event.feeData.desc}/>\r\n            </Col>\r\n            <Col>\r\n                <Table>\r\n                    <thead></thead>\r\n                    <tbody>{tableLines}\r\n                    <tr>\r\n                        <td><b>Total:</b></td>\r\n                        <td><b>£{feesOwed.reduce((a, c) => {\r\n                            return a + c.total\r\n                        }, 0)}</b></td>\r\n                    </tr>\r\n                    </tbody>\r\n                </Table>\r\n            </Col>\r\n        </Row>)\r\n    }\r\n}\r\n\r\nexport class ThanksRow extends React.Component<any, any>{\r\n\r\n    render() {\r\n\r\n        //this.props.participants\r\n        //this.props.event.startDate\r\n\r\n        //this.props.feeData.amount\r\n        //\r\n        const feesOwed = getFeesOwed(this.props.event, this.props.booking.participants, this.props.booking);\r\n        const tableLines = feesOwed.map(l => <tr key={l.line}>\r\n            <td>{l.line}</td>\r\n            <td>£{l.total}</td>\r\n        </tr>);\r\n\r\n        return (<Row>\r\n            <Col>\r\n                <Table>\r\n                    <thead></thead>\r\n                    <tbody>{tableLines}\r\n                    <tr>\r\n                        <td><b>Total:</b></td>\r\n                        <td><b>£{feesOwed.reduce((a, c) => {\r\n                            return a + c.total\r\n                        }, 0)}</b></td>\r\n                    </tr>\r\n                    </tbody>\r\n                </Table>\r\n            </Col>\r\n        </Row>)\r\n    }\r\n}\r\n\r\nexport function emailHTML(event, booking) {\r\n\r\n    const rows = getFeesOwed(event, booking.participants, booking).map((r, i) => <tr key={i}>\r\n        <td>{r.line}</td>\r\n        <td><b>£{r.total}</b></td>\r\n    </tr>);\r\n\r\n    const total = rows.length > 1 ? <tr>\r\n        <td><b>Total</b></td>\r\n        <td><b>£{getFeesOwed(event, booking.participants, booking).reduce((a, c) => {\r\n            return a + c.total\r\n        }, 0)}</b></td>\r\n    </tr> : null;\r\n\r\n    return (<Item>\r\n        <p><b>Money:</b></p>\r\n        <table>\r\n            <tbody>\r\n            {rows}\r\n            {total}\r\n            </tbody>\r\n        </table>\r\n    </Item>)\r\n\r\n}\r\n\r\n\r\nexport function getFeesOwed(event, participants, booking) {\r\n\r\n    switch (event.partialDates) {\r\n        case 'whole':\r\n            return owedWholeEvent(event, participants, booking);\r\n        case 'presets':\r\n            return owedPresetEvent(event, participants, booking);\r\n        case 'free':\r\n            return owedFreeEvent(event, participants, booking);\r\n        default:\r\n            return [{line: \"Unsupported attendance/fee combo\", total: 0}]\r\n    }\r\n}\r\n\r\nconst owedFreeEvent = (event, participants, booking) => {\r\n\r\n    const wholeMask = 2 ** (Moment(event.endDate).diff(Moment(event.startDate), 'days') + 1) - 1\r\n\r\n    const sortedBuckets = event.feeData.buckets.sort((a, b) => a.date < b.date ? 1 : a.date === b.date ? 0 : -1);\r\n\r\n    const filteredParticipants = cloneDeep(participants)\r\n    .filter(p => p.name && p.age && (p.days > 0))\r\n    .map(p => {\r\n        if (!p.updatedAt) p.updatedAt = Moment().format(\"YYYY-MM-DD\");\r\n        return p;\r\n    });\r\n\r\n    const rawCosts = filteredParticipants.map(p => sortedBuckets.reduce((a, c) => {\r\n        if (new Date(p.updatedAt) < new Date(c.date)) return {\r\n            type: p.days === wholeMask ? 'whole' : 'partial',\r\n            days: popcount(p.days),\r\n            date: c.date,\r\n            fee:  p.days === wholeMask ? parseInt(c.whole) : parseInt(c.a) + (parseInt(c.b) * (popcount(p.days) - 1))\r\n        };\r\n        else return a;\r\n    }, {}));\r\n\r\n    const combinedCosts = rawCosts.reduce((a, c) => {\r\n\r\n        a[c.date] = a[c.date] || {};\r\n        a[c.date][c.days] = a[c.date][c.days] || {count: 0, fee: c.fee, type: c.type};\r\n        a[c.date][c.days].count++;\r\n        return a;\r\n    }, {});\r\n    //@ts-ignore\r\n    const lines = reduce(combinedCosts, (a, c, i) => [...a, ...reduce(c, (a1, c1, i1) => [...a1, {\r\n        //@ts-ignore\r\n        line:  `${c1.count} ${c1.count > 1 ? 'people' : 'person'} booked for ${c1.type === 'whole' ? 'whole event' : `${i1 - 1} nights`} before ${Moment(i).format('MMMM Do YYYY')} at £${c1.fee}`,\r\n        total: c1.count * c1.fee\r\n    }], [])], []);\r\n\r\n\r\n    return lines;\r\n\r\n};\r\n\r\nconst owedWholeEvent = (event, participants, booking) => {\r\n\r\n    const sortedBuckets = event.feeData.buckets.sort((a, b) => a.date < b.date ? 1 : a.date === b.date ? 0 : -1);\r\n\r\n    const filteredParticipants = cloneDeep(participants)\r\n    .filter(p => p.name && p.age)\r\n    .map(p => {\r\n        if (!p.updatedAt) p.updatedAt = Moment().format(\"YYYY-MM-DD\");\r\n        return p;\r\n    });\r\n\r\n    const rawCosts = filteredParticipants.map(p => sortedBuckets.reduce((a, c) => {\r\n        if (new Date(p.updatedAt) < new Date(c.date)) return {\r\n            type:   isWoodchip(event, p) ? 'woodchip' : 'normal',\r\n            date:   c.date,\r\n            mask:   p.days,\r\n            amount: c.amount * (isWoodchip(event, p) ? event.feeData.woodchips : 1)\r\n        };\r\n        else return a;\r\n    }, {}));\r\n\r\n    const combinedCosts = rawCosts.reduce((a, c) => {\r\n        if (a[c.date] && a[c.date][c.type]) a[c.date][c.type].count++;\r\n        else {\r\n            a[c.date] = a[c.date] || {};\r\n            a[c.date][c.type] = {count: 1, amount: c.amount};\r\n        }\r\n        return a;\r\n    }, {});\r\n\r\n    return [...linesWithoutPartial(combinedCosts), ...cancelledFee(event, participants, booking)];\r\n};\r\n\r\nconst owedPresetEvent = (event, participants, booking) => {\r\n\r\n    const sortedBuckets = event.feeData.buckets.sort((a, b) => a.date < b.date ? 1 : a.date === b.date ? 0 : -1);\r\n\r\n    const filteredParticipants = cloneDeep(participants)\r\n    .filter(p => p.name && p.age)\r\n    .map(p => {\r\n        if (!p.updatedAt) p.updatedAt = Moment().format(\"YYYY-MM-DD\");\r\n        p.days = event.partialDatesData.find(d => d.mask === p.days);\r\n        p.days = p.days ? p.days.name : event.partialDatesData[0].name;\r\n        return p;\r\n    });\r\n\r\n    const rawCosts = filteredParticipants.map(p => sortedBuckets.reduce((a, c) => {\r\n        if (new Date(p.updatedAt) < new Date(c.date)) return {\r\n            type:   isWoodchip(event, p) ? 'woodchip' : 'normal',\r\n            date:   c.date,\r\n            mask:   p.days,\r\n            amount: c.amount[p.days] * (isWoodchip(event, p) ? event.feeData.woodchips : 1)\r\n        };\r\n        else return a;\r\n    }, {}));\r\n\r\n    const combinedCosts = rawCosts.reduce((a, c) => {\r\n        if (a[c.date] && a[c.date][c.mask] && a[c.date][c.mask][c.type]) a[c.date][c.mask][c.type].count++;\r\n        else {\r\n            a[c.date] = a[c.date] || {};\r\n            a[c.date][c.mask] = a[c.date][c.mask] || {};\r\n            a[c.date][c.mask][c.type] = {count: 1, amount: c.amount};\r\n        }\r\n        return a;\r\n    }, {});\r\n\r\n    return [...linesWithPartial(combinedCosts), ...cancelledFee(event, participants, booking)];\r\n};\r\n//@ts-ignore\r\nconst linesWithoutPartial = combined => reduce(combined, (a, c, i) => [...a, ...map(c, (l, t) => {\r\n    if (t === 'normal') return {\r\n        line:  `${l.count} ${l.count > 1 ? 'people' : 'person'} booked before ${Moment(i).format('MMMM Do YYYY')} at £${l.amount}`,\r\n        total: l.count * l.amount\r\n    };\r\n    else return {\r\n        line:  `${l.count} ${l.count > 1 ? 'woodchips' : 'woodchip'} booked before ${Moment(i).format('MMMM Do YYYY')} at £${l.amount}`,\r\n        total: l.count * l.amount\r\n    }\r\n})], []);\r\n//@ts-ignore\r\nconst linesWithPartial = (combined) => reduce(combined, (a, c, i) => [...a, ...reduce(c, (a1, c1, i1) => [...a1, ...map(c1, (l, t) => {\r\n    if (t === 'normal') return {\r\n        line:  `${l.count} ${l.count > 1 ? 'people' : 'person'} booked for ${i1} before ${Moment(i).format('MMMM Do YYYY')} at £${l.amount}`,\r\n        total: l.count * l.amount\r\n    };\r\n    else return {\r\n        line:  `${l.count} ${l.count > 1 ? 'woodchips' : 'woodchip'} booked for ${i1} before ${Moment(i).format('MMMM Do YYYY')} at £${l.amount}`,\r\n        total: l.count * l.amount\r\n    }\r\n})], [])], []);\r\n\r\nconst cancelledFee = (event, participants, booking) => {\r\n\r\n    if (!booking.maxParticipants || booking.maxParticipants <= participants.length || event.feeData.cancel === 0) return [];\r\n    return [{\r\n        line:  `${booking.maxParticipants - participants.length} cancelled bookings at £${event.feeData.cancel}`,\r\n        total: (booking.maxParticipants - participants.length) * event.feeData.cancel\r\n    }]\r\n};\r\n\r\nconst isWoodchip = (e, p) => {\r\n    return Date.parse(e.startDate) - Date.parse(p.age) < 189216000000\r\n};\r\n","//take a database id and output a payment reference.\r\nexport default function paymentReference(id) {\r\n    if(!id || id === 0)throw new Error(\"Bad ID being used\");\r\n    return `CG-${(id * 66138411253)%8933}`;\r\n}","//shared permission checks\r\n//these functions are then wrapped by the client and server ready for use\r\n\r\n\r\nexport const isAdmin = (user) => {\r\n    if (user.roles.find(role => role.name === \"admin\")) return true //admin can always\r\n    return false;\r\n};\r\n\r\nexport const editEvent = (user, event) => {\r\n    if (user.roles.find(role => role.name === \"admin\")) return true //admin can always\r\n    return user.id === event.userId\r\n};\r\n\r\nexport const createEvent = user => {\r\n    if (user.roles.find(role => role.name === \"admin\")) return true //admin can always\r\n    return false;\r\n};\r\n\r\nexport const applyToBookEvent = (user, event) => {\r\n    if (user.roles.find(role => role.name === \"admin\")) return false; //admin does not need to apply\r\n    if (event.userId === user.id) return false; //owner can\r\n    if (user.id === 1) return false; //guest can't apply\r\n    if (user.roles.find(role => role.name === \"book\" && role.eventId === event.id)) return false; //are we approved?\r\n    if (user.applications.find(a => a.eventId === event.id)) return false; //did we apply already?\r\n    if (event.bookingPolicy === 'approved') return true; //event needs to be approved\r\n    return false;\r\n};\r\n\r\nexport const bookEvent = (user, event) => {\r\n    if (user.roles.find(role => role.name === \"admin\")) return true; //admin can\r\n    if (event.userId === user.id) return true; //owner can\r\n    if (event.bookingPolicy === 'guest') return true; //anyone can book\r\n    if (event.bookingPolicy === 'approved' && user.roles.find(role => role.name === \"book\" && role.eventId === event.id)) return true; //booking approved\r\n    if (event.bookingPolicy === 'registered'\r\n        && user.roles.find(role => role.name === \"book\" && role.eventId === event.id)) return true; //book role can book after deadline\r\n    if (event.bookingPolicy === 'registered' && user.id !== 1 && new Date(event.bookingDeadline) > new Date()) return true; //non guest can book registered events\r\n\r\n    if (user.roles.find(role => role.eventId === event.id\r\n            && role.name === \"Manage\")) return true; //anyone with event management permissions can.\r\n\r\n    return false;\r\n};\r\n\r\nexport const deleteBooking = (user, event, booking) => {\r\n    if (user.roles.find(role => role.name === \"admin\")) return true; //admin can\r\n    if (booking.userId === user.id) return true; //owner can\r\n    if (event.userId === user.id) return true; //event owner can\r\n    if (user.roles.find(role => role.eventId === booking.eventId\r\n            && role.name === \"Manage\"\r\n            && (role.villageId === null || role.villageId === booking.villageId)\r\n            && (role.organisationId === null || role.organisationId === booking.organisationId))) return true; //event manager\r\n};\r\n\r\nexport const viewBooking = (user, booking) => {\r\n    if (user.roles.find(role => role.name === \"admin\")) return true; //admin can\r\n    if (booking.userId === user.id) return true; //owner can\r\n    if (booking.event.userId === user.id) return true; //event owner can\r\n    if (user.roles.find(role => role.eventId === booking.eventId\r\n            && (role.name === \"Manage\" || role.name === 'View')\r\n            && (role.villageId === null || role.villageId === booking.villageId)\r\n            && (role.organisationId === null || role.organisationId === booking.organisationId))) return true; //event manager\r\n    return false;\r\n};\r\n\r\nexport const viewOrganisation = (user, event, organisation) => {\r\n    if (user.roles.find(role => role.name === \"admin\")) return true; //admin can\r\n    if (event.userId === user.id) return true; //owner can\r\n    if (user.roles.find(role => role.eventId === event.id\r\n            && (role.organisationId === null || role.organisationId === organisation.id))) return true;\r\n    return false;\r\n};\r\n\r\nexport const viewVillage = (user, event, village) => {\r\n    if (user.roles.find(role => role.name === \"admin\")) return true; //admin can\r\n    if (event.userId === user.id) return true; //owner can\r\n    if (user.roles.find(role => role.eventId === event.id\r\n            && (role.villageId === null || role.villageId === village.id))) return true;\r\n    return false;\r\n};\r\n\r\nexport const manageEvent = (user, event) => {\r\n    if (user.roles.find(role => role.name === \"admin\")) return true; //admin can always\r\n    if (event.userId === user.id) return true;  //event owner can manage\r\n    if (user.roles.find(role => role.eventId === event.id && role.name !== \"book\")) return true; //do we have an event management role?\r\n    return false;\r\n};\r\n\r\nexport const manageWholeEvent = (user, event) => {\r\n    if (user.roles.find(role => role.name === \"admin\")) return true; //admin can always\r\n    if (event.userId === user.id) return true;  //event owner can manage\r\n    if (user.roles.find(role => role.eventId === event.id && role.name !== \"book\" && role.villageId === null && role.organisationId === null)) return true; //do we have a whole event management role?\r\n    return false;\r\n};\r\n\r\nexport const decideApplication = (user, event) => {\r\n    if (user.roles.find(role => role.name === \"admin\")) return true; //admin can always\r\n    if (event.userId === user.id) return true;  //event owner can manage\r\n    if (user.roles.find(role => role.eventId === event.id\r\n            && role.name === \"Manage\"\r\n            && role.villageId === null\r\n            && role.organisationId === null)) return true; //event manager\r\n    return false;\r\n};\r\n\r\nexport const editBooking = (user, event, booking) => {\r\n    if (user.roles.find(role => role.name === \"admin\")) return true; //naturally...\r\n    if (booking.eventId !== event.id) return false; //do the booking/event match?\r\n    if (user.id === booking.userId) return true; //booking owner can edit\r\n    if (user.id === event.userId) return true; //event owner can edit\r\n    if (user.roles.find(role => role.eventId === booking.eventId\r\n            && role.name === \"Manage\"\r\n            && (role.villageId === null || role.villageId === booking.villageId)\r\n            && (role.organisationId === null || role.organisationId === booking.organisationId))) return true;//event/org/village manager can\r\n    if (user.roles.find(role => role.eventId === event.id\r\n            && role.name === \"book\")) return true; //do we have a book role?\r\n    return false;\r\n};\r\n\r\nexport const bookIntoOrganisation = (user, event, booking, organisation) => {\r\n    if (booking !== null && booking.organisationId === organisation.id) return true; //always allow previous org\r\n    if (user.roles.find(r => r.name === \"book\"\r\n            && r.eventId === event.id\r\n            && r.organisationId !== null\r\n            && r.organisationId !== organisation.id)) return false; //we have a book role for another org in the event.\r\n    return true;\r\n};\r\n\r\nexport const assignVillage = (user, event) => {\r\n    return manageEvent(user, event); //for now the same as an event manager, this will change\r\n};\r\n\r\nexport const addVillage = (user, event) => {\r\n    return manageEvent(user, event); //for now the same as an event manager, this will change\r\n};\r\n\r\nexport const getUserList = (user, event) => {\r\n    if (user.id === event.userId) return true; //event owner can\r\n    if (user.roles.find(role => role.name === \"admin\")) return true;\r\n    if (user.roles.find(role => role.name === \"create\")) return true;\r\n    if (user.roles.find(role => (role.name === \"Manage\" || role.name === \"View\") && role.organisationId === null && role.villageId === null)) return true;\r\n    return false;\r\n};\r\n\r\nexport const createRole = (user, event) => {\r\n    if (user.roles.find(role => role.name === \"admin\")) return true;\r\n    if (event === null) return false;\r\n    if (user.id === event.userId) return true; //event owner can\r\n    if (user.roles.find(role => role.eventId === event.id && role.name === \"Manage\" && role.villageId === null && role.organisationId === null)) return true;\r\n    return false\r\n};\r\n\r\nexport const viewMoney = (user, event) => {\r\n    if (user.roles.find(role => role.name === \"admin\")) return true;\r\n    if (user.id === event.userId) return true; //event owner\r\n    if (user.roles.find(role => role.name === \"Money\" && role.eventId === event.id)) return true;\r\n    return false\r\n};\r\n\r\nexport const addPayment = (user, booking) => {\r\n    if (user.roles.find(role => role.name === \"admin\")) return true;\r\n    if (user.id === booking.event.userId) return true; //event owner can\r\n    if (user.roles.find(role => role.name === \"Money\" && role.eventId === booking.event.id && role.organisationId === null)) return true; //global money role\r\n    if (user.roles.find(role => role.name === \"Money\" && role.eventId === booking.event.id && role.organisationId === booking.organisationId)) return true; //org money\r\n    return false;\r\n};\r\n\r\n","const moment = require('moment');\r\n//this file contains age groups, etc\r\n\r\nexport const woodcraft = [\r\n    {\r\n        name: \"Woodchips\",\r\n        singular: \"Woodchip\",\r\n        filter: age => {\r\n            return age < 6\r\n        },\r\n        getAge: event => Moment(event.startDate).subtract(3, 'years').toISOString()\r\n    },\r\n    {\r\n        name: \"Elfins\",\r\n        singular: \"Elfin\",\r\n        filter: age => {\r\n            return age > 5 && age < 10\r\n        },\r\n        getAge: event => Moment(event.startDate).subtract(7, 'years').toISOString()\r\n    },\r\n    {\r\n        name: \"Pioneers\",\r\n        singular: \"Pioneer\",\r\n        filter: age => {\r\n            return age > 9 && age < 13\r\n        },\r\n        getAge: event => Moment(event.startDate).subtract(11, 'years').toISOString()\r\n    },\r\n    {\r\n        name: \"Venturers\",\r\n        singular: \"Venturer\",\r\n        filter: age => {\r\n            return age > 12 && age < 16\r\n        },\r\n        getAge: event => Moment(event.startDate).subtract(14, 'years').toISOString()\r\n    },\r\n    {\r\n        name: \"DFs/Adults\",\r\n        singular: \"DF/Adult\",\r\n        filter: age => {\r\n            return age > 15\r\n        },\r\n        getAge: event => Moment(event.startDate).subtract(19, 'years').toISOString()\r\n    },\r\n];","module.exports = {};","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.hmd = (module) => {\n\tmodule = Object.create(module);\n\tif (!module.children) module.children = [];\n\tObject.defineProperty(module, 'exports', {\n\t\tenumerable: true,\n\t\tset: () => {\n\t\t\tthrow new Error('ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: ' + module.id);\n\t\t}\n\t});\n\treturn module;\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nmd = (module) => {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","var scriptUrl;\nif (__webpack_require__.g.importScripts) scriptUrl = __webpack_require__.g.location + \"\";\nvar document = __webpack_require__.g.document;\nif (!scriptUrl && document) {\n\tif (document.currentScript)\n\t\tscriptUrl = document.currentScript.src\n\tif (!scriptUrl) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tif(scripts.length) scriptUrl = scripts[scripts.length - 1].src\n\t}\n}\n// When supporting browsers where an automatic publicPath is not supported you must specify an output.publicPath manually via configuration\n// or pass an empty string (\"\") and set the __webpack_public_path__ variable from your code to use your own logic.\nif (!scriptUrl) throw new Error(\"Automatic publicPath is not supported in this browser\");\nscriptUrl = scriptUrl.replace(/#.*$/, \"\").replace(/\\?.*$/, \"\").replace(/\\/[^\\/]+$/, \"/\");\n__webpack_require__.p = scriptUrl;","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t\"app\": 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkbookings_serverless\"] = self[\"webpackChunkbookings_serverless\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [\"vendor\"], () => (__webpack_require__(\"./src/front/index.tsx\")))\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n",""],"names":[],"sourceRoot":""}